<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="Hands-on labs for the K-Agent framework - Kubernetes-native MCP server" name="description"/><meta content="CodeWizard-IL" name="author"/><link href="https://nirgeier.github.io/AI-K8S-MCP/Lab07-MCP-Ollama/lab/" rel="canonical"/><link href="../../Lab06-MCP-Workflow/lab/" rel="prev"/><link href="../../Lab08-Kagent/lab/" rel="next"/><link href="../../assets/favicon.png" rel="icon"/><meta content="mkdocs-1.6.1, mkdocs-material-9.6.16" name="generator"/><title>Lab 7: MCP Ollama - K-Agent Labs</title><link href="../../assets/stylesheets/main.7e37652d.min.css" rel="stylesheet"/><link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%202a7%207%200%200%200-7%207c0%202.38%201.19%204.47%203%205.74V17a1%201%200%200%200%201%201h6a1%201%200%200%200%201-1v-2.26c1.81-1.27%203-3.36%203-5.74a7%207%200%200%200-7-7M9%2021a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1H9z%22/%3E%3C/svg%3E');}</style><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Mulish:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Mulish";--md-code-font:"JetBrains Mono"}</style><link href="../../css/print-site.css" rel="stylesheet"/><link href="../../css/print-site-material.css" rel="stylesheet"/><link href="../../assets/stylesheets/codewizard.css?v=1766553928" rel="stylesheet"/><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="slate" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#complete-mcp-server-with-ollama-integration-hands-on-lab"> Skip to content </a> </div> <div data-md-component="announce"> </div> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine classes --> <!-- Header --> <header class="md-header md-header--shadow md-header--lifted" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <!-- Link to home --> <a aria-label="K-Agent Labs" class="md-header__button md-logo" data-md-component="logo" href="../.." title="K-Agent Labs"> <svg viewbox="0 0 89 89" xmlns="http://www.w3.org/2000/svg"> <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z"></path> <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5"></path> <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z"></path> <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25"></path> </svg> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <!-- Header title --> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> K-Agent Labs </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Lab 7: MCP Ollama </span> </div> </div> </div> <div class="m-social__top"> <!-- Social links --> <div class="md-social"> <a class="md-social__link social-class__github" href="https://github.com/nirgeier/AI-K8S-MCP" rel="noopener" target="_blank" title="View on GitHub"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__fork" href="https://github.com/nirgeier/AI-K8S-MCP/network/members" rel="noopener" target="_blank" title="Fork this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"></path></svg> </a> <a class="md-social__link social-class__star" href="https://github.com/nirgeier/AI-K8S-MCP/stargazers" rel="noopener" target="_blank" title="Star this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"></path></svg> </a> <a class="md-social__link social-class__linkedin" href="https://www.linkedin.com/in/nirgeier/" rel="noopener" target="_blank" title="Connect on LinkedIn"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__discord" href="https://discord.gg/U6xW23Ss" rel="noopener" target="_blank" title="Follow me on Discord"> <svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__stackoverflow" href="https://stackoverflow.com/users/1755598/codewizard" rel="noopener" target="_blank" title="Follow me on Stack Overflow"> <svg viewbox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__whatsapp" href="https://wa.me/972548122310" rel="noopener" target="_blank" title="Follow me on WhatsApp"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__email" href="mailto:nirg@codewizard.co.il" rel="noopener" target="_blank" title="Email me"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z" fill="currentColor"></path></svg> </a> </div> </div> <!-- Color palette toggle --> <form class="md-header__option" data-md-component="palette"> <input aria-hidden="true" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/> </form> <!-- User preference: color palette --> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <!-- Site language selector --> <!-- Button to open search modal --> <!-- Check if search is actually enabled - see https://t.ly/DT_0V --> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <!-- Search interface --> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0"> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/nirgeier/AI-K8S-MCP.git" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </div> <div class="md-source__repository"> nirgeier/AI-K8S-MCP </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> <nav aria-label="Tabs" class="md-tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../welcome/"> Welcome </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a class="md-tabs__link" href="../../labs/"> Labs </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../.."> Resources </a> </li> </ul> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="K-Agent Labs" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="K-Agent Labs"> <svg viewbox="0 0 89 89" xmlns="http://www.w3.org/2000/svg"> <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z"></path> <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5"></path> <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z"></path> <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25"></path> </svg> </a> K-Agent Labs </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/nirgeier/AI-K8S-MCP.git" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </div> <div class="md-source__repository"> nirgeier/AI-K8S-MCP </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../welcome/"> <span class="md-ellipsis"> Welcome </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex=""> <span class="md-ellipsis"> Labs </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Labs </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../labs/"> <span class="md-ellipsis"> MCP Labs - Learning Series </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab00-Setup/lab/"> <span class="md-ellipsis"> Lab 0: Setup </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab01-MCP-Fundamentals/lab/"> <span class="md-ellipsis"> Lab 1: MCP Fundamentals </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab02-First-MCP-Server/lab/"> <span class="md-ellipsis"> Lab 2: First MCP Server </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab03-MCP-Tools/lab/"> <span class="md-ellipsis"> Lab 3: MCP Tools </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab04-MCP-Resources/lab/"> <span class="md-ellipsis"> Lab 4: MCP Resources </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab05-MCP-Prompts/lab/"> <span class="md-ellipsis"> Lab 5: MCP Prompts </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab06-MCP-Workflow/lab/"> <span class="md-ellipsis"> Lab 6: MCP Workflow </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Lab 7: MCP Ollama </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="./"> <span class="md-ellipsis"> Lab 7: MCP Ollama </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#lab-objective"> <span class="md-ellipsis"> Lab Objective </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#prerequisites"> <span class="md-ellipsis"> Prerequisites </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-00-getting-started"> <span class="md-ellipsis"> Step 00: Getting Started </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-01-adding-imports"> <span class="md-ellipsis"> Step 01: Adding Imports </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-02-skeleton-code-class"> <span class="md-ellipsis"> Step 02: Skeleton Code - Class </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-03-constructor"> <span class="md-ellipsis"> Step 03: Constructor </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-04-register-tools"> <span class="md-ellipsis"> Step 04: Register Tools </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-05-tool-handlers"> <span class="md-ellipsis"> Step 05: Tool Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-06-register-resources"> <span class="md-ellipsis"> Step 06: Register Resources </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-07-resource-handlers"> <span class="md-ellipsis"> Step 07: Resource Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-08-register-prompts"> <span class="md-ellipsis"> Step 08: Register Prompts </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-09-prompt-handlers"> <span class="md-ellipsis"> Step 09: Prompt Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-10-setup-handlers"> <span class="md-ellipsis"> Step 10: Setup Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-11-run-the-server"> <span class="md-ellipsis"> Step 11: Run the Server </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-12-main-entry-point"> <span class="md-ellipsis"> Step 12: Main / Entry Point </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#error-handling-patterns"> <span class="md-ellipsis"> Error Handling Patterns </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#async-operations-and-performance"> <span class="md-ellipsis"> Async Operations and Performance </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#tool-composition"> <span class="md-ellipsis"> Tool Composition </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#hands-on-exercises"> <span class="md-ellipsis"> Hands-On Exercises </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab08-Kagent/lab/"> <span class="md-ellipsis"> Lab 8: Kagent </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab09-K8S-Event-Monitor/lab.md"> <span class="md-ellipsis"> Lab 9: K8S Event Monitor </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../.."> <span class="md-ellipsis"> Resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <h1 id="complete-mcp-server-with-ollama-integration-hands-on-lab">Complete MCP Server with Ollama Integration - Hands-On Lab<a class="headerlink" href="#complete-mcp-server-with-ollama-integration-hands-on-lab" title="Permanent link">¶</a></h1> <h2 id="lab-objective">Lab Objective<a class="headerlink" href="#lab-objective" title="Permanent link">¶</a></h2> <ul> <li>In this hands-on lab, you’ll build a complete MCP (Model Context Protocol) server from scratch with Ollama integration.</li> <li>You’ll learn how each component works by implementing it yourself, understanding why each piece is necessary, and seeing the complete architecture come together.</li> <li>You’ll implement advanced tools: Country Information with RAG (Retrieval-Augmented Generation) using separate CSV-based databases for different information types covering all 193 UN member states, File Operations, and Database Query, along with best practices for error handling, async operations, and tool composition.</li> </ul> <div class="admonition warning"> <p class="admonition-title">Important Instructions</p> <ul> <li>This lab is designed to be followed step-by-step.</li> <li>Each code block builds upon the previous ones.</li> <li>Do not copy all code blocks at once, as this may lead to duplicate methods or incorrect structure.</li> <li>Follow the instructions sequentially, updating existing code as indicated.</li> </ul> </div> <hr/> <h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">¶</a></h2> <ul> <li><code>Python 3.10</code> or higher installed</li> <li><code>Ollama</code> installed and running locally with models available (e.g., llama3.2)</li> <li>Basic knowledge of <code>MCP</code> concepts</li> <li>Basic understanding of <code>REST APIs</code> and <code>JSON</code></li> <li>Familiarity with <code>CSV</code> files and data handling</li> <li>Basic understanding of <code>Python</code> programming</li> <li>Terminal / command line (<code>CLI</code>) access</li> <li>Text editor or IDE (<code>VS Code</code> is recommended)</li> </ul> <hr/> <h2 id="step-00-getting-started">Step 00: Getting Started<a class="headerlink" href="#step-00-getting-started" title="Permanent link">¶</a></h2> <ol> <li>Create a new file called <code>mcp_ollama.py</code> as your project file, inside the lab’s directory.</li> <li>Open it in your chosen text editor.</li> <li>See the following CSV files, containing data of all 193 UN member states, have been created for you in the lab’s directory (you can open these files in VSCode etc.):</li> </ol> <table> <thead> <tr> <th>File</th> <th>Columns</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>capitals.csv</code></td> <td><code>country</code>, <code>capital</code></td> <td>Capital cities of countries</td> </tr> <tr> <td><code>population.csv</code></td> <td><code>country</code>, <code>population</code></td> <td>Population data</td> </tr> <tr> <td><code>height.csv</code></td> <td><code>country</code>, <code>height</code></td> <td>Average topographic height in meters</td> </tr> <tr> <td><code>foundation_year.csv</code></td> <td><code>country</code>, <code>foundation_year</code></td> <td>Year the country was founded</td> </tr> </tbody> </table> <ol> <li><strong>Important:</strong> Ensure all CSV files are in the same directory as your <code>mcp_ollama.py</code> file, as the code loads them from the current working directory.</li> <li>Create a file named <code>requirements.txt</code> with the following content, inside the lab’s directory:</li> </ol> <div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>mcp&gt;=0.1.0
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>ollama&gt;=0.1.0
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>pandas&gt;=1.3.0
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>requests&gt;=2.25.0
</span></code></pre></div> <ol> <li>Install the dependencies by running the following from the same directory as your <code>requirements.txt</code> file, inside the lab’s directory:</li> </ol> <div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</span></code></pre></div> <hr/> <h2 id="step-01-adding-imports">Step 01: Adding Imports<a class="headerlink" href="#step-01-adding-imports" title="Permanent link">¶</a></h2> <ul> <li>Before we write any code, we need to understand which Python libraries we’ll be using, and why.</li> </ul> <h3 id="asyncio-asynchronous-io"><code>asyncio</code> - Asynchronous I/O<a class="headerlink" href="#asyncio-asynchronous-io" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">asyncio</p> </div> <h4 id="definition">Definition:<a class="headerlink" href="#definition" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="kn">library</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">writing</span><span class="w"> </span><span class="nx">concurrent</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="nx">using</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">async</span><span class="o">/</span><span class="nx">await</span><span class="w"> </span><span class="nx">syntax</span><span class="p">.</span>
</code></pre></div> <h4 id="why">Why:<a class="headerlink" href="#why" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Enables</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">blocking</span><span class="w"> </span><span class="nv">I</span><span class="o">/</span><span class="nv">O</span><span class="w"> </span><span class="nv">operations</span>,<span class="w"> </span><span class="nv">crucial</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">handling</span><span class="w"> </span><span class="nv">multiple</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="nv">requests</span><span class="w"> </span><span class="nv">simultaneously</span><span class="w"> </span><span class="nv">without</span><span class="w"> </span><span class="nv">freezing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">server</span>.
</code></pre></div> <h4 id="usage">Usage:<a class="headerlink" href="#usage" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">async</span><span class="w"> </span><span class="nv">functions</span>,<span class="w"> </span><span class="nv">event</span><span class="w"> </span><span class="nv">loops</span>,<span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">coordinating</span><span class="w"> </span><span class="nv">concurrent</span><span class="w"> </span><span class="nv">tasks</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">MCP</span><span class="w"> </span><span class="nv">server</span>.
</code></pre></div> <hr/> <h3 id="json-javascript-object-notation"><code>json</code> - JavaScript Object Notation<a class="headerlink" href="#json-javascript-object-notation" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">json</p> </div> <h4 id="definition_1">Definition:<a class="headerlink" href="#definition_1" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">module</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">parsing</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">generating</span><span class="w"> </span><span class="nv">JSON</span><span class="w"> </span><span class="nv">data</span>.
</code></pre></div> <h4 id="why_1">Why:<a class="headerlink" href="#why_1" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">MCP</span><span class="w"> </span><span class="nv">uses</span><span class="w"> </span><span class="nv">JSON</span><span class="o">-</span><span class="nv">RPC</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">communication</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">clients</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">servers</span>.
</code></pre></div> <h4 id="usage_1">Usage:<a class="headerlink" href="#usage_1" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code>- Serializing/deserializing data sent over stdio transport.
</code></pre></div> <hr/> <h3 id="typing-type-hints"><code>typing</code> - Type Hints<a class="headerlink" href="#typing-type-hints" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">typing</p> </div> <h4 id="definition_2">Definition:<a class="headerlink" href="#definition_2" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">Provides</span><span class="w"> </span><span class="nx">runtime</span><span class="w"> </span><span class="nx">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nx">hints</span><span class="p">.</span>
</code></pre></div> <h4 id="why_2">Why:<a class="headerlink" href="#why_2" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">Improves</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="nx">readability</span><span class="p">,</span><span class="w"> </span><span class="nx">enables</span><span class="w"> </span><span class="nx">better</span><span class="w"> </span><span class="nx">IDE</span><span class="w"> </span><span class="nx">support</span><span class="p">,</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">catches</span><span class="w"> </span><span class="k">type</span><span class="o">-</span><span class="nx">related</span><span class="w"> </span><span class="nx">errors</span><span class="w"> </span><span class="nx">early</span><span class="p">.</span>
</code></pre></div> <h4 id="usage_2">Usage:<a class="headerlink" href="#usage_2" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">Defining</span><span class="w"> </span><span class="nx">function</span><span class="w"> </span><span class="nx">signatures</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="nx">structures</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">proper</span><span class="w"> </span><span class="nx">types</span><span class="p">.</span>
</code></pre></div> <hr/> <h3 id="mcpserver-core-mcp-server"><code>mcp.server</code> - Core MCP Server<a class="headerlink" href="#mcpserver-core-mcp-server" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">mcp.server</p> </div> <h4 id="definition_3">Definition:<a class="headerlink" href="#definition_3" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">The</span><span class="w"> </span><span class="nx">main</span><span class="w"> </span><span class="nx">server</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">implementing</span><span class="w"> </span><span class="nx">MCP</span><span class="w"> </span><span class="nx">servers</span><span class="p">.</span>
</code></pre></div> <h4 id="why_3">Why:<a class="headerlink" href="#why_3" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="n">Provides</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">framework</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">registering</span><span class="w"> </span><span class="n">tools</span><span class="p">,</span><span class="w"> </span><span class="n">resources</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">prompts</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">handling</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">requests</span><span class="o">.</span>
</code></pre></div> <h4 id="usage_3">Usage:<a class="headerlink" href="#usage_3" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code>- Creating the server instance and setting up request handlers.
</code></pre></div> <hr/> <h3 id="mcpserverstdio-standard-io-transport"><code>mcp.server.stdio</code> - Standard I/O Transport<a class="headerlink" href="#mcpserverstdio-standard-io-transport" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">mcp.server.stdio</p> </div> <h4 id="definition_4">Definition:<a class="headerlink" href="#definition_4" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Transport</span><span class="w"> </span><span class="nv">layer</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">communication</span><span class="w"> </span><span class="nv">via</span><span class="w"> </span><span class="nv">standard</span><span class="w"> </span><span class="nv">input</span><span class="o">/</span><span class="nv">output</span><span class="w"> </span><span class="nv">streams</span>.
</code></pre></div> <h4 id="why_4">Why:<a class="headerlink" href="#why_4" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="n">Enables</span><span class="w"> </span><span class="n">MCP</span><span class="w"> </span><span class="n">servers</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">communicate</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">clients</span><span class="w"> </span><span class="n">through</span><span class="w"> </span><span class="n">stdin</span><span class="o">/</span><span class="n">stdout</span><span class="p">,</span><span class="w"> </span><span class="n">making</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="n">easily</span><span class="w"> </span><span class="n">integrable</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">applications</span><span class="o">.</span>
</code></pre></div> <h4 id="usage_4">Usage:<a class="headerlink" href="#usage_4" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Establishing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">communication</span><span class="w"> </span><span class="nv">channel</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">server</span>.
</code></pre></div> <hr/> <h3 id="mcptypes-protocol-types"><code>mcp.types</code> - Protocol Types<a class="headerlink" href="#mcptypes-protocol-types" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">mcp.types</p> </div> <h4 id="definition_5">Definition:<a class="headerlink" href="#definition_5" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Type</span><span class="w"> </span><span class="nv">definitions</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">MCP</span><span class="w"> </span><span class="nv">protocol</span><span class="w"> </span><span class="nv">messages</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">structures</span>.
</code></pre></div> <h4 id="why_5">Why:<a class="headerlink" href="#why_5" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">Ensures</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nx">safety</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">consistency</span><span class="w"> </span><span class="nx">when</span><span class="w"> </span><span class="nx">working</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">MCP</span><span class="w"> </span><span class="nx">messages</span><span class="p">.</span>
</code></pre></div> <h4 id="usage_5">Usage:<a class="headerlink" href="#usage_5" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">Defining</span><span class="w"> </span><span class="nx">request</span><span class="o">/</span><span class="nx">response</span><span class="w"> </span><span class="nx">schemas</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="nx">types</span><span class="p">.</span>
</code></pre></div> <p><strong>Key Types Used:</strong></p> <ul> <li><strong><code>Resource</code></strong>: Defines a resource (readable data/content) with URI, name, description, and MIME type</li> <li><strong><code>Tool</code></strong>: Defines a tool (executable function) with name, description, and input schema</li> <li><strong><code>TextContent</code></strong>, <strong><code>ImageContent</code></strong>: Content types for tool/resource responses</li> <li><strong><code>Prompt</code></strong>: Defines a prompt template with name, description, and required arguments</li> <li><strong><code>GetPromptResult</code></strong>: Result structure when retrieving a prompt</li> <li><strong><code>CallToolResult</code></strong>: Result structure when calling a tool</li> <li><strong><code>ListResourcesResult</code></strong>, <strong><code>ListToolsResult</code></strong>, <strong><code>ListPromptsResult</code></strong>: Results when listing available resources/tools/prompts</li> <li><strong><code>ReadResourceResult</code></strong>: Result structure when reading a resource</li> </ul> <hr/> <h3 id="sys-system-functions"><code>sys</code> - System Functions<a class="headerlink" href="#sys-system-functions" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">sys</p> </div> <h4 id="definition_6">Definition:<a class="headerlink" href="#definition_6" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code>- Provides access to system-specific parameters and functions.
</code></pre></div> <h4 id="why_6">Why:<a class="headerlink" href="#why_6" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Needed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">handling</span><span class="w"> </span><span class="nv">command</span><span class="o">-</span><span class="nv">line</span><span class="w"> </span><span class="nv">arguments</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">system</span><span class="o">-</span><span class="nv">level</span><span class="w"> </span><span class="nv">operations</span>.
</code></pre></div> <h4 id="usage_6">Usage:<a class="headerlink" href="#usage_6" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Accessing</span><span class="w"> </span><span class="nv">stdin</span><span class="o">/</span><span class="nv">stdout</span><span class="w"> </span><span class="nv">streams</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">handling</span><span class="w"> </span><span class="nv">program</span><span class="w"> </span><span class="k">exit</span>.
</code></pre></div> <hr/> <h3 id="requests-http-library"><code>requests</code> - HTTP Library<a class="headerlink" href="#requests-http-library" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">requests</p> </div> <h4 id="definition_7">Definition:<a class="headerlink" href="#definition_7" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="nx">simple</span><span class="w"> </span><span class="nx">HTTP</span><span class="w"> </span><span class="kn">library</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">making</span><span class="w"> </span><span class="nx">web</span><span class="w"> </span><span class="nx">requests</span><span class="p">.</span>
</code></pre></div> <h4 id="why_7">Why:<a class="headerlink" href="#why_7" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">interacting</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">external</span><span class="w"> </span><span class="nv">APIs</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">services</span>.
</code></pre></div> <h4 id="usage_7">Usage:<a class="headerlink" href="#usage_7" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code>- Making HTTP calls to fetch data from web services.
</code></pre></div> <hr/> <h3 id="sqlite3-sqlite-database"><code>sqlite3</code> - SQLite Database<a class="headerlink" href="#sqlite3-sqlite-database" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">sqlite3</p> </div> <h4 id="definition_8">Definition:<a class="headerlink" href="#definition_8" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code>- Python's built-in SQLite database module.
</code></pre></div> <h4 id="why_8">Why:<a class="headerlink" href="#why_8" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Provides</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">lightweight</span>,<span class="w"> </span><span class="nv">file</span><span class="o">-</span><span class="nv">based</span><span class="w"> </span><span class="nv">database</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">storage</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">querying</span>.
</code></pre></div> <h4 id="usage_8">Usage:<a class="headerlink" href="#usage_8" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code>- Executing SQL queries and managing database operations.
</code></pre></div> <hr/> <h3 id="pandas-data-analysis-library"><code>pandas</code> - Data Analysis Library<a class="headerlink" href="#pandas-data-analysis-library" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">pandas</p> </div> <h4 id="definition_9">Definition:<a class="headerlink" href="#definition_9" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="nx">powerful</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="nx">manipulation</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">analysis</span><span class="w"> </span><span class="kn">library</span><span class="p">.</span>
</code></pre></div> <h4 id="why_9">Why:<a class="headerlink" href="#why_9" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Used</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">reading</span><span class="w"> </span><span class="nv">CSV</span><span class="w"> </span><span class="nv">files</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">managing</span><span class="w"> </span><span class="nv">structured</span><span class="w"> </span><span class="nv">data</span>.
</code></pre></div> <h4 id="usage_9">Usage:<a class="headerlink" href="#usage_9" title="Permanent link">¶</a></h4> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Loading</span><span class="w"> </span><span class="nv">country</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">CSV</span><span class="w"> </span><span class="nv">files</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">RAG</span><span class="w"> </span><span class="nv">retrieval</span>.
</code></pre></div> <hr/> <p>Paste the following imports code inside the <code>mcp_ollama.py</code> file:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sqlite3</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="kn">import</span><span class="w"> </span><span class="nn">ollama</span>
</span><span id="__span-2-10"><a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-2-11"><a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
</span><span id="__span-2-12"><a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.server</span><span class="w"> </span><span class="kn">import</span> <span class="n">Server</span>
</span><span id="__span-2-13"><a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.server.stdio</span><span class="w"> </span><span class="kn">import</span> <span class="n">stdio_server</span>
</span><span id="__span-2-14"><a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.types</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="__span-2-15"><a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>  <span class="n">Resource</span><span class="p">,</span>
</span><span id="__span-2-16"><a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a>  <span class="n">Tool</span><span class="p">,</span>
</span><span id="__span-2-17"><a href="#__codelineno-2-17" id="__codelineno-2-17" name="__codelineno-2-17"></a>  <span class="n">TextContent</span><span class="p">,</span>
</span><span id="__span-2-18"><a href="#__codelineno-2-18" id="__codelineno-2-18" name="__codelineno-2-18"></a>  <span class="n">ImageContent</span><span class="p">,</span>
</span><span id="__span-2-19"><a href="#__codelineno-2-19" id="__codelineno-2-19" name="__codelineno-2-19"></a>  <span class="n">TextResourceContents</span><span class="p">,</span>
</span><span id="__span-2-20"><a href="#__codelineno-2-20" id="__codelineno-2-20" name="__codelineno-2-20"></a>  <span class="n">Prompt</span><span class="p">,</span>
</span><span id="__span-2-21"><a href="#__codelineno-2-21" id="__codelineno-2-21" name="__codelineno-2-21"></a>  <span class="n">GetPromptResult</span><span class="p">,</span>
</span><span id="__span-2-22"><a href="#__codelineno-2-22" id="__codelineno-2-22" name="__codelineno-2-22"></a>  <span class="n">CallToolResult</span><span class="p">,</span>
</span><span id="__span-2-23"><a href="#__codelineno-2-23" id="__codelineno-2-23" name="__codelineno-2-23"></a>  <span class="n">ListResourcesResult</span><span class="p">,</span>
</span><span id="__span-2-24"><a href="#__codelineno-2-24" id="__codelineno-2-24" name="__codelineno-2-24"></a>  <span class="n">ListToolsResult</span><span class="p">,</span>
</span><span id="__span-2-25"><a href="#__codelineno-2-25" id="__codelineno-2-25" name="__codelineno-2-25"></a>  <span class="n">ReadResourceResult</span><span class="p">,</span>
</span><span id="__span-2-26"><a href="#__codelineno-2-26" id="__codelineno-2-26" name="__codelineno-2-26"></a>  <span class="n">ListPromptsResult</span><span class="p">,</span>
</span><span id="__span-2-27"><a href="#__codelineno-2-27" id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="p">)</span>
</span></code></pre></div> <hr/> <h2 id="step-02-skeleton-code-class">Step 02: Skeleton Code - Class<a class="headerlink" href="#step-02-skeleton-code-class" title="Permanent link">¶</a></h2> <h3 id="class-definition">Class Definition<a class="headerlink" href="#class-definition" title="Permanent link">¶</a></h3> <p>Append this class definition code after the imports in your <code>mcp_ollama.py</code> file:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">CompleteOllamaMCPServer</span><span class="p">:</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="s2">"complete-ollama-mcp-server"</span><span class="p">)</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_setup_handlers</span><span class="p">()</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>  <span class="k">def</span><span class="w"> </span><span class="nf">_setup_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>    <span class="c1"># Will be implemented in subsequent steps</span>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>    <span class="k">pass</span>
</span></code></pre></div> <hr/> <h2 id="step-03-constructor">Step 03: Constructor<a class="headerlink" href="#step-03-constructor" title="Permanent link">¶</a></h2> <h3 id="method-__init__-constructor">Method <code>__init__</code> (Constructor)<a class="headerlink" href="#method-__init__-constructor" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Initializes the MCP server with a name</li> <li>Sets up data structures for tools, resources, and prompts</li> <li>Prepares database connection</li> <li>Initializes Ollama client</li> <li>Loads country data from Excel files for RAG retrieval</li> </ul> <p><strong>Why This Runs First:</strong></p> <ul> <li>Establishes the foundation for all server operations</li> <li>Sets up the basic state of the server</li> <li>Ensures all dependencies are ready before registering components</li> </ul> <hr/> <p><strong>Update the <code>__init__</code> method</strong> inside your <code>CompleteOllamaMCPServer</code> class to include the full initialization:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>  <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="s2">"complete-ollama-mcp-server"</span><span class="p">)</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">db_path</span> <span class="o">=</span> <span class="s2">"data.db"</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">ollama_client</span> <span class="o">=</span> <span class="n">ollama</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">country_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_country_data</span><span class="p">()</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_setup_handlers</span><span class="p">()</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>  <span class="k">def</span><span class="w"> </span><span class="nf">_load_country_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="sd">"""Load country information from CSV files for RAG retrieval."""</span>
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a>    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-4-11"><a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>    <span class="n">script_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
</span><span id="__span-4-12"><a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a>    <span class="n">info_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'capital'</span><span class="p">,</span> <span class="s1">'population'</span><span class="p">,</span> <span class="s1">'height'</span><span class="p">,</span> <span class="s1">'foundation_year'</span><span class="p">]</span>
</span><span id="__span-4-13"><a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a>    <span class="k">for</span> <span class="n">info_type</span> <span class="ow">in</span> <span class="n">info_types</span><span class="p">:</span>
</span><span id="__span-4-14"><a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a>      <span class="k">try</span><span class="p">:</span>
</span><span id="__span-4-15"><a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">script_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">info_type</span><span class="si">}</span><span class="s1">.csv'</span>
</span><span id="__span-4-16"><a href="#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="__span-4-17"><a href="#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a>        <span class="c1"># Convert country names to lowercase for case-insensitive matching</span>
</span><span id="__span-4-18"><a href="#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a>        <span class="n">data</span><span class="p">[</span><span class="n">info_type</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'country'</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">df</span><span class="p">[</span><span class="n">info_type</span><span class="p">]))</span>
</span><span id="__span-4-19"><a href="#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a>      <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-4-20"><a href="#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error loading </span><span class="si">{</span><span class="n">info_type</span><span class="si">}</span><span class="s2">.csv: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="__span-4-21"><a href="#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a>        <span class="n">data</span><span class="p">[</span><span class="n">info_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-4-22"><a href="#__codelineno-4-22" id="__codelineno-4-22" name="__codelineno-4-22"></a>    <span class="k">return</span> <span class="n">data</span>
</span></code></pre></div> <hr/> <h2 id="step-04-register-tools">Step 04: Register Tools<a class="headerlink" href="#step-04-register-tools" title="Permanent link">¶</a></h2> <h3 id="method-list_tools">Method <code>list_tools</code><a class="headerlink" href="#method-list_tools" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Registers tool definitions for discovery</li> <li>Defines tool schemas and capabilities</li> <li>Makes tools available to clients</li> </ul> <p><strong>Why This Runs Second:</strong></p> <ul> <li>Tools must be registered before they can be called</li> <li>Defines the capabilities clients can invoke</li> </ul> <p><strong>What is a Tool?</strong></p> <ul> <li>A tool is an executable function that clients can invoke.</li> <li>Tools have names, descriptions, and input parameters.</li> <li>Clients can discover and call these tools to perform operations.</li> </ul> <hr/> <p>Add this method to your class:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">list_tools</span><span class="p">()</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_tools</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tool</span><span class="p">]:</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>  <span class="k">return</span> <span class="p">[</span>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>    <span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>      <span class="n">name</span><span class="o">=</span><span class="s2">"country_info"</span><span class="p">,</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>      <span class="n">description</span><span class="o">=</span><span class="s2">"Get country information using RAG from CSV databases"</span><span class="p">,</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a>      <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a>        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>          <span class="s2">"country"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The country name to get information for"</span>
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>          <span class="p">},</span>
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a>          <span class="s2">"info_types"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a>            <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"capital"</span><span class="p">,</span> <span class="s2">"population"</span><span class="p">,</span> <span class="s2">"height"</span><span class="p">,</span> <span class="s2">"foundation_year"</span><span class="p">]},</span>
</span><span id="__span-5-17"><a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Types of information to retrieve"</span>
</span><span id="__span-5-18"><a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a>          <span class="p">}</span>
</span><span id="__span-5-19"><a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a>        <span class="p">},</span>
</span><span id="__span-5-20"><a href="#__codelineno-5-20" id="__codelineno-5-20" name="__codelineno-5-20"></a>        <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"country"</span><span class="p">]</span>
</span><span id="__span-5-21"><a href="#__codelineno-5-21" id="__codelineno-5-21" name="__codelineno-5-21"></a>      <span class="p">}</span>
</span><span id="__span-5-22"><a href="#__codelineno-5-22" id="__codelineno-5-22" name="__codelineno-5-22"></a>    <span class="p">),</span>
</span><span id="__span-5-23"><a href="#__codelineno-5-23" id="__codelineno-5-23" name="__codelineno-5-23"></a>    <span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-5-24"><a href="#__codelineno-5-24" id="__codelineno-5-24" name="__codelineno-5-24"></a>      <span class="n">name</span><span class="o">=</span><span class="s2">"read_file"</span><span class="p">,</span>
</span><span id="__span-5-25"><a href="#__codelineno-5-25" id="__codelineno-5-25" name="__codelineno-5-25"></a>      <span class="n">description</span><span class="o">=</span><span class="s2">"Read and analyze file contents with metadata"</span><span class="p">,</span>
</span><span id="__span-5-26"><a href="#__codelineno-5-26" id="__codelineno-5-26" name="__codelineno-5-26"></a>      <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-5-27"><a href="#__codelineno-5-27" id="__codelineno-5-27" name="__codelineno-5-27"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-5-28"><a href="#__codelineno-5-28" id="__codelineno-5-28" name="__codelineno-5-28"></a>        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-29"><a href="#__codelineno-5-29" id="__codelineno-5-29" name="__codelineno-5-29"></a>          <span class="s2">"filepath"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-30"><a href="#__codelineno-5-30" id="__codelineno-5-30" name="__codelineno-5-30"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-31"><a href="#__codelineno-5-31" id="__codelineno-5-31" name="__codelineno-5-31"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Absolute path to the file to read"</span>
</span><span id="__span-5-32"><a href="#__codelineno-5-32" id="__codelineno-5-32" name="__codelineno-5-32"></a>          <span class="p">},</span>
</span><span id="__span-5-33"><a href="#__codelineno-5-33" id="__codelineno-5-33" name="__codelineno-5-33"></a>          <span class="s2">"max_size"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-34"><a href="#__codelineno-5-34" id="__codelineno-5-34" name="__codelineno-5-34"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
</span><span id="__span-5-35"><a href="#__codelineno-5-35" id="__codelineno-5-35" name="__codelineno-5-35"></a>            <span class="s2">"default"</span><span class="p">:</span> <span class="mi">1048576</span><span class="p">,</span>
</span><span id="__span-5-36"><a href="#__codelineno-5-36" id="__codelineno-5-36" name="__codelineno-5-36"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Maximum file size in bytes (default 1MB)"</span>
</span><span id="__span-5-37"><a href="#__codelineno-5-37" id="__codelineno-5-37" name="__codelineno-5-37"></a>          <span class="p">},</span>
</span><span id="__span-5-38"><a href="#__codelineno-5-38" id="__codelineno-5-38" name="__codelineno-5-38"></a>          <span class="s2">"encoding"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-39"><a href="#__codelineno-5-39" id="__codelineno-5-39" name="__codelineno-5-39"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-40"><a href="#__codelineno-5-40" id="__codelineno-5-40" name="__codelineno-5-40"></a>            <span class="s2">"default"</span><span class="p">:</span> <span class="s2">"utf-8"</span><span class="p">,</span>
</span><span id="__span-5-41"><a href="#__codelineno-5-41" id="__codelineno-5-41" name="__codelineno-5-41"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"File encoding"</span>
</span><span id="__span-5-42"><a href="#__codelineno-5-42" id="__codelineno-5-42" name="__codelineno-5-42"></a>          <span class="p">}</span>
</span><span id="__span-5-43"><a href="#__codelineno-5-43" id="__codelineno-5-43" name="__codelineno-5-43"></a>        <span class="p">},</span>
</span><span id="__span-5-44"><a href="#__codelineno-5-44" id="__codelineno-5-44" name="__codelineno-5-44"></a>        <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"filepath"</span><span class="p">]</span>
</span><span id="__span-5-45"><a href="#__codelineno-5-45" id="__codelineno-5-45" name="__codelineno-5-45"></a>      <span class="p">}</span>
</span><span id="__span-5-46"><a href="#__codelineno-5-46" id="__codelineno-5-46" name="__codelineno-5-46"></a>    <span class="p">),</span>
</span><span id="__span-5-47"><a href="#__codelineno-5-47" id="__codelineno-5-47" name="__codelineno-5-47"></a>    <span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-5-48"><a href="#__codelineno-5-48" id="__codelineno-5-48" name="__codelineno-5-48"></a>      <span class="n">name</span><span class="o">=</span><span class="s2">"query_database"</span><span class="p">,</span>
</span><span id="__span-5-49"><a href="#__codelineno-5-49" id="__codelineno-5-49" name="__codelineno-5-49"></a>      <span class="n">description</span><span class="o">=</span><span class="s2">"Execute SELECT queries on SQLite database"</span><span class="p">,</span>
</span><span id="__span-5-50"><a href="#__codelineno-5-50" id="__codelineno-5-50" name="__codelineno-5-50"></a>      <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-5-51"><a href="#__codelineno-5-51" id="__codelineno-5-51" name="__codelineno-5-51"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-5-52"><a href="#__codelineno-5-52" id="__codelineno-5-52" name="__codelineno-5-52"></a>        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-53"><a href="#__codelineno-5-53" id="__codelineno-5-53" name="__codelineno-5-53"></a>          <span class="s2">"query"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-54"><a href="#__codelineno-5-54" id="__codelineno-5-54" name="__codelineno-5-54"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-55"><a href="#__codelineno-5-55" id="__codelineno-5-55" name="__codelineno-5-55"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"SELECT SQL query to execute"</span>
</span><span id="__span-5-56"><a href="#__codelineno-5-56" id="__codelineno-5-56" name="__codelineno-5-56"></a>          <span class="p">},</span>
</span><span id="__span-5-57"><a href="#__codelineno-5-57" id="__codelineno-5-57" name="__codelineno-5-57"></a>          <span class="s2">"database"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-58"><a href="#__codelineno-5-58" id="__codelineno-5-58" name="__codelineno-5-58"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-59"><a href="#__codelineno-5-59" id="__codelineno-5-59" name="__codelineno-5-59"></a>            <span class="s2">"default"</span><span class="p">:</span> <span class="s2">"data.db"</span><span class="p">,</span>
</span><span id="__span-5-60"><a href="#__codelineno-5-60" id="__codelineno-5-60" name="__codelineno-5-60"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Database file path"</span>
</span><span id="__span-5-61"><a href="#__codelineno-5-61" id="__codelineno-5-61" name="__codelineno-5-61"></a>          <span class="p">}</span>
</span><span id="__span-5-62"><a href="#__codelineno-5-62" id="__codelineno-5-62" name="__codelineno-5-62"></a>        <span class="p">},</span>
</span><span id="__span-5-63"><a href="#__codelineno-5-63" id="__codelineno-5-63" name="__codelineno-5-63"></a>        <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"query"</span><span class="p">]</span>
</span><span id="__span-5-64"><a href="#__codelineno-5-64" id="__codelineno-5-64" name="__codelineno-5-64"></a>      <span class="p">}</span>
</span><span id="__span-5-65"><a href="#__codelineno-5-65" id="__codelineno-5-65" name="__codelineno-5-65"></a>    <span class="p">)</span>
</span><span id="__span-5-66"><a href="#__codelineno-5-66" id="__codelineno-5-66" name="__codelineno-5-66"></a>  <span class="p">]</span>
</span></code></pre></div> <hr/> <h2 id="step-05-tool-handlers">Step 05: Tool Handlers<a class="headerlink" href="#step-05-tool-handlers" title="Permanent link">¶</a></h2> <h3 id="method-call_tool">Method <code>call_tool</code><a class="headerlink" href="#method-call_tool" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Implements the logic for each tool</li> <li>Handles tool execution and error management</li> <li>Returns formatted results</li> </ul> <p><strong>Why This Runs Third:</strong></p> <ul> <li>Connects tool schemas to actual functionality</li> <li>Makes tools operational</li> </ul> <hr/> <p>Add this method to your class:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">call_tool</span><span class="p">()</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">call_tool</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TextContent</span><span class="p">]:</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>  <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"country_info"</span><span class="p">:</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="n">country</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"country"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>    <span class="n">info_types</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"info_types"</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">country</span><span class="p">:</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Country name is required"</span><span class="p">)</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">info_types</span><span class="p">:</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>      <span class="n">info_types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"capital"</span><span class="p">,</span> <span class="s2">"population"</span><span class="p">,</span> <span class="s2">"height"</span><span class="p">,</span> <span class="s2">"foundation_year"</span><span class="p">]</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>    <span class="n">retrieved_info</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>    <span class="k">for</span> <span class="n">info_type</span> <span class="ow">in</span> <span class="n">info_types</span><span class="p">:</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a>      <span class="c1"># Safe access to nested dictionary</span>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a>      <span class="n">type_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">country_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">info_type</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>      <span class="k">if</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">type_data</span><span class="p">:</span>
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a>        <span class="n">retrieved_info</span><span class="p">[</span><span class="n">info_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">type_data</span><span class="p">[</span><span class="n">country</span><span class="p">]</span>
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a>      <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-20"><a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a>        <span class="n">retrieved_info</span><span class="p">[</span><span class="n">info_type</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Information not available (Data loaded: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">type_data</span><span class="p">)</span><span class="si">}</span><span class="s2"> records)"</span>
</span><span id="__span-6-21"><a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a>
</span><span id="__span-6-22"><a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a>    <span class="c1"># Use Ollama to generate a formatted response</span>
</span><span id="__span-6-23"><a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a>    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Format the following information about </span><span class="si">{</span><span class="n">country</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> into a nice, readable response: </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">retrieved_info</span><span class="p">,</span><span class="w"> </span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-6-24"><a href="#__codelineno-6-24" id="__codelineno-6-24" name="__codelineno-6-24"></a>
</span><span id="__span-6-25"><a href="#__codelineno-6-25" id="__codelineno-6-25" name="__codelineno-6-25"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-6-26"><a href="#__codelineno-6-26" id="__codelineno-6-26" name="__codelineno-6-26"></a>      <span class="c1"># Use llama3.2 as detected on your system</span>
</span><span id="__span-6-27"><a href="#__codelineno-6-27" id="__codelineno-6-27" name="__codelineno-6-27"></a>      <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ollama_client</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
</span><span id="__span-6-28"><a href="#__codelineno-6-28" id="__codelineno-6-28" name="__codelineno-6-28"></a>        <span class="n">model</span><span class="o">=</span><span class="s1">'llama3.2'</span><span class="p">,</span>
</span><span id="__span-6-29"><a href="#__codelineno-6-29" id="__codelineno-6-29" name="__codelineno-6-29"></a>        <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
</span><span id="__span-6-30"><a href="#__codelineno-6-30" id="__codelineno-6-30" name="__codelineno-6-30"></a>        <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">'temperature'</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">,</span> <span class="s1">'max_tokens'</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span>
</span><span id="__span-6-31"><a href="#__codelineno-6-31" id="__codelineno-6-31" name="__codelineno-6-31"></a>      <span class="p">)</span>
</span><span id="__span-6-32"><a href="#__codelineno-6-32" id="__codelineno-6-32" name="__codelineno-6-32"></a>
</span><span id="__span-6-33"><a href="#__codelineno-6-33" id="__codelineno-6-33" name="__codelineno-6-33"></a>      <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">'response'</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-6-34"><a href="#__codelineno-6-34" id="__codelineno-6-34" name="__codelineno-6-34"></a>
</span><span id="__span-6-35"><a href="#__codelineno-6-35" id="__codelineno-6-35" name="__codelineno-6-35"></a>      <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span><span id="__span-6-36"><a href="#__codelineno-6-36" id="__codelineno-6-36" name="__codelineno-6-36"></a>
</span><span id="__span-6-37"><a href="#__codelineno-6-37" id="__codelineno-6-37" name="__codelineno-6-37"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-6-38"><a href="#__codelineno-6-38" id="__codelineno-6-38" name="__codelineno-6-38"></a>      <span class="c1"># Fallback if Ollama fails</span>
</span><span id="__span-6-39"><a href="#__codelineno-6-39" id="__codelineno-6-39" name="__codelineno-6-39"></a>      <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error getting AI response: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">Raw Data: </span><span class="si">{</span><span class="n">retrieved_info</span><span class="si">}</span><span class="s2">"</span><span class="p">)]</span>
</span><span id="__span-6-40"><a href="#__codelineno-6-40" id="__codelineno-6-40" name="__codelineno-6-40"></a>
</span><span id="__span-6-41"><a href="#__codelineno-6-41" id="__codelineno-6-41" name="__codelineno-6-41"></a>  <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"read_file"</span><span class="p">:</span>
</span><span id="__span-6-42"><a href="#__codelineno-6-42" id="__codelineno-6-42" name="__codelineno-6-42"></a>    <span class="n">filepath</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"filepath"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-6-43"><a href="#__codelineno-6-43" id="__codelineno-6-43" name="__codelineno-6-43"></a>    <span class="n">max_size</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"max_size"</span><span class="p">,</span> <span class="mi">1048576</span><span class="p">)</span>
</span><span id="__span-6-44"><a href="#__codelineno-6-44" id="__codelineno-6-44" name="__codelineno-6-44"></a>    <span class="n">encoding</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"encoding"</span><span class="p">,</span> <span class="s2">"utf-8"</span><span class="p">)</span>
</span><span id="__span-6-45"><a href="#__codelineno-6-45" id="__codelineno-6-45" name="__codelineno-6-45"></a>
</span><span id="__span-6-46"><a href="#__codelineno-6-46" id="__codelineno-6-46" name="__codelineno-6-46"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">filepath</span><span class="p">:</span>
</span><span id="__span-6-47"><a href="#__codelineno-6-47" id="__codelineno-6-47" name="__codelineno-6-47"></a>      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"File path is required"</span><span class="p">)</span>
</span><span id="__span-6-48"><a href="#__codelineno-6-48" id="__codelineno-6-48" name="__codelineno-6-48"></a>
</span><span id="__span-6-49"><a href="#__codelineno-6-49" id="__codelineno-6-49" name="__codelineno-6-49"></a>    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</span><span id="__span-6-50"><a href="#__codelineno-6-50" id="__codelineno-6-50" name="__codelineno-6-50"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="__span-6-51"><a href="#__codelineno-6-51" id="__codelineno-6-51" name="__codelineno-6-51"></a>      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"File not found: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-6-52"><a href="#__codelineno-6-52" id="__codelineno-6-52" name="__codelineno-6-52"></a>
</span><span id="__span-6-53"><a href="#__codelineno-6-53" id="__codelineno-6-53" name="__codelineno-6-53"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
</span><span id="__span-6-54"><a href="#__codelineno-6-54" id="__codelineno-6-54" name="__codelineno-6-54"></a>      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Path is not a file: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-6-55"><a href="#__codelineno-6-55" id="__codelineno-6-55" name="__codelineno-6-55"></a>
</span><span id="__span-6-56"><a href="#__codelineno-6-56" id="__codelineno-6-56" name="__codelineno-6-56"></a>    <span class="n">file_size</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span>
</span><span id="__span-6-57"><a href="#__codelineno-6-57" id="__codelineno-6-57" name="__codelineno-6-57"></a>    <span class="k">if</span> <span class="n">file_size</span> <span class="o">&gt;</span> <span class="n">max_size</span><span class="p">:</span>
</span><span id="__span-6-58"><a href="#__codelineno-6-58" id="__codelineno-6-58" name="__codelineno-6-58"></a>      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"File too large: </span><span class="si">{</span><span class="n">file_size</span><span class="si">}</span><span class="s2"> bytes (max: </span><span class="si">{</span><span class="n">max_size</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
</span><span id="__span-6-59"><a href="#__codelineno-6-59" id="__codelineno-6-59" name="__codelineno-6-59"></a>
</span><span id="__span-6-60"><a href="#__codelineno-6-60" id="__codelineno-6-60" name="__codelineno-6-60"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-6-61"><a href="#__codelineno-6-61" id="__codelineno-6-61" name="__codelineno-6-61"></a>      <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-6-62"><a href="#__codelineno-6-62" id="__codelineno-6-62" name="__codelineno-6-62"></a>        <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="__span-6-63"><a href="#__codelineno-6-63" id="__codelineno-6-63" name="__codelineno-6-63"></a>
</span><span id="__span-6-64"><a href="#__codelineno-6-64" id="__codelineno-6-64" name="__codelineno-6-64"></a>      <span class="n">metadata</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"File: </span><span class="si">{</span><span class="n">path</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">Size: </span><span class="si">{</span><span class="n">file_size</span><span class="si">}</span><span class="s2"> bytes</span><span class="se">\n</span><span class="s2">Encoding: </span><span class="si">{</span><span class="n">encoding</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">"</span>
</span><span id="__span-6-65"><a href="#__codelineno-6-65" id="__codelineno-6-65" name="__codelineno-6-65"></a>      <span class="n">result</span> <span class="o">=</span> <span class="n">metadata</span> <span class="o">+</span> <span class="s2">"Content:</span><span class="se">\n</span><span class="s2">"</span> <span class="o">+</span> <span class="n">content</span>
</span><span id="__span-6-66"><a href="#__codelineno-6-66" id="__codelineno-6-66" name="__codelineno-6-66"></a>
</span><span id="__span-6-67"><a href="#__codelineno-6-67" id="__codelineno-6-67" name="__codelineno-6-67"></a>      <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span><span id="__span-6-68"><a href="#__codelineno-6-68" id="__codelineno-6-68" name="__codelineno-6-68"></a>
</span><span id="__span-6-69"><a href="#__codelineno-6-69" id="__codelineno-6-69" name="__codelineno-6-69"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-6-70"><a href="#__codelineno-6-70" id="__codelineno-6-70" name="__codelineno-6-70"></a>      <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error reading file: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)]</span>
</span><span id="__span-6-71"><a href="#__codelineno-6-71" id="__codelineno-6-71" name="__codelineno-6-71"></a>
</span><span id="__span-6-72"><a href="#__codelineno-6-72" id="__codelineno-6-72" name="__codelineno-6-72"></a>  <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"query_database"</span><span class="p">:</span>
</span><span id="__span-6-73"><a href="#__codelineno-6-73" id="__codelineno-6-73" name="__codelineno-6-73"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"query"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-6-74"><a href="#__codelineno-6-74" id="__codelineno-6-74" name="__codelineno-6-74"></a>    <span class="n">database</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"database"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span>
</span><span id="__span-6-75"><a href="#__codelineno-6-75" id="__codelineno-6-75" name="__codelineno-6-75"></a>
</span><span id="__span-6-76"><a href="#__codelineno-6-76" id="__codelineno-6-76" name="__codelineno-6-76"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="p">:</span>
</span><span id="__span-6-77"><a href="#__codelineno-6-77" id="__codelineno-6-77" name="__codelineno-6-77"></a>      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Query is required"</span><span class="p">)</span>
</span><span id="__span-6-78"><a href="#__codelineno-6-78" id="__codelineno-6-78" name="__codelineno-6-78"></a>
</span><span id="__span-6-79"><a href="#__codelineno-6-79" id="__codelineno-6-79" name="__codelineno-6-79"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">query</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"SELECT"</span><span class="p">):</span>
</span><span id="__span-6-80"><a href="#__codelineno-6-80" id="__codelineno-6-80" name="__codelineno-6-80"></a>      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Only SELECT queries are allowed"</span><span class="p">)</span>
</span><span id="__span-6-81"><a href="#__codelineno-6-81" id="__codelineno-6-81" name="__codelineno-6-81"></a>
</span><span id="__span-6-82"><a href="#__codelineno-6-82" id="__codelineno-6-82" name="__codelineno-6-82"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-6-83"><a href="#__codelineno-6-83" id="__codelineno-6-83" name="__codelineno-6-83"></a>      <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>
</span><span id="__span-6-84"><a href="#__codelineno-6-84" id="__codelineno-6-84" name="__codelineno-6-84"></a>      <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span><span id="__span-6-85"><a href="#__codelineno-6-85" id="__codelineno-6-85" name="__codelineno-6-85"></a>
</span><span id="__span-6-86"><a href="#__codelineno-6-86" id="__codelineno-6-86" name="__codelineno-6-86"></a>      <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</span><span id="__span-6-87"><a href="#__codelineno-6-87" id="__codelineno-6-87" name="__codelineno-6-87"></a>      <span class="n">rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
</span><span id="__span-6-88"><a href="#__codelineno-6-88" id="__codelineno-6-88" name="__codelineno-6-88"></a>      <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
</span><span id="__span-6-89"><a href="#__codelineno-6-89" id="__codelineno-6-89" name="__codelineno-6-89"></a>
</span><span id="__span-6-90"><a href="#__codelineno-6-90" id="__codelineno-6-90" name="__codelineno-6-90"></a>      <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="__span-6-91"><a href="#__codelineno-6-91" id="__codelineno-6-91" name="__codelineno-6-91"></a>
</span><span id="__span-6-92"><a href="#__codelineno-6-92" id="__codelineno-6-92" name="__codelineno-6-92"></a>      <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span><span class="p">:</span>
</span><span id="__span-6-93"><a href="#__codelineno-6-93" id="__codelineno-6-93" name="__codelineno-6-93"></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">"No results found."</span>
</span><span id="__span-6-94"><a href="#__codelineno-6-94" id="__codelineno-6-94" name="__codelineno-6-94"></a>      <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-95"><a href="#__codelineno-6-95" id="__codelineno-6-95" name="__codelineno-6-95"></a>        <span class="c1"># Format as table</span>
</span><span id="__span-6-96"><a href="#__codelineno-6-96" id="__codelineno-6-96" name="__codelineno-6-96"></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">"| "</span> <span class="o">+</span> <span class="s2">" | "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" |</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-6-97"><a href="#__codelineno-6-97" id="__codelineno-6-97" name="__codelineno-6-97"></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">"|"</span> <span class="o">+</span> <span class="s2">"|"</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">"---"</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">))</span> <span class="o">+</span> <span class="s2">"|</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-6-98"><a href="#__codelineno-6-98" id="__codelineno-6-98" name="__codelineno-6-98"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
</span><span id="__span-6-99"><a href="#__codelineno-6-99" id="__codelineno-6-99" name="__codelineno-6-99"></a>          <span class="n">result</span> <span class="o">+=</span> <span class="s2">"| "</span> <span class="o">+</span> <span class="s2">" | "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cell</span><span class="p">)</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">row</span><span class="p">)</span> <span class="o">+</span> <span class="s2">" |</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-6-100"><a href="#__codelineno-6-100" id="__codelineno-6-100" name="__codelineno-6-100"></a>
</span><span id="__span-6-101"><a href="#__codelineno-6-101" id="__codelineno-6-101" name="__codelineno-6-101"></a>      <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span><span id="__span-6-102"><a href="#__codelineno-6-102" id="__codelineno-6-102" name="__codelineno-6-102"></a>
</span><span id="__span-6-103"><a href="#__codelineno-6-103" id="__codelineno-6-103" name="__codelineno-6-103"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-6-104"><a href="#__codelineno-6-104" id="__codelineno-6-104" name="__codelineno-6-104"></a>      <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Database error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)]</span>
</span><span id="__span-6-105"><a href="#__codelineno-6-105" id="__codelineno-6-105" name="__codelineno-6-105"></a>
</span><span id="__span-6-106"><a href="#__codelineno-6-106" id="__codelineno-6-106" name="__codelineno-6-106"></a>  <span class="k">else</span><span class="p">:</span>
</span><span id="__span-6-107"><a href="#__codelineno-6-107" id="__codelineno-6-107" name="__codelineno-6-107"></a>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unknown tool: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <h2 id="step-06-register-resources">Step 06: Register Resources<a class="headerlink" href="#step-06-register-resources" title="Permanent link">¶</a></h2> <h3 id="method-list_resources">Method <code>list_resources</code><a class="headerlink" href="#method-list_resources" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Registers resource definitions for discovery</li> <li>Provides additional data for clients</li> </ul> <p><strong>Why This Runs Fourth:</strong></p> <ul> <li>Resources enhance the server’s functionality</li> <li>Allows clients to access static or dynamic data</li> </ul> <p><strong>What is a Resource?</strong></p> <ul> <li>A resource is readable data or content.</li> <li>Resources have URIs and metadata.</li> </ul> <hr/> <p>Add this method to your class:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">list_resources</span><span class="p">()</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_resources</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Resource</span><span class="p">]:</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>  <span class="k">return</span> <span class="p">[</span>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>    <span class="n">Resource</span><span class="p">(</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>      <span class="n">uri</span><span class="o">=</span><span class="s2">"resource://server-info"</span><span class="p">,</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>      <span class="n">name</span><span class="o">=</span><span class="s2">"Server Information"</span><span class="p">,</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a>      <span class="n">description</span><span class="o">=</span><span class="s2">"Basic information about this MCP server"</span><span class="p">,</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>      <span class="n">mimeType</span><span class="o">=</span><span class="s2">"application/json"</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a>    <span class="p">),</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>    <span class="n">Resource</span><span class="p">(</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>      <span class="n">uri</span><span class="o">=</span><span class="s2">"resource://ollama-models"</span><span class="p">,</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a>      <span class="n">name</span><span class="o">=</span><span class="s2">"Available Ollama Models"</span><span class="p">,</span>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a>      <span class="n">description</span><span class="o">=</span><span class="s2">"List of available Ollama models"</span><span class="p">,</span>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a>      <span class="n">mimeType</span><span class="o">=</span><span class="s2">"application/json"</span>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a>    <span class="p">)</span>
</span><span id="__span-7-16"><a href="#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a>  <span class="p">]</span>
</span></code></pre></div> <hr/> <h2 id="step-07-resource-handlers">Step 07: Resource Handlers<a class="headerlink" href="#step-07-resource-handlers" title="Permanent link">¶</a></h2> <h3 id="method-register_resource_handlers">Method <code>register_resource_handlers</code><a class="headerlink" href="#method-register_resource_handlers" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Implements resource reading logic</li> <li>Handles resource requests and returns content</li> </ul> <p><strong>Why This Runs Fifth:</strong></p> <ul> <li>Connects resource URIs to actual content</li> <li>Makes resources accessible to clients</li> </ul> <hr/> <p>Add this method to your class:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">read_resource</span><span class="p">()</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">read_resource</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>  <span class="n">uri_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>  <span class="c1"># Debug log to help diagnose the mismatch</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"DEBUG: Requesting URI: '</span><span class="si">{</span><span class="n">uri_str</span><span class="si">}</span><span class="s2">'"</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a>  <span class="c1"># Allow exact match or match without scheme to be robust</span>
</span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a>  <span class="k">if</span> <span class="n">uri_str</span> <span class="o">==</span> <span class="s2">"resource://server-info"</span> <span class="ow">or</span> <span class="n">uri_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"server-info"</span><span class="p">):</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a>    <span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a>      <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Complete Ollama MCP Server"</span><span class="p">,</span>
</span><span id="__span-8-12"><a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a>      <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"1.0.0"</span><span class="p">,</span>
</span><span id="__span-8-13"><a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a>      <span class="s2">"capabilities"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"tools"</span><span class="p">,</span> <span class="s2">"resources"</span><span class="p">,</span> <span class="s2">"ollama-integration"</span><span class="p">],</span>
</span><span id="__span-8-14"><a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a>      <span class="s2">"tools"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"country_info"</span><span class="p">,</span> <span class="s2">"read_file"</span><span class="p">,</span> <span class="s2">"query_database"</span><span class="p">],</span>
</span><span id="__span-8-15"><a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a>      <span class="s2">"country_database"</span><span class="p">:</span> <span class="s2">"193 UN member states with capitals, populations, topographic heights, and foundation years"</span>
</span><span id="__span-8-16"><a href="#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a>    <span class="p">}</span>
</span><span id="__span-8-17"><a href="#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a>    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-8-18"><a href="#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a>
</span><span id="__span-8-19"><a href="#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a>  <span class="k">elif</span> <span class="n">uri_str</span> <span class="o">==</span> <span class="s2">"resource://ollama-models"</span> <span class="ow">or</span> <span class="n">uri_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">"ollama-models"</span><span class="p">):</span>
</span><span id="__span-8-20"><a href="#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-8-21"><a href="#__codelineno-8-21" id="__codelineno-8-21" name="__codelineno-8-21"></a>      <span class="n">models</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ollama_client</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
</span><span id="__span-8-22"><a href="#__codelineno-8-22" id="__codelineno-8-22" name="__codelineno-8-22"></a>      <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">models</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-8-23"><a href="#__codelineno-8-23" id="__codelineno-8-23" name="__codelineno-8-23"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-8-24"><a href="#__codelineno-8-24" id="__codelineno-8-24" name="__codelineno-8-24"></a>      <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">"error"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-8-25"><a href="#__codelineno-8-25" id="__codelineno-8-25" name="__codelineno-8-25"></a>
</span><span id="__span-8-26"><a href="#__codelineno-8-26" id="__codelineno-8-26" name="__codelineno-8-26"></a>  <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-27"><a href="#__codelineno-8-27" id="__codelineno-8-27" name="__codelineno-8-27"></a>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unknown resource: </span><span class="si">{</span><span class="n">uri_str</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <h2 id="step-08-register-prompts">Step 08: Register Prompts<a class="headerlink" href="#step-08-register-prompts" title="Permanent link">¶</a></h2> <h3 id="method-list_prompts">Method <code>list_prompts</code><a class="headerlink" href="#method-list_prompts" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Registers prompt templates</li> <li>Defines structured prompts for AI interactions</li> </ul> <p><strong>Why This Runs Sixth:</strong></p> <ul> <li>Provides structured prompts for AI interactions</li> <li>Enables clients to request specific prompt templates</li> </ul> <p><strong>What is a Prompt?</strong></p> <ul> <li>A prompt is a template that guides AI assistants.</li> <li>Prompts have names, descriptions, and required arguments.</li> </ul> <hr/> <p>Add this method to your class:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">list_prompts</span><span class="p">()</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_prompts</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Prompt</span><span class="p">]:</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a>  <span class="k">return</span> <span class="p">[</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>    <span class="n">Prompt</span><span class="p">(</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a>      <span class="n">name</span><span class="o">=</span><span class="s2">"analyze-country-data"</span><span class="p">,</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a>      <span class="n">description</span><span class="o">=</span><span class="s2">"Analyze country data and provide insights"</span><span class="p">,</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a>      <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a>        <span class="p">{</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a>          <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"country"</span><span class="p">,</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a>          <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Country to analyze"</span><span class="p">,</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a>          <span class="s2">"required"</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>        <span class="p">}</span>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a>      <span class="p">]</span>
</span><span id="__span-9-14"><a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a>    <span class="p">)</span>
</span><span id="__span-9-15"><a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a>  <span class="p">]</span>
</span></code></pre></div> <hr/> <h2 id="step-09-prompt-handlers">Step 09: Prompt Handlers<a class="headerlink" href="#step-09-prompt-handlers" title="Permanent link">¶</a></h2> <h3 id="method-get_prompt">Method <code>get_prompt</code><a class="headerlink" href="#method-get_prompt" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Generates prompt content.</li> <li>Handles prompt requests and returns structured messages.</li> </ul> <p><strong>Why This Runs Seventh:</strong></p> <ul> <li>Connects prompt templates to actual content.</li> <li>Makes prompts usable by clients.</li> </ul> <hr/> <p>Add this method to your class:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">get_prompt</span><span class="p">()</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_prompt</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">GetPromptResult</span><span class="p">:</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>  <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"analyze-country-data"</span><span class="p">:</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>    <span class="n">country</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"country"</span><span class="p">,</span> <span class="s2">"Unknown Country"</span><span class="p">)</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>    <span class="n">prompt_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"""Analyze the data for </span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s2"> and provide insights:</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="s2">1. Use the country_info tool to get information about the country's capital, population, topographic height, and foundation year</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="s2">2. Analyze the retrieved information and provide interesting facts</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="s2">3. Consider historical context and geographical significance</span>
</span><span id="__span-10-10"><a href="#__codelineno-10-10" id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="s2">4. Provide recommendations or interesting trivia based on the data</span>
</span><span id="__span-10-11"><a href="#__codelineno-10-11" id="__codelineno-10-11" name="__codelineno-10-11"></a>
</span><span id="__span-10-12"><a href="#__codelineno-10-12" id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="s2">Please provide a comprehensive country analysis."""</span>
</span><span id="__span-10-13"><a href="#__codelineno-10-13" id="__codelineno-10-13" name="__codelineno-10-13"></a>
</span><span id="__span-10-14"><a href="#__codelineno-10-14" id="__codelineno-10-14" name="__codelineno-10-14"></a>    <span class="k">return</span> <span class="n">GetPromptResult</span><span class="p">(</span>
</span><span id="__span-10-15"><a href="#__codelineno-10-15" id="__codelineno-10-15" name="__codelineno-10-15"></a>      <span class="n">description</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Country analysis prompt for </span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
</span><span id="__span-10-16"><a href="#__codelineno-10-16" id="__codelineno-10-16" name="__codelineno-10-16"></a>      <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-10-17"><a href="#__codelineno-10-17" id="__codelineno-10-17" name="__codelineno-10-17"></a>        <span class="p">{</span>
</span><span id="__span-10-18"><a href="#__codelineno-10-18" id="__codelineno-10-18" name="__codelineno-10-18"></a>          <span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span>
</span><span id="__span-10-19"><a href="#__codelineno-10-19" id="__codelineno-10-19" name="__codelineno-10-19"></a>          <span class="s2">"content"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-10-20"><a href="#__codelineno-10-20" id="__codelineno-10-20" name="__codelineno-10-20"></a>            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-10-21"><a href="#__codelineno-10-21" id="__codelineno-10-21" name="__codelineno-10-21"></a>            <span class="s2">"text"</span><span class="p">:</span> <span class="n">prompt_text</span>
</span><span id="__span-10-22"><a href="#__codelineno-10-22" id="__codelineno-10-22" name="__codelineno-10-22"></a>          <span class="p">}</span>
</span><span id="__span-10-23"><a href="#__codelineno-10-23" id="__codelineno-10-23" name="__codelineno-10-23"></a>        <span class="p">}</span>
</span><span id="__span-10-24"><a href="#__codelineno-10-24" id="__codelineno-10-24" name="__codelineno-10-24"></a>      <span class="p">]</span>
</span><span id="__span-10-25"><a href="#__codelineno-10-25" id="__codelineno-10-25" name="__codelineno-10-25"></a>    <span class="p">)</span>
</span><span id="__span-10-26"><a href="#__codelineno-10-26" id="__codelineno-10-26" name="__codelineno-10-26"></a>
</span><span id="__span-10-27"><a href="#__codelineno-10-27" id="__codelineno-10-27" name="__codelineno-10-27"></a>  <span class="k">else</span><span class="p">:</span>
</span><span id="__span-10-28"><a href="#__codelineno-10-28" id="__codelineno-10-28" name="__codelineno-10-28"></a>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unknown prompt: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <h2 id="step-10-setup-handlers">Step 10: Setup Handlers<a class="headerlink" href="#step-10-setup-handlers" title="Permanent link">¶</a></h2> <h3 id="method-_setup_handlers">Method <code>_setup_handlers</code><a class="headerlink" href="#method-_setup_handlers" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Placeholder for handler setup (decorators handle registration automatically).</li> <li>Adds structure for future setup logic.</li> </ul> <p><strong>Why This Runs:</strong></p> <ul> <li>Ensures the initialization completes properly.</li> <li>Maintains structure for potential future setup logic.</li> </ul> <hr/> <p>Update the <code>_setup_handlers</code> method in your class (it should already exist from Step 02):</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_setup_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a>  <span class="c1"># Handlers are registered automatically via decorators</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>  <span class="k">pass</span>
</span></code></pre></div> <hr/> <h2 id="step-11-run-the-server">Step 11: Run the Server<a class="headerlink" href="#step-11-run-the-server" title="Permanent link">¶</a></h2> <h3 id="method-run">Method <code>run</code><a class="headerlink" href="#method-run" title="Permanent link">¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Starts the MCP server.</li> <li>Handles stdio communication.</li> <li>Manages server lifecycle.</li> </ul> <p><strong>Why This Runs Last:</strong></p> <ul> <li>Initiates the server operation.</li> <li>Begins listening for client requests.</li> </ul> <hr/> <p>Add this method to your class:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>  <span class="k">async</span> <span class="k">with</span> <span class="n">stdio_server</span><span class="p">()</span> <span class="k">as</span> <span class="p">(</span><span class="n">read_stream</span><span class="p">,</span> <span class="n">write_stream</span><span class="p">):</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a>    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">read_stream</span><span class="p">,</span> <span class="n">write_stream</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">create_initialization_options</span><span class="p">())</span>
</span></code></pre></div> <hr/> <h2 id="step-12-main-entry-point">Step 12: Main / Entry Point<a class="headerlink" href="#step-12-main-entry-point" title="Permanent link">¶</a></h2> <p><strong>What is the Main Entry Point?</strong></p> <ul> <li>The starting point of the script.</li> <li>Initializes and runs the MCP server.</li> <li>Ensures the server starts when the script is executed.</li> <li>Uses <code>asyncio.run()</code> to manage the event loop for async operations.</li> </ul> <p><strong>Why this runs at the end:</strong></p> <ul> <li>Ensures all class definitions and methods are in place before starting the server.</li> <li>Provides a clear entry point for execution.</li> <li>Manages the asynchronous nature of the server.</li> </ul> <hr/> <p>Add this code at the end of your <code>mcp_ollama.py</code> file:</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>  <span class="n">server</span> <span class="o">=</span> <span class="n">CompleteOllamaMCPServer</span><span class="p">()</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>  <span class="k">await</span> <span class="n">server</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>  <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></code></pre></div> <hr/> <h2 id="error-handling-patterns">Error Handling Patterns<a class="headerlink" href="#error-handling-patterns" title="Permanent link">¶</a></h2> <h3 id="pattern-1-input-validation">Pattern 1: Input Validation<a class="headerlink" href="#pattern-1-input-validation" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">Input Validation</p> </div> <p><strong>Definition:</strong> Ensures tool arguments meet requirements before processing. <strong>Why:</strong> Prevents runtime errors and provides clear feedback. <strong>Usage:</strong> Validate inputs early in tool handlers.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">country</span><span class="p">:</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>  <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Country name is required"</span><span class="p">)</span>
</span></code></pre></div> <p><strong>When to use -</strong> For all tool inputs and external data:</p> <ul> <li>User-provided parameters and arguments</li> <li>File paths and resource identifiers</li> <li>Network requests and API parameters</li> <li>Database queries and data inputs</li> <li>Any data that could be malformed or malicious</li> </ul> <p><strong>Why it matters:</strong> Prevents crashes, security vulnerabilities, and unexpected behavior by catching invalid inputs early with clear error messages.</p> <h3 id="pattern-2-graceful-degradation">Pattern 2: Graceful Degradation<a class="headerlink" href="#pattern-2-graceful-degradation" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">Graceful Degradation</p> </div> <p><strong>Definition:</strong> Provides partial functionality when full operation isn’t possible. <strong>Why:</strong> Users get some value even when systems fail partially. <strong>Usage:</strong> Return useful information or fallbacks.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="k">try</span><span class="p">:</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>  <span class="c1"># Attempt to generate AI response with Ollama</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>  <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ollama_client</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s1">'llama3.2'</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">)</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>  <span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">'response'</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>  <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>  <span class="c1"># Return partial results with raw data</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>  <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error getting AI response: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">Raw Data: </span><span class="si">{</span><span class="n">retrieved_info</span><span class="si">}</span><span class="s2">"</span><span class="p">)]</span>
</span></code></pre></div> <p><strong>When to use -</strong> For external dependencies that might be unreliable:</p> <ul> <li>API calls that could timeout or fail</li> <li>Network-dependent operations</li> <li>Services with occasional downtime</li> <li>When partial results are better than no results</li> </ul> <p><strong>Why it matters:</strong> Users get some value even when systems are partially broken, improving overall reliability and user experience.</p> <h3 id="pattern-3-detailed-error-context">Pattern 3: Detailed Error Context<a class="headerlink" href="#pattern-3-detailed-error-context" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">Detailed Error Context</p> </div> <p><strong>Definition:</strong> Provides comprehensive debugging information. <strong>Why:</strong> Enables effective troubleshooting while keeping user messages clean. <strong>Usage:</strong> Log details internally, expose safe messages to users.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Internal error loading country data: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a>  <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">"An error occurred while processing country information. Please try again."</span><span class="p">)]</span>
</span></code></pre></div> <p><strong>When to use -</strong> For complex operations where debugging might be needed:</p> <ul> <li>Multi-step processes with potential failure points</li> <li>Operations involving external systems</li> <li>When you need to track error patterns over time</li> <li>Production environments where detailed logging is crucial</li> </ul> <p><strong>Why it matters:</strong> Developers can diagnose issues effectively while users get clear, non-technical error messages.</p> <hr/> <h2 id="async-operations-and-performance">Async Operations and Performance<a class="headerlink" href="#async-operations-and-performance" title="Permanent link">¶</a></h2> <h3 id="long-running-operations">Long-Running Operations<a class="headerlink" href="#long-running-operations" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">Long-Running Operations</p> </div> <p><strong>Definition:</strong> Operations that take significant time to complete. <strong>Why:</strong> Prevents timeouts and provides feedback. <strong>Usage:</strong> Use async/await and provide progress updates.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">analyze_country_data</span><span class="p">(</span><span class="n">country</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Starting analysis for </span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s2">..."</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>  <span class="c1"># Simulate data processing</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>  <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>  <span class="nb">print</span><span class="p">(</span><span class="s2">"Analysis completed."</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a>  <span class="k">return</span> <span class="sa">f</span><span class="s2">"Analysis result for </span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s2">"</span>
</span></code></pre></div> <p><strong>When to use -</strong> For operations that take more than a few seconds:</p> <ul> <li>Large file processing or analysis</li> <li>Complex computations</li> <li>External API calls with potential delays</li> <li>Batch operations on multiple items</li> </ul> <p><strong>Why it matters:</strong> Prevents timeouts, provides user feedback, enables monitoring and debugging of slow operations.</p> <h3 id="caching-results">Caching Results<a class="headerlink" href="#caching-results" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">Caching Results</p> </div> <p><strong>Definition:</strong> Stores results of expensive operations. <strong>Why:</strong> Improves response times for repeated requests. <strong>Usage:</strong> Implement a simple cache with expiration.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">cache</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_cached_country_info</span><span class="p">(</span><span class="n">country</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>  <span class="k">if</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">cache</span> <span class="ow">and</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">cache</span><span class="p">[</span><span class="n">country</span><span class="p">][</span><span class="s1">'timestamp'</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">3600</span><span class="p">:</span>  <span class="c1"># 1 hour</span>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>    <span class="k">return</span> <span class="n">cache</span><span class="p">[</span><span class="n">country</span><span class="p">][</span><span class="s1">'data'</span><span class="p">]</span>
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a>  <span class="c1"># Fetch fresh data</span>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a>  <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch_country_data</span><span class="p">(</span><span class="n">country</span><span class="p">)</span>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a>  <span class="n">cache</span><span class="p">[</span><span class="n">country</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'data'</span><span class="p">:</span> <span class="n">result</span><span class="p">,</span> <span class="s1">'timestamp'</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()}</span>
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a>  <span class="k">return</span> <span class="n">result</span>
</span></code></pre></div> <p><strong>When to use -</strong> For expensive operations that return consistent results:</p> <ul> <li>API calls to external services</li> <li>Complex calculations or data processing</li> <li>Database queries with static data</li> <li>File analysis that doesn’t change frequently</li> </ul> <p><strong>Why it matters:</strong> Dramatically improves response times, reduces resource usage, and provides better user experience for repeated requests.</p> <hr/> <h2 id="tool-composition">Tool Composition<a class="headerlink" href="#tool-composition" title="Permanent link">¶</a></h2> <h3 id="example-multi-step-analysis">Example: Multi-Step Analysis<a class="headerlink" href="#example-multi-step-analysis" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">Multi-Step Analysis</p> </div> <p><strong>Definition:</strong> Combining simple tools for complex workflows. <strong>Why:</strong> Enables sophisticated operations through tool chaining. <strong>Usage:</strong> Design tools that work well together.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="c1"># Tool 1: Get country info</span>
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="c1"># Tool 2: Analyze data</span>
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="c1"># Tool 3: Generate report</span>
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="c1"># LLM can chain: country_info -&gt; analyze -&gt; report</span>
</span></code></pre></div> <p><strong>When to use -</strong> For workflows that require multiple processing steps:</p> <ul> <li>Data analysis pipelines</li> <li>File processing workflows</li> <li>Multi-stage computations</li> <li>Complex research tasks</li> </ul> <p><strong>Why it matters:</strong> Breaks down complex problems into manageable, reusable components that can be combined in flexible ways.</p> <h3 id="llm-tool-chaining">LLM Tool Chaining<a class="headerlink" href="#llm-tool-chaining" title="Permanent link">¶</a></h3> <div class="admonition question"> <p class="admonition-title">LLM Tool Chaining</p> </div> <p><strong>Definition:</strong> AI automatically sequences tool calls. <strong>Why:</strong> Enables complex reasoning without explicit programming. <strong>Usage:</strong> Design tool outputs as inputs for other tools.</p> <div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="c1"># Example of how an LLM might chain tools:</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="c1"># 1. Use country_info to get country data</span>
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="c1"># 2. Use read_file to get historical data file</span>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="c1"># 3. Use query_database to store analysis results</span>
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">analyze_country_trends</span><span class="p">(</span><span class="n">country</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">  </span><span class="sd">"""LLM can automatically chain these calls"""</span>
</span><span id="__span-20-8"><a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a>
</span><span id="__span-20-9"><a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a>  <span class="c1"># Step 1: Get country information</span>
</span><span id="__span-20-10"><a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a>  <span class="n">country_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_tool</span><span class="p">(</span><span class="s2">"country_info"</span><span class="p">,</span> <span class="p">{</span>
</span><span id="__span-20-11"><a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a>    <span class="s2">"country"</span><span class="p">:</span> <span class="n">country</span><span class="p">,</span>
</span><span id="__span-20-12"><a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a>    <span class="s2">"info_types"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"capital"</span><span class="p">,</span> <span class="s2">"population"</span><span class="p">,</span> <span class="s2">"height"</span><span class="p">,</span> <span class="s2">"foundation_year"</span><span class="p">]</span>
</span><span id="__span-20-13"><a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a>  <span class="p">})</span>
</span><span id="__span-20-14"><a href="#__codelineno-20-14" id="__codelineno-20-14" name="__codelineno-20-14"></a>
</span><span id="__span-20-15"><a href="#__codelineno-20-15" id="__codelineno-20-15" name="__codelineno-20-15"></a>  <span class="c1"># Step 2: Read historical data file</span>
</span><span id="__span-20-16"><a href="#__codelineno-20-16" id="__codelineno-20-16" name="__codelineno-20-16"></a>  <span class="n">historical_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_tool</span><span class="p">(</span><span class="s2">"read_file"</span><span class="p">,</span> <span class="p">{</span>
</span><span id="__span-20-17"><a href="#__codelineno-20-17" id="__codelineno-20-17" name="__codelineno-20-17"></a>    <span class="s2">"filepath"</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"data/</span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s2">_history.txt"</span>
</span><span id="__span-20-18"><a href="#__codelineno-20-18" id="__codelineno-20-18" name="__codelineno-20-18"></a>  <span class="p">})</span>
</span><span id="__span-20-19"><a href="#__codelineno-20-19" id="__codelineno-20-19" name="__codelineno-20-19"></a>
</span><span id="__span-20-20"><a href="#__codelineno-20-20" id="__codelineno-20-20" name="__codelineno-20-20"></a>  <span class="c1"># Step 3: Store analysis in database</span>
</span><span id="__span-20-21"><a href="#__codelineno-20-21" id="__codelineno-20-21" name="__codelineno-20-21"></a>  <span class="n">analysis_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"""</span>
</span><span id="__span-20-22"><a href="#__codelineno-20-22" id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="s2">  INSERT INTO country_analysis (country, info, historical_data, timestamp)</span>
</span><span id="__span-20-23"><a href="#__codelineno-20-23" id="__codelineno-20-23" name="__codelineno-20-23"></a><span class="s2">  VALUES ('</span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="s2">', '</span><span class="si">{</span><span class="n">country_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">', '</span><span class="si">{</span><span class="n">historical_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">', datetime('now'))</span>
</span><span id="__span-20-24"><a href="#__codelineno-20-24" id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="s2">  """</span>
</span><span id="__span-20-25"><a href="#__codelineno-20-25" id="__codelineno-20-25" name="__codelineno-20-25"></a>
</span><span id="__span-20-26"><a href="#__codelineno-20-26" id="__codelineno-20-26" name="__codelineno-20-26"></a>  <span class="n">db_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">call_tool</span><span class="p">(</span><span class="s2">"query_database"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"query"</span><span class="p">:</span> <span class="n">analysis_query</span><span class="p">})</span>
</span><span id="__span-20-27"><a href="#__codelineno-20-27" id="__codelineno-20-27" name="__codelineno-20-27"></a>
</span><span id="__span-20-28"><a href="#__codelineno-20-28" id="__codelineno-20-28" name="__codelineno-20-28"></a>  <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-20-29"><a href="#__codelineno-20-29" id="__codelineno-20-29" name="__codelineno-20-29"></a>    <span class="s2">"country_info"</span><span class="p">:</span> <span class="n">country_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
</span><span id="__span-20-30"><a href="#__codelineno-20-30" id="__codelineno-20-30" name="__codelineno-20-30"></a>    <span class="s2">"historical"</span><span class="p">:</span> <span class="n">historical_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
</span><span id="__span-20-31"><a href="#__codelineno-20-31" id="__codelineno-20-31" name="__codelineno-20-31"></a>    <span class="s2">"stored"</span><span class="p">:</span> <span class="n">db_result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</span><span id="__span-20-32"><a href="#__codelineno-20-32" id="__codelineno-20-32" name="__codelineno-20-32"></a>  <span class="p">}</span>
</span></code></pre></div> <p><strong>When to use -</strong> When tasks naturally break down into sequential steps:</p> <ul> <li>Research and analysis workflows</li> <li>Data processing pipelines</li> <li>Content generation chains</li> <li>Problem-solving sequences</li> </ul> <p><strong>Why it matters:</strong> Enables complex, multi-step reasoning and problem-solving that would be difficult to implement in single tools.</p> <hr/> <h2 id="hands-on-exercises">Hands-On Exercises<a class="headerlink" href="#hands-on-exercises" title="Permanent link">¶</a></h2> <div class="admonition question"> <p class="admonition-title">Exercise 1: Text Processing Tool</p> </div> <p><strong>Definition:</strong> A tool for analyzing and processing text content. <strong>Why:</strong> Enables text manipulation and analysis operations. <strong>Usage:</strong> Process text for counting, patterns, and metrics.</p> <p><strong>Task:</strong> Create a new MCP tool called <code>process_text</code> that analyzes and processes text content. The tool should support multiple operations: counting words/characters/lines, finding regex patterns, and calculating reading time. Add this tool to your <code>CompleteOllamaMCPServer</code> class by updating the <code>list_tools()</code> method and <code>call_tool()</code> handler.</p> <details> <summary>💡 Complete Exercise 1 Solution</summary> <h4>Step 1: Add Tool Definition</h4> Add to `list_tools()`: <div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>  <span class="n">name</span><span class="o">=</span><span class="s2">"process_text"</span><span class="p">,</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a>  <span class="n">description</span><span class="o">=</span><span class="s2">"Analyze and process text content"</span><span class="p">,</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a>  <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a>    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a>    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-7"><a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a>      <span class="s2">"text"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Text to process"</span><span class="p">},</span>
</span><span id="__span-21-8"><a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a>      <span class="s2">"operations"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-9"><a href="#__codelineno-21-9" id="__codelineno-21-9" name="__codelineno-21-9"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
</span><span id="__span-21-10"><a href="#__codelineno-21-10" id="__codelineno-21-10" name="__codelineno-21-10"></a>        <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"count"</span><span class="p">,</span> <span class="s2">"find_pattern"</span><span class="p">,</span> <span class="s2">"reading_time"</span><span class="p">]},</span>
</span><span id="__span-21-11"><a href="#__codelineno-21-11" id="__codelineno-21-11" name="__codelineno-21-11"></a>        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Operations to perform"</span>
</span><span id="__span-21-12"><a href="#__codelineno-21-12" id="__codelineno-21-12" name="__codelineno-21-12"></a>      <span class="p">},</span>
</span><span id="__span-21-13"><a href="#__codelineno-21-13" id="__codelineno-21-13" name="__codelineno-21-13"></a>      <span class="s2">"pattern"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Regex pattern for find_pattern"</span><span class="p">}</span>
</span><span id="__span-21-14"><a href="#__codelineno-21-14" id="__codelineno-21-14" name="__codelineno-21-14"></a>    <span class="p">},</span>
</span><span id="__span-21-15"><a href="#__codelineno-21-15" id="__codelineno-21-15" name="__codelineno-21-15"></a>    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"text"</span><span class="p">,</span> <span class="s2">"operations"</span><span class="p">]</span>
</span><span id="__span-21-16"><a href="#__codelineno-21-16" id="__codelineno-21-16" name="__codelineno-21-16"></a>  <span class="p">}</span>
</span><span id="__span-21-17"><a href="#__codelineno-21-17" id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="p">)</span>
</span></code></pre></div> <h4>Step 2: Add Handler Logic</h4> Add to `call_tool()`: <div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"process_text"</span><span class="p">:</span>
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a>  <span class="n">text</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-22-3"><a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a>  <span class="n">operations</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"operations"</span><span class="p">,</span> <span class="p">[])</span>
</span><span id="__span-22-4"><a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a>  <span class="n">pattern</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"pattern"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-22-5"><a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a>
</span><span id="__span-22-6"><a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a>  <span class="n">result</span> <span class="o">=</span> <span class="s2">""</span>
</span><span id="__span-22-7"><a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a>  <span class="k">if</span> <span class="s2">"count"</span> <span class="ow">in</span> <span class="n">operations</span><span class="p">:</span>
</span><span id="__span-22-8"><a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a>    <span class="n">words</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span><span id="__span-22-9"><a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a>    <span class="n">chars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="__span-22-10"><a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a>    <span class="n">lines</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">))</span>
</span><span id="__span-22-11"><a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a>    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">"Words: </span><span class="si">{</span><span class="n">words</span><span class="si">}</span><span class="s2">, Characters: </span><span class="si">{</span><span class="n">chars</span><span class="si">}</span><span class="s2">, Lines: </span><span class="si">{</span><span class="n">lines</span><span class="si">}</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-22-12"><a href="#__codelineno-22-12" id="__codelineno-22-12" name="__codelineno-22-12"></a>
</span><span id="__span-22-13"><a href="#__codelineno-22-13" id="__codelineno-22-13" name="__codelineno-22-13"></a>  <span class="k">if</span> <span class="s2">"find_pattern"</span> <span class="ow">in</span> <span class="n">operations</span> <span class="ow">and</span> <span class="n">pattern</span><span class="p">:</span>
</span><span id="__span-22-14"><a href="#__codelineno-22-14" id="__codelineno-22-14" name="__codelineno-22-14"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
</span><span id="__span-22-15"><a href="#__codelineno-22-15" id="__codelineno-22-15" name="__codelineno-22-15"></a>    <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="__span-22-16"><a href="#__codelineno-22-16" id="__codelineno-22-16" name="__codelineno-22-16"></a>    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">"Pattern matches: </span><span class="si">{</span><span class="n">matches</span><span class="si">}</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-22-17"><a href="#__codelineno-22-17" id="__codelineno-22-17" name="__codelineno-22-17"></a>
</span><span id="__span-22-18"><a href="#__codelineno-22-18" id="__codelineno-22-18" name="__codelineno-22-18"></a>  <span class="k">if</span> <span class="s2">"reading_time"</span> <span class="ow">in</span> <span class="n">operations</span><span class="p">:</span>
</span><span id="__span-22-19"><a href="#__codelineno-22-19" id="__codelineno-22-19" name="__codelineno-22-19"></a>    <span class="n">words_per_minute</span> <span class="o">=</span> <span class="mi">200</span>
</span><span id="__span-22-20"><a href="#__codelineno-22-20" id="__codelineno-22-20" name="__codelineno-22-20"></a>    <span class="n">minutes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="o">/</span> <span class="n">words_per_minute</span>
</span><span id="__span-22-21"><a href="#__codelineno-22-21" id="__codelineno-22-21" name="__codelineno-22-21"></a>    <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">"Estimated reading time: </span><span class="si">{</span><span class="n">minutes</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> minutes</span><span class="se">\n</span><span class="s2">"</span>
</span><span id="__span-22-22"><a href="#__codelineno-22-22" id="__codelineno-22-22" name="__codelineno-22-22"></a>
</span><span id="__span-22-23"><a href="#__codelineno-22-23" id="__codelineno-22-23" name="__codelineno-22-23"></a>  <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span></code></pre></div> <h4>Step 3: Test the Tool</h4> Test with various inputs to verify functionality. </details> <hr/> <div class="admonition question"> <p class="admonition-title">Exercise 2: JSON Validator Tool</p> </div> <p><strong>Definition:</strong> A tool for validating and processing JSON data. <strong>Why:</strong> Ensures data integrity and provides JSON utilities. <strong>Usage:</strong> Validate, format, and compare JSON structures.</p> <p><strong>Task:</strong> Create a new MCP tool called <code>validate_json</code> that validates and processes JSON data. The tool should support four operations: validating JSON syntax, formatting/pretty-printing JSON, validating against a JSON schema, and comparing two JSON objects. You’ll need to install the <code>jsonschema</code> package and add the necessary imports. Update your server class to include this tool in the <code>list_tools()</code> method and <code>call_tool()</code> handler.</p> <details> <summary>💡 Complete Exercise 2 Solution</summary> <h4>Step 1: Install Dependencies</h4> <div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>pip<span class="w"> </span>install<span class="w"> </span>jsonschema
</span></code></pre></div> <h4>Step 2: Add Imports</h4> <div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">jsonschema</span>
</span></code></pre></div> <h4>Step 3: Add Tool Definition</h4> Add to `list_tools()`: <div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a>  <span class="n">name</span><span class="o">=</span><span class="s2">"validate_json"</span><span class="p">,</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a>  <span class="n">description</span><span class="o">=</span><span class="s2">"Validate and process JSON data"</span><span class="p">,</span>
</span><span id="__span-25-4"><a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a>  <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-25-5"><a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a>    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-25-6"><a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a>    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-25-7"><a href="#__codelineno-25-7" id="__codelineno-25-7" name="__codelineno-25-7"></a>      <span class="s2">"json"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"JSON string to validate"</span><span class="p">},</span>
</span><span id="__span-25-8"><a href="#__codelineno-25-8" id="__codelineno-25-8" name="__codelineno-25-8"></a>      <span class="s2">"operation"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"validate"</span><span class="p">,</span> <span class="s2">"format"</span><span class="p">,</span> <span class="s2">"schema_validate"</span><span class="p">,</span> <span class="s2">"compare"</span><span class="p">]},</span>
</span><span id="__span-25-9"><a href="#__codelineno-25-9" id="__codelineno-25-9" name="__codelineno-25-9"></a>      <span class="s2">"schema"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"JSON schema for validation"</span><span class="p">},</span>
</span><span id="__span-25-10"><a href="#__codelineno-25-10" id="__codelineno-25-10" name="__codelineno-25-10"></a>      <span class="s2">"json2"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Second JSON for comparison"</span><span class="p">}</span>
</span><span id="__span-25-11"><a href="#__codelineno-25-11" id="__codelineno-25-11" name="__codelineno-25-11"></a>    <span class="p">},</span>
</span><span id="__span-25-12"><a href="#__codelineno-25-12" id="__codelineno-25-12" name="__codelineno-25-12"></a>    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"json"</span><span class="p">,</span> <span class="s2">"operation"</span><span class="p">]</span>
</span><span id="__span-25-13"><a href="#__codelineno-25-13" id="__codelineno-25-13" name="__codelineno-25-13"></a>  <span class="p">}</span>
</span><span id="__span-25-14"><a href="#__codelineno-25-14" id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="p">)</span>
</span></code></pre></div> <h4>Step 4: Add Handler Logic</h4> Add to `call_tool()`: <div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"validate_json"</span><span class="p">:</span>
</span><span id="__span-26-2"><a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a>  <span class="n">json_str</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"json"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-26-3"><a href="#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a>  <span class="n">operation</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"operation"</span><span class="p">,</span> <span class="s2">"validate"</span><span class="p">)</span>
</span><span id="__span-26-4"><a href="#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a>  <span class="n">schema_str</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"schema"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-26-5"><a href="#__codelineno-26-5" id="__codelineno-26-5" name="__codelineno-26-5"></a>  <span class="n">json2_str</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"json2"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-26-6"><a href="#__codelineno-26-6" id="__codelineno-26-6" name="__codelineno-26-6"></a>
</span><span id="__span-26-7"><a href="#__codelineno-26-7" id="__codelineno-26-7" name="__codelineno-26-7"></a>  <span class="k">try</span><span class="p">:</span>
</span><span id="__span-26-8"><a href="#__codelineno-26-8" id="__codelineno-26-8" name="__codelineno-26-8"></a>    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</span><span id="__span-26-9"><a href="#__codelineno-26-9" id="__codelineno-26-9" name="__codelineno-26-9"></a>
</span><span id="__span-26-10"><a href="#__codelineno-26-10" id="__codelineno-26-10" name="__codelineno-26-10"></a>    <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"validate"</span><span class="p">:</span>
</span><span id="__span-26-11"><a href="#__codelineno-26-11" id="__codelineno-26-11" name="__codelineno-26-11"></a>      <span class="n">result</span> <span class="o">=</span> <span class="s2">"JSON is valid"</span>
</span><span id="__span-26-12"><a href="#__codelineno-26-12" id="__codelineno-26-12" name="__codelineno-26-12"></a>    <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"format"</span><span class="p">:</span>
</span><span id="__span-26-13"><a href="#__codelineno-26-13" id="__codelineno-26-13" name="__codelineno-26-13"></a>      <span class="n">result</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-26-14"><a href="#__codelineno-26-14" id="__codelineno-26-14" name="__codelineno-26-14"></a>    <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"schema_validate"</span> <span class="ow">and</span> <span class="n">schema_str</span><span class="p">:</span>
</span><span id="__span-26-15"><a href="#__codelineno-26-15" id="__codelineno-26-15" name="__codelineno-26-15"></a>      <span class="n">schema</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">schema_str</span><span class="p">)</span>
</span><span id="__span-26-16"><a href="#__codelineno-26-16" id="__codelineno-26-16" name="__codelineno-26-16"></a>      <span class="n">jsonschema</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</span><span id="__span-26-17"><a href="#__codelineno-26-17" id="__codelineno-26-17" name="__codelineno-26-17"></a>      <span class="n">result</span> <span class="o">=</span> <span class="s2">"JSON validates against schema"</span>
</span><span id="__span-26-18"><a href="#__codelineno-26-18" id="__codelineno-26-18" name="__codelineno-26-18"></a>    <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"compare"</span> <span class="ow">and</span> <span class="n">json2_str</span><span class="p">:</span>
</span><span id="__span-26-19"><a href="#__codelineno-26-19" id="__codelineno-26-19" name="__codelineno-26-19"></a>      <span class="n">data2</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json2_str</span><span class="p">)</span>
</span><span id="__span-26-20"><a href="#__codelineno-26-20" id="__codelineno-26-20" name="__codelineno-26-20"></a>      <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="n">data2</span><span class="p">:</span>
</span><span id="__span-26-21"><a href="#__codelineno-26-21" id="__codelineno-26-21" name="__codelineno-26-21"></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">"JSON objects are identical"</span>
</span><span id="__span-26-22"><a href="#__codelineno-26-22" id="__codelineno-26-22" name="__codelineno-26-22"></a>      <span class="k">else</span><span class="p">:</span>
</span><span id="__span-26-23"><a href="#__codelineno-26-23" id="__codelineno-26-23" name="__codelineno-26-23"></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">"JSON objects differ"</span>
</span><span id="__span-26-24"><a href="#__codelineno-26-24" id="__codelineno-26-24" name="__codelineno-26-24"></a>
</span><span id="__span-26-25"><a href="#__codelineno-26-25" id="__codelineno-26-25" name="__codelineno-26-25"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span><span id="__span-26-26"><a href="#__codelineno-26-26" id="__codelineno-26-26" name="__codelineno-26-26"></a>  <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-26-27"><a href="#__codelineno-26-27" id="__codelineno-26-27" name="__codelineno-26-27"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)]</span>
</span></code></pre></div> <h4>Step 5: Test the Tool</h4> Test validation, formatting, and comparison operations. </details> <hr/> <div class="admonition question"> <p class="admonition-title">Exercise 3: Web Scraper Tool</p> </div> <p><strong>Definition:</strong> A tool for extracting content from web pages. <strong>Why:</strong> Enables data collection from web sources. <strong>Usage:</strong> Fetch and parse web content safely.</p> <p><strong>Task:</strong> Create a new MCP tool called <code>scrape_web</code> that extracts content from web pages. The tool should fetch web pages, extract specific elements using CSS selectors, return clean text content, and handle errors gracefully. You’ll need to install the <code>beautifulsoup4</code> and <code>lxml</code> packages and add the necessary imports. Update your server class to include this tool in the <code>list_tools()</code> method and <code>call_tool()</code> handler.</p> <details> <summary>💡 Complete Exercise 3 Solution</summary> <h4>Step 1: Install Dependencies</h4> <div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a>pip<span class="w"> </span>install<span class="w"> </span>beautifulsoup4<span class="w"> </span>lxml
</span></code></pre></div> <h4>Step 2: Add Imports</h4> <div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">bs4</span><span class="w"> </span><span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span></code></pre></div> <h4>Step 3: Add Tool Definition</h4> Add to `list_tools()`: <div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a>  <span class="n">name</span><span class="o">=</span><span class="s2">"scrape_web"</span><span class="p">,</span>
</span><span id="__span-29-3"><a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a>  <span class="n">description</span><span class="o">=</span><span class="s2">"Extract content from web pages"</span><span class="p">,</span>
</span><span id="__span-29-4"><a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a>  <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-29-5"><a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a>    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-29-6"><a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a>    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-29-7"><a href="#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a>      <span class="s2">"url"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"URL to scrape"</span><span class="p">},</span>
</span><span id="__span-29-8"><a href="#__codelineno-29-8" id="__codelineno-29-8" name="__codelineno-29-8"></a>      <span class="s2">"selector"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"CSS selector for content"</span><span class="p">},</span>
</span><span id="__span-29-9"><a href="#__codelineno-29-9" id="__codelineno-29-9" name="__codelineno-29-9"></a>      <span class="s2">"include_html"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"boolean"</span><span class="p">,</span> <span class="s2">"default"</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Include HTML tags"</span><span class="p">}</span>
</span><span id="__span-29-10"><a href="#__codelineno-29-10" id="__codelineno-29-10" name="__codelineno-29-10"></a>    <span class="p">},</span>
</span><span id="__span-29-11"><a href="#__codelineno-29-11" id="__codelineno-29-11" name="__codelineno-29-11"></a>    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"url"</span><span class="p">]</span>
</span><span id="__span-29-12"><a href="#__codelineno-29-12" id="__codelineno-29-12" name="__codelineno-29-12"></a>  <span class="p">}</span>
</span><span id="__span-29-13"><a href="#__codelineno-29-13" id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="p">)</span>
</span></code></pre></div> <h4>Step 4: Add Handler Logic</h4> Add to `call_tool()`: <div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"scrape_web"</span><span class="p">:</span>
</span><span id="__span-30-2"><a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a>  <span class="n">url</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"url"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-30-3"><a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a>  <span class="n">selector</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"selector"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-30-4"><a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a>  <span class="n">include_html</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"include_html"</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="__span-30-5"><a href="#__codelineno-30-5" id="__codelineno-30-5" name="__codelineno-30-5"></a>
</span><span id="__span-30-6"><a href="#__codelineno-30-6" id="__codelineno-30-6" name="__codelineno-30-6"></a>  <span class="k">try</span><span class="p">:</span>
</span><span id="__span-30-7"><a href="#__codelineno-30-7" id="__codelineno-30-7" name="__codelineno-30-7"></a>    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span id="__span-30-8"><a href="#__codelineno-30-8" id="__codelineno-30-8" name="__codelineno-30-8"></a>    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span><span id="__span-30-9"><a href="#__codelineno-30-9" id="__codelineno-30-9" name="__codelineno-30-9"></a>
</span><span id="__span-30-10"><a href="#__codelineno-30-10" id="__codelineno-30-10" name="__codelineno-30-10"></a>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s1">'lxml'</span><span class="p">)</span>
</span><span id="__span-30-11"><a href="#__codelineno-30-11" id="__codelineno-30-11" name="__codelineno-30-11"></a>
</span><span id="__span-30-12"><a href="#__codelineno-30-12" id="__codelineno-30-12" name="__codelineno-30-12"></a>    <span class="k">if</span> <span class="n">selector</span><span class="p">:</span>
</span><span id="__span-30-13"><a href="#__codelineno-30-13" id="__codelineno-30-13" name="__codelineno-30-13"></a>      <span class="n">elements</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
</span><span id="__span-30-14"><a href="#__codelineno-30-14" id="__codelineno-30-14" name="__codelineno-30-14"></a>      <span class="k">if</span> <span class="n">include_html</span><span class="p">:</span>
</span><span id="__span-30-15"><a href="#__codelineno-30-15" id="__codelineno-30-15" name="__codelineno-30-15"></a>        <span class="n">content</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">)</span>
</span><span id="__span-30-16"><a href="#__codelineno-30-16" id="__codelineno-30-16" name="__codelineno-30-16"></a>      <span class="k">else</span><span class="p">:</span>
</span><span id="__span-30-17"><a href="#__codelineno-30-17" id="__codelineno-30-17" name="__codelineno-30-17"></a>        <span class="n">content</span> <span class="o">=</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">)</span>
</span><span id="__span-30-18"><a href="#__codelineno-30-18" id="__codelineno-30-18" name="__codelineno-30-18"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-30-19"><a href="#__codelineno-30-19" id="__codelineno-30-19" name="__codelineno-30-19"></a>      <span class="n">content</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">include_html</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</span><span id="__span-30-20"><a href="#__codelineno-30-20" id="__codelineno-30-20" name="__codelineno-30-20"></a>
</span><span id="__span-30-21"><a href="#__codelineno-30-21" id="__codelineno-30-21" name="__codelineno-30-21"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">content</span><span class="p">)]</span>
</span><span id="__span-30-22"><a href="#__codelineno-30-22" id="__codelineno-30-22" name="__codelineno-30-22"></a>  <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-30-23"><a href="#__codelineno-30-23" id="__codelineno-30-23" name="__codelineno-30-23"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error scraping web: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)]</span>
</span></code></pre></div> <h4>Step 5: Test the Tool</h4> Test with different URLs and selectors, handling errors gracefully. </details> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Render date of last update --> <!-- Render date of creation --> <!-- ---------------------------------------------------------------------- --> <!-- Render authors --> <!-- ---------------------------------------------------------------------- --> <!-- Render committers from GitHub --> <!-- Render committers from GitLab --> <!-- Render committers --> <!-- ---------------------------------------------------------------------- --> <!-- Determine date of last update --> <!-- Determine date of creation --> <!-- Source file information --> <aside class="md-source-file"> <!-- Date of last update --> <span class="md-source-file__fact"> <span class="md-icon" title="Last update"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 31, 2026 13:02:58 UTC">January 31, 2026</span> </span> <!-- Authors (git-authors plugin) --> <!-- Authors (git-committers plugin) --> <!-- Fallback: Manual GitHub avatar for repository owner --> <span class="md-source-file__fact"> <nav> <a class="md-author" href="https://github.com/nirgeier" title="@nirgeier"> <img alt="Nir Geier" src="https://avatars.githubusercontent.com/u/555154?size=256"/> </a> </nav> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class="md-footer"> <div class="logo1"></div> <div class="logo2"></div> <!-- Link to previous and/or next page --> <nav aria-label="Footer" class="md-footer__inner md-grid"> <!-- Link to previous page --> <a aria-label="Previous: Lab 6: MCP Workflow" class="md-footer__link md-footer__link--prev" href="../../Lab06-MCP-Workflow/lab/"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Previous </span> <div class="md-ellipsis"> Lab 6: MCP Workflow </div> </div> </a> <!-- <ul class="social-badges">
          <li><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target="_blank" rel="noopener"><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a></li>
          <li><a href="https://www.linkedin.com/in/nirgeier/" target="_blank" rel="noopener"><i class="fab fa-linkedin" aria-hidden="true"></i><span class="sr-only">LinkedIn profile</span></a></li>
          <li><a href="mailto:nirgeier@gmail.com"><img src="https://img.shields.io/badge/-nirgeier@gmail.com-fcc624?style=flat&logo=Gmail&logoColor=red" alt="Gmail Badge"></a></li>
          <li><a href="mailto:nirg@codewizard.co.il"><img src="https://img.shields.io/badge/-nirg@codewizard.co.il-fcc624?style=flat&logo=microsoftoutlook&logoColor=blue" alt="Outlook Badge"></a></li>
        </ul> --> <!-- Link to next page --> <a aria-label="Next: Lab 8: Kagent" class="md-footer__link md-footer__link--next" href="../../Lab08-Kagent/lab/"> <div class="md-footer__title"> <span class="md-footer__direction"> Next </span> <div class="md-ellipsis"> Lab 8: Kagent </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> ©2021-2025 Nir Geier<br/><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" rel="noopener" target="_blank"><img alt="Visitor Badge" src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier"/></a> </div> </div> <!-- Social links --> <div class="md-social"> <a class="md-social__link social-class__github" href="https://github.com/nirgeier/AI-K8S-MCP" rel="noopener" target="_blank" title="View on GitHub"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__fork" href="https://github.com/nirgeier/AI-K8S-MCP/network/members" rel="noopener" target="_blank" title="Fork this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"></path></svg> </a> <a class="md-social__link social-class__star" href="https://github.com/nirgeier/AI-K8S-MCP/stargazers" rel="noopener" target="_blank" title="Star this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"></path></svg> </a> <a class="md-social__link social-class__linkedin" href="https://www.linkedin.com/in/nirgeier/" rel="noopener" target="_blank" title="Connect on LinkedIn"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__discord" href="https://discord.gg/U6xW23Ss" rel="noopener" target="_blank" title="Follow me on Discord"> <svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__stackoverflow" href="https://stackoverflow.com/users/1755598/codewizard" rel="noopener" target="_blank" title="Follow me on Stack Overflow"> <svg viewbox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__whatsapp" href="https://wa.me/972548122310" rel="noopener" target="_blank" title="Follow me on WhatsApp"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__email" href="mailto:nirg@codewizard.co.il" rel="noopener" target="_blank" title="Email me"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z" fill="currentColor"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-progress" data-md-component="progress" role="progressbar"></div> <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "content.footer.last-updated", "content.footer.contributors", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", {"navigation.top": true}, "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate", "toc.sticky", "mermaid"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../assets/javascripts/bundle.50899def.min.js"></script> <script src="../../js/print-site.js"></script> <script src="https://buttons.github.io/buttons.js?v=1766553928"></script> </body> </html>