<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="Hands-on labs for the K-Agent framework - Kubernetes-native MCP server" name="description"/><meta content="CodeWizard-IL" name="author"/><link href="https://nirgeier.github.io/AI-K8S-MCP/Lab06-MCP-Workflow/lab/" rel="canonical"/><link href="../../Lab05-MCP-Prompts/lab/" rel="prev"/><link href="../../Lab07-MCP-Ollama/lab/" rel="next"/><link href="../../assets/favicon.png" rel="icon"/><meta content="mkdocs-1.6.1, mkdocs-material-9.6.16" name="generator"/><title>Lab 6: MCP Workflow - K-Agent Labs</title><link href="../../assets/stylesheets/main.7e37652d.min.css" rel="stylesheet"/><link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%202a7%207%200%200%200-7%207c0%202.38%201.19%204.47%203%205.74V17a1%201%200%200%200%201%201h6a1%201%200%200%200%201-1v-2.26c1.81-1.27%203-3.36%203-5.74a7%207%200%200%200-7-7M9%2021a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1H9z%22/%3E%3C/svg%3E');}</style><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Mulish:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Mulish";--md-code-font:"JetBrains Mono"}</style><link href="../../css/print-site.css" rel="stylesheet"/><link href="../../css/print-site-material.css" rel="stylesheet"/><link href="../../assets/stylesheets/codewizard.css?v=1766553928" rel="stylesheet"/><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="slate" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#complete-mcp-server-hands-on-lab"> Skip to content </a> </div> <div data-md-component="announce"> </div> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine classes --> <!-- Header --> <header class="md-header md-header--shadow md-header--lifted" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <!-- Link to home --> <a aria-label="K-Agent Labs" class="md-header__button md-logo" data-md-component="logo" href="../.." title="K-Agent Labs"> <svg viewbox="0 0 89 89" xmlns="http://www.w3.org/2000/svg"> <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z"></path> <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5"></path> <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z"></path> <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25"></path> </svg> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <!-- Header title --> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> K-Agent Labs </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Lab 6: MCP Workflow </span> </div> </div> </div> <div class="m-social__top"> <!-- Social links --> <div class="md-social"> <a class="md-social__link social-class__github" href="https://github.com/nirgeier/AI-K8S-MCP" rel="noopener" target="_blank" title="View on GitHub"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__fork" href="https://github.com/nirgeier/AI-K8S-MCP/network/members" rel="noopener" target="_blank" title="Fork this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"></path></svg> </a> <a class="md-social__link social-class__star" href="https://github.com/nirgeier/AI-K8S-MCP/stargazers" rel="noopener" target="_blank" title="Star this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"></path></svg> </a> <a class="md-social__link social-class__linkedin" href="https://www.linkedin.com/in/nirgeier/" rel="noopener" target="_blank" title="Connect on LinkedIn"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__discord" href="https://discord.gg/U6xW23Ss" rel="noopener" target="_blank" title="Follow me on Discord"> <svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__stackoverflow" href="https://stackoverflow.com/users/1755598/codewizard" rel="noopener" target="_blank" title="Follow me on Stack Overflow"> <svg viewbox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__whatsapp" href="https://wa.me/972548122310" rel="noopener" target="_blank" title="Follow me on WhatsApp"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__email" href="mailto:nirg@codewizard.co.il" rel="noopener" target="_blank" title="Email me"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z" fill="currentColor"></path></svg> </a> </div> </div> <!-- Color palette toggle --> <form class="md-header__option" data-md-component="palette"> <input aria-hidden="true" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/> </form> <!-- User preference: color palette --> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <!-- Site language selector --> <!-- Button to open search modal --> <!-- Check if search is actually enabled - see https://t.ly/DT_0V --> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <!-- Search interface --> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0"> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/nirgeier/AI-K8S-MCP.git" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </div> <div class="md-source__repository"> nirgeier/AI-K8S-MCP </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> <nav aria-label="Tabs" class="md-tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../welcome/"> Welcome </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a class="md-tabs__link" href="../../labs/"> Labs </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../Tasks/"> Tasks </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../Resources/Lab01-MCP-Fundamentals/MCP-Basics-py/"> Resources </a> </li> </ul> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="K-Agent Labs" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="K-Agent Labs"> <svg viewbox="0 0 89 89" xmlns="http://www.w3.org/2000/svg"> <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z"></path> <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5"></path> <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z"></path> <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25"></path> </svg> </a> K-Agent Labs </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/nirgeier/AI-K8S-MCP.git" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </div> <div class="md-source__repository"> nirgeier/AI-K8S-MCP </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../welcome/"> <span class="md-ellipsis"> Welcome </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex=""> <span class="md-ellipsis"> Labs </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Labs </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../labs/"> <span class="md-ellipsis"> MCP Labs - Learning Series </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab00-Setup/lab/"> <span class="md-ellipsis"> Lab 0: Setup </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab01-MCP-Fundamentals/lab/"> <span class="md-ellipsis"> Lab 1: MCP Fundamentals </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab02-First-MCP-Server/lab/"> <span class="md-ellipsis"> Lab 2: First MCP Server </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab03-MCP-Tools/lab/"> <span class="md-ellipsis"> Lab 3: MCP Tools </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab04-MCP-Resources/lab/"> <span class="md-ellipsis"> Lab 4: MCP Resources </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab05-MCP-Prompts/lab/"> <span class="md-ellipsis"> Lab 5: MCP Prompts </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Lab 6: MCP Workflow </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="./"> <span class="md-ellipsis"> Lab 6: MCP Workflow </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#mcp-server-structure-lab"> <span class="md-ellipsis"> MCP Server Structure Lab </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#lab-objective"> <span class="md-ellipsis"> Lab Objective </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#prerequisites"> <span class="md-ellipsis"> Prerequisites </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#getting-started"> <span class="md-ellipsis"> Getting Started </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-01-adding-imports"> <span class="md-ellipsis"> Step 01: Adding Imports </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#step-02-skeleton-code"> <span class="md-ellipsis"> Step 02: Skeleton Code </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-01-imports"> <span class="md-ellipsis"> Skeleton 01: Imports </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-02-class"> <span class="md-ellipsis"> Skeleton 02: Class </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-03-constructor"> <span class="md-ellipsis"> Skeleton 03: Constructor </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-04-register-tools"> <span class="md-ellipsis"> Skeleton 04: Register Tools </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-05-tools-handlers"> <span class="md-ellipsis"> Skeleton 05: Tool(s) Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-06-register-resources"> <span class="md-ellipsis"> Skeleton 06: Register Resources </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-07-resource-handlers"> <span class="md-ellipsis"> Skeleton 07: Resource Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-08-register-prompts"> <span class="md-ellipsis"> Skeleton 08: Register Prompts </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-09-prompt-handlers"> <span class="md-ellipsis"> Skeleton 09: Prompt Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-10-lifecycle-handlers"> <span class="md-ellipsis"> Skeleton 10: Lifecycle Handlers </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-11-run-the-server"> <span class="md-ellipsis"> Skeleton 11: Run the Server </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-12-rag"> <span class="md-ellipsis"> Skeleton 12: RAG </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-13-roots"> <span class="md-ellipsis"> Skeleton 13: Roots </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#skeleton-14-main-entry-point"> <span class="md-ellipsis"> Skeleton 14: Main / Entry Point </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#testing-with-mcp-inspector"> <span class="md-ellipsis"> Testing with MCP Inspector </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-01-connect-to-the-server"> <span class="md-ellipsis"> Test 01: Connect to the Server </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-02-explore-tools"> <span class="md-ellipsis"> Test 02: Explore Tools </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-03-test-the-calculate-tool"> <span class="md-ellipsis"> Test 03: Test the Calculate Tool </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-04-test-the-store-data-tool"> <span class="md-ellipsis"> Test 04: Test the Store Data Tool </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-05-test-the-retrieve-data-tool"> <span class="md-ellipsis"> Test 05: Test the Retrieve Data Tool </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-06-test-the-echo-tool"> <span class="md-ellipsis"> Test 06: Test the Echo Tool </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-07-test-resources"> <span class="md-ellipsis"> Test 07: Test Resources </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#test-08-testing-your-prompts"> <span class="md-ellipsis"> Test 08: Testing Your Prompts </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#advanced-experiments"> <span class="md-ellipsis"> Advanced Experiments </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#bonus-task-hands-on-exercise"> <span class="md-ellipsis"> Bonus Task: Hands-On Exercise </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#congratulations"> <span class="md-ellipsis"> Congratulations! ðŸŽ‰ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab07-MCP-Ollama/lab/"> <span class="md-ellipsis"> Lab 7: MCP Ollama </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Lab08-Kagent/lab/"> <span class="md-ellipsis"> Lab 8: Kagent </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../Tasks/"> <span class="md-ellipsis"> Tasks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../Resources/Lab01-MCP-Fundamentals/MCP-Basics-py/"> <span class="md-ellipsis"> Resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <h1 id="complete-mcp-server-hands-on-lab">Complete MCP Server - Hands-On Lab<a class="headerlink" href="#complete-mcp-server-hands-on-lab" title="Permanent link">Â¶</a></h1> <h2 id="mcp-server-structure-lab">MCP Server Structure Lab<a class="headerlink" href="#mcp-server-structure-lab" title="Permanent link">Â¶</a></h2> <h2 id="lab-objective">Lab Objective<a class="headerlink" href="#lab-objective" title="Permanent link">Â¶</a></h2> <ul> <li>In this hands-on lab, youâ€™ll build a complete MCP (Model Context Protocol) server from scratch.</li> <li>Youâ€™ll learn how each component works by implementing it yourself, understanding why each piece is necessary, and seeing the complete architecture come together.</li> </ul> <h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">Â¶</a></h2> <ul> <li>Python 3.10 or higher installed</li> <li>Basic understanding of Python programming</li> <li>Terminal/command line access</li> <li>Text editor or IDE</li> </ul> <hr/> <h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">Â¶</a></h2> <h3 id="step-1-create-your-project-file">Step 1: Create Your Project File<a class="headerlink" href="#step-1-create-your-project-file" title="Permanent link">Â¶</a></h3> <ol> <li>Create a new file called <code>mcp_server.py</code></li> <li>Open it in your favorite text editor</li> <li>Weâ€™ll build this server step by step!</li> </ol> <hr/> <h2 id="step-01-adding-imports">Step 01: Adding Imports<a class="headerlink" href="#step-01-adding-imports" title="Permanent link">Â¶</a></h2> <ul> <li>Before we write any code, we need to understand what libraries weâ€™re using and why.</li> </ul> <h3 id="asyncio-asynchronous-io"><code>asyncio</code> - Asynchronous I/O<a class="headerlink" href="#asyncio-asynchronous-io" title="Permanent link">Â¶</a></h3> <div class="admonition question"> <p class="admonition-title">asyncio</p> <h4 id="definition">Definition:<a class="headerlink" href="#definition" title="Permanent link">Â¶</a></h4> <ul> <li><code>asyncio</code> is a Python library for writing concurrent code using the async/await syntax.</li> </ul> <h4 id="why">Why:<a class="headerlink" href="#why" title="Permanent link">Â¶</a></h4> <ul> <li>Enables asynchronous programming in Python</li> <li>MCP servers handle multiple concurrent operations (I/O, requests) without blocking</li> </ul> <h4 id="usage">Usage:<a class="headerlink" href="#usage" title="Permanent link">Â¶</a></h4> <ul> <li><code>async</code>/<code>await</code> keywords, event loops, concurrent task execution</li> </ul> </div> <hr/> <h3 id="json-javascript-object-notation"><code>json</code> - JavaScript Object Notation<a class="headerlink" href="#json-javascript-object-notation" title="Permanent link">Â¶</a></h3> <div class="admonition question"> <p class="admonition-title">json</p> <h4 id="definition_1">Definition:<a class="headerlink" href="#definition_1" title="Permanent link">Â¶</a></h4> <ul> <li>JSON encoding/decoding for data serialization</li> </ul> <h4 id="why_1">Why:<a class="headerlink" href="#why_1" title="Permanent link">Â¶</a></h4> <ul> <li>MCP uses JSON-RPC protocol; resources return JSON data</li> </ul> <h4 id="usage_1">Usage:<a class="headerlink" href="#usage_1" title="Permanent link">Â¶</a></h4> <ul> <li><code>json.dumps()</code> to serialize Python dicts, <code>json.loads()</code> to parse</li> </ul> </div> <hr/> <h3 id="typing-type-hints"><code>typing</code> - Type Hints<a class="headerlink" href="#typing-type-hints" title="Permanent link">Â¶</a></h3> <div class="admonition question"> <p class="admonition-title">typing</p> <h4 id="definition_2">Definition:<a class="headerlink" href="#definition_2" title="Permanent link">Â¶</a></h4> <ul> <li>Type hints for better code documentation and IDE support</li> </ul> <h4 id="why_2">Why:<a class="headerlink" href="#why_2" title="Permanent link">Â¶</a></h4> <ul> <li>Makes code more maintainable and catches type errors early</li> </ul> <h4 id="usage_2">Usage:<a class="headerlink" href="#usage_2" title="Permanent link">Â¶</a></h4> <ul> <li>Function parameters, return types (Any = any type, Optional = can be None)</li> </ul> </div> <hr/> <h3 id="mcpserver-core-mcp-server"><code>mcp.server</code> - Core MCP Server<a class="headerlink" href="#mcpserver-core-mcp-server" title="Permanent link">Â¶</a></h3> <div class="admonition question"> <p class="admonition-title">mcp.server</p> <h4 id="definition_3">Definition:<a class="headerlink" href="#definition_3" title="Permanent link">Â¶</a></h4> <ul> <li>Core MCP Server class - the foundation of our server</li> </ul> <h4 id="why_3">Why:<a class="headerlink" href="#why_3" title="Permanent link">Â¶</a></h4> <ul> <li>Provides all MCP protocol implementation and lifecycle management</li> </ul> <h4 id="usage_3">Usage:<a class="headerlink" href="#usage_3" title="Permanent link">Â¶</a></h4> <ul> <li>Create server instance, register handlers, manage connections</li> </ul> </div> <hr/> <h3 id="mcpserverstdio-standard-io-transport"><code>mcp.server.stdio</code> - Standard I/O Transport<a class="headerlink" href="#mcpserverstdio-standard-io-transport" title="Permanent link">Â¶</a></h3> <div class="admonition question"> <p class="admonition-title">mcp.server.stdio</p> <h4 id="definition_4">Definition:<a class="headerlink" href="#definition_4" title="Permanent link">Â¶</a></h4> <ul> <li>Standard Input/Output transport layer for MCP</li> </ul> <h4 id="why_4">Why:<a class="headerlink" href="#why_4" title="Permanent link">Â¶</a></h4> <ul> <li>MCP servers communicate via stdio (standard in/out streams)</li> </ul> <h4 id="usage_4">Usage:<a class="headerlink" href="#usage_4" title="Permanent link">Â¶</a></h4> <ul> <li>Connects server to clients through stdin/stdout pipes</li> </ul> </div> <hr/> <h3 id="mcptypes-protocol-types"><code>mcp.types</code> - Protocol Types<a class="headerlink" href="#mcptypes-protocol-types" title="Permanent link">Â¶</a></h3> <div class="admonition question"> <p class="admonition-title">mcp.types</p> <h4 id="definition_5">Definition:<a class="headerlink" href="#definition_5" title="Permanent link">Â¶</a></h4> <ul> <li>MCP protocol type definitions for structured data</li> </ul> <h4 id="why_5">Why:<a class="headerlink" href="#why_5" title="Permanent link">Â¶</a></h4> <ul> <li>Type-safe definitions for all MCP primitives (tools, resources, prompts)</li> </ul> <h4 id="usage_5">Usage:<a class="headerlink" href="#usage_5" title="Permanent link">Â¶</a></h4> <ul> <li>Tool = executable functions, Resource = readable data, Prompt = templates, TextContent = text responses</li> </ul> </div> <hr/> <h3 id="sys-system-functions"><code>sys</code> - System Functions<a class="headerlink" href="#sys-system-functions" title="Permanent link">Â¶</a></h3> <div class="admonition question"> <p class="admonition-title">sys</p> <h4 id="definition_6">Definition:<a class="headerlink" href="#definition_6" title="Permanent link">Â¶</a></h4> <ul> <li>System-specific parameters and functions</li> </ul> <h4 id="why_6">Why:<a class="headerlink" href="#why_6" title="Permanent link">Â¶</a></h4> <ul> <li>Handle system exits, command-line arguments, and stdio streams</li> </ul> <h4 id="usage_6">Usage:<a class="headerlink" href="#usage_6" title="Permanent link">Â¶</a></h4> <ul> <li><code>sys.exit()</code> for graceful shutdown, <code>sys.stdin</code>/<code>stdout</code> for I/O</li> </ul> </div> <hr/> <h2 id="step-02-skeleton-code">Step 02: Skeleton Code<a class="headerlink" href="#step-02-skeleton-code" title="Permanent link">Â¶</a></h2> <h2 id="skeleton-01-imports">Skeleton 01: <code>Imports</code><a class="headerlink" href="#skeleton-01-imports" title="Permanent link">Â¶</a></h2> <ul> <li>Set the following imports inside the <code>mcp_server.py</code>:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="ch">#!/usr/bin/env python3</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="sd">"""</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="sd">Complete MCP (Model Context Protocol) Server Implementation</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="sd">Built step by step for learning purposes.</span>
</span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="sd">- Enables clients to get ready-to-use prompts</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="sd">- Connects prompt templates to actual content</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="sd">"""</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-0-12"><a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>
</span><span id="__span-0-13"><a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.server</span><span class="w"> </span><span class="kn">import</span> <span class="n">Server</span>
</span><span id="__span-0-14"><a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.server.stdio</span><span class="w"> </span><span class="kn">import</span> <span class="n">stdio_server</span>
</span><span id="__span-0-15"><a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="kn">from</span><span class="w"> </span><span class="nn">mcp.types</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="__span-0-16"><a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a>  <span class="n">Tool</span><span class="p">,</span>
</span><span id="__span-0-17"><a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a>  <span class="n">Resource</span><span class="p">,</span>
</span><span id="__span-0-18"><a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a>  <span class="n">Prompt</span><span class="p">,</span>
</span><span id="__span-0-19"><a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a>  <span class="n">TextContent</span><span class="p">,</span>
</span><span id="__span-0-20"><a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a>  <span class="n">ImageContent</span><span class="p">,</span>
</span><span id="__span-0-21"><a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a>  <span class="n">EmbeddedResource</span><span class="p">,</span>
</span><span id="__span-0-22"><a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="p">)</span>
</span><span id="__span-0-23"><a href="#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
</span></code></pre></div> <ul> <li>Create the <code>requirements.txt</code> file with the following content:</li> </ul> <div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>mcp
</span></code></pre></div> <ul> <li>Install the MCP library:</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</span></code></pre></div> <hr/> <h2 id="skeleton-02-class">Skeleton 02: <code>Class</code><a class="headerlink" href="#skeleton-02-class" title="Permanent link">Â¶</a></h2> <ul> <li>Add thislass definition after the imports in your <code>mcp_server.py</code> file:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">CompleteMCPServer</span><span class="p">:</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="sd">    A comprehensive MCP Server implementation showcasing all</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="sd">    - Enables clients to get ready-to-use prompts</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="sd">    - Connects prompt templates to actual content</span>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="sd">    protocol features.</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="sd">  This class demonstrates:</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="sd">    - Server initialization</span>
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="sd">    - Tool registration and execution</span>
</span><span id="__span-3-12"><a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="sd">    - Resource management</span>
</span><span id="__span-3-13"><a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="sd">    - Prompt templates</span>
</span><span id="__span-3-14"><a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="sd">    - Defines the behavior of each prompt</span>
</span><span id="__span-3-15"><a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="sd">    - Handlers make prompts functional</span>
</span><span id="__span-3-16"><a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>
</span><span id="__span-3-17"><a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="sd">    - Request handling</span>
</span><span id="__span-3-18"><a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="sd">  """</span>
</span></code></pre></div> <hr/> <h2 id="skeleton-03-constructor">Skeleton 03: <code>Constructor</code><a class="headerlink" href="#skeleton-03-constructor" title="Permanent link">Â¶</a></h2> <h3 id="method__init__-constructor">Method<code>__init__</code> (Constructor)<a class="headerlink" href="#method__init__-constructor" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Initializes</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">MCP</span><span class="w"> </span><span class="nv">Server</span><span class="w"> </span><span class="nv">instance</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Creates</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">server</span><span class="w"> </span><span class="nv">object</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">version</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Sets</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">foundation</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">MCP</span><span class="w"> </span><span class="nv">operations</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Enables</span><span class="w"> </span><span class="nv">clients</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">get</span><span class="w"> </span><span class="nv">ready</span><span class="o">-</span><span class="nv">to</span><span class="o">-</span><span class="nv">use</span><span class="w"> </span><span class="nv">prompts</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Connects</span><span class="w"> </span><span class="nv">prompt</span><span class="w"> </span><span class="nv">templates</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">actual</span><span class="w"> </span><span class="nv">content</span>
</code></pre></div> <ul> <li>Prepares data structures for tools, resources, and prompts</li> </ul> <p><strong>Why This Runs First:</strong></p> <div class="codehilite"><pre><span></span><code>- Constructor must run before any other methods
- Creates the server object that all other methods will use
- Defines the behavior of each prompt
- Handlers make prompts functional
</code></pre></div> <ul> <li>No other operations can occur without this initialization</li> <li>Sets up the basic state of the server</li> </ul> <hr/> <ul> <li>Add this class definition after inside your <code>CompleteMCPServer</code> class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="sd">"""Initialize the MCP Server instance."""</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="s2">"complete-mcp-server"</span><span class="p">)</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">data_store</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Simple in-memory data storage</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Server instance created successfully!"</span><span class="p">)</span>
</span></code></pre></div> <h3 id="code-break-down">Code break down:<a class="headerlink" href="#code-break-down" title="Permanent link">Â¶</a></h3> <ul> <li><code>Server("complete-mcp-server")</code> creates the MCP server with a name</li> <li><code>self.data_store = {}</code> creates an empty dictionary for storing data</li> <li>This object will be used throughout all other methods</li> </ul> <hr/> <h2 id="skeleton-04-register-tools">Skeleton 04: Register Tools<a class="headerlink" href="#skeleton-04-register-tools" title="Permanent link">Â¶</a></h2> <h3 id="methodregister_tools">Method<code>register_tools</code><a class="headerlink" href="#methodregister_tools" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="n">Registers</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">MCP</span><span class="w"> </span><span class="n">server</span>
<span class="o">-</span><span class="w"> </span><span class="n">Defines</span><span class="w"> </span><span class="k">tool</span><span class="w"> </span><span class="n">schemas</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">parameters</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="n">Makes</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">discoverable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">clients</span>
<span class="o">-</span><span class="w"> </span><span class="n">Enables</span><span class="w"> </span><span class="n">clients</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">ready</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">use</span><span class="w"> </span><span class="n">prompts</span>
<span class="o">-</span><span class="w"> </span><span class="n">Connects</span><span class="w"> </span><span class="n">prompt</span><span class="w"> </span><span class="n">templates</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">content</span>
</code></pre></div> <ul> <li>Sets up the tool execution infrastructure</li> </ul> <p><strong>Why This Runs Second:</strong></p> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="n">After</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">initialization</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">available</span>
<span class="o">-</span><span class="w"> </span><span class="n">Defines</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">behavior</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">prompt</span>
<span class="o">-</span><span class="w"> </span><span class="n">Handlers</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">prompts</span><span class="w"> </span><span class="n">functional</span>
</code></pre></div> <ul> <li>Tools must be registered before they can be called</li> <li>Defines the capabilities clients can invoke</li> </ul> <p><strong>What is a Tool?</strong></p> <ul> <li>A tool is an executable function that clients can invoke.</li> <li>Think of it like an API endpoint that performs an action.</li> <li>Tools have names, descriptions, and input parameters.</li> <li>Clients can discover and call these tools to perform operations.</li> <li>Examples: calculator, data storage, text processing</li> <li>Tools are central to MCPâ€™s functionality.</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">register_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="sd">"""Register all available tools with the MCP server."""</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>    <span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">list_tools</span><span class="p">()</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_tools</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Tool</span><span class="p">]:</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="sd">        Return the list of available tools.</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="sd">        This is called when clients want to discover what tools are available.</span>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="sd">        """</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>            <span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"calculate"</span><span class="p">,</span>
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Perform mathematical operations (add, subtract, multiply, divide)"</span><span class="p">,</span>
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a>                <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a>                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a>                    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-17"><a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a>                        <span class="s2">"operation"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-18"><a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a>                            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-19"><a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a>                            <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"add"</span><span class="p">,</span> <span class="s2">"subtract"</span><span class="p">,</span> <span class="s2">"multiply"</span><span class="p">,</span> <span class="s2">"divide"</span><span class="p">],</span>
</span><span id="__span-5-20"><a href="#__codelineno-5-20" id="__codelineno-5-20" name="__codelineno-5-20"></a>                            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The operation to perform"</span>
</span><span id="__span-5-21"><a href="#__codelineno-5-21" id="__codelineno-5-21" name="__codelineno-5-21"></a>                        <span class="p">},</span>
</span><span id="__span-5-22"><a href="#__codelineno-5-22" id="__codelineno-5-22" name="__codelineno-5-22"></a>                        <span class="s2">"a"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-23"><a href="#__codelineno-5-23" id="__codelineno-5-23" name="__codelineno-5-23"></a>                            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
</span><span id="__span-5-24"><a href="#__codelineno-5-24" id="__codelineno-5-24" name="__codelineno-5-24"></a>                            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"First number"</span>
</span><span id="__span-5-25"><a href="#__codelineno-5-25" id="__codelineno-5-25" name="__codelineno-5-25"></a>                        <span class="p">},</span>
</span><span id="__span-5-26"><a href="#__codelineno-5-26" id="__codelineno-5-26" name="__codelineno-5-26"></a>                        <span class="s2">"b"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-27"><a href="#__codelineno-5-27" id="__codelineno-5-27" name="__codelineno-5-27"></a>                            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
</span><span id="__span-5-28"><a href="#__codelineno-5-28" id="__codelineno-5-28" name="__codelineno-5-28"></a>                            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Second number"</span>
</span><span id="__span-5-29"><a href="#__codelineno-5-29" id="__codelineno-5-29" name="__codelineno-5-29"></a>                        <span class="p">}</span>
</span><span id="__span-5-30"><a href="#__codelineno-5-30" id="__codelineno-5-30" name="__codelineno-5-30"></a>                    <span class="p">},</span>
</span><span id="__span-5-31"><a href="#__codelineno-5-31" id="__codelineno-5-31" name="__codelineno-5-31"></a>                    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"operation"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">]</span>
</span><span id="__span-5-32"><a href="#__codelineno-5-32" id="__codelineno-5-32" name="__codelineno-5-32"></a>                <span class="p">}</span>
</span><span id="__span-5-33"><a href="#__codelineno-5-33" id="__codelineno-5-33" name="__codelineno-5-33"></a>            <span class="p">),</span>
</span><span id="__span-5-34"><a href="#__codelineno-5-34" id="__codelineno-5-34" name="__codelineno-5-34"></a>            <span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-5-35"><a href="#__codelineno-5-35" id="__codelineno-5-35" name="__codelineno-5-35"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"store_data"</span><span class="p">,</span>
</span><span id="__span-5-36"><a href="#__codelineno-5-36" id="__codelineno-5-36" name="__codelineno-5-36"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Store a key-value pair in the server's data store"</span><span class="p">,</span>
</span><span id="__span-5-37"><a href="#__codelineno-5-37" id="__codelineno-5-37" name="__codelineno-5-37"></a>                <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-5-38"><a href="#__codelineno-5-38" id="__codelineno-5-38" name="__codelineno-5-38"></a>                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-5-39"><a href="#__codelineno-5-39" id="__codelineno-5-39" name="__codelineno-5-39"></a>                    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-40"><a href="#__codelineno-5-40" id="__codelineno-5-40" name="__codelineno-5-40"></a>                        <span class="s2">"key"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-41"><a href="#__codelineno-5-41" id="__codelineno-5-41" name="__codelineno-5-41"></a>                            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-42"><a href="#__codelineno-5-42" id="__codelineno-5-42" name="__codelineno-5-42"></a>                            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The key to store"</span>
</span><span id="__span-5-43"><a href="#__codelineno-5-43" id="__codelineno-5-43" name="__codelineno-5-43"></a>                        <span class="p">},</span>
</span><span id="__span-5-44"><a href="#__codelineno-5-44" id="__codelineno-5-44" name="__codelineno-5-44"></a>                        <span class="s2">"value"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-45"><a href="#__codelineno-5-45" id="__codelineno-5-45" name="__codelineno-5-45"></a>                            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-46"><a href="#__codelineno-5-46" id="__codelineno-5-46" name="__codelineno-5-46"></a>                            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The value to store"</span>
</span><span id="__span-5-47"><a href="#__codelineno-5-47" id="__codelineno-5-47" name="__codelineno-5-47"></a>                        <span class="p">}</span>
</span><span id="__span-5-48"><a href="#__codelineno-5-48" id="__codelineno-5-48" name="__codelineno-5-48"></a>                    <span class="p">},</span>
</span><span id="__span-5-49"><a href="#__codelineno-5-49" id="__codelineno-5-49" name="__codelineno-5-49"></a>                    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"key"</span><span class="p">,</span> <span class="s2">"value"</span><span class="p">]</span>
</span><span id="__span-5-50"><a href="#__codelineno-5-50" id="__codelineno-5-50" name="__codelineno-5-50"></a>                <span class="p">}</span>
</span><span id="__span-5-51"><a href="#__codelineno-5-51" id="__codelineno-5-51" name="__codelineno-5-51"></a>            <span class="p">),</span>
</span><span id="__span-5-52"><a href="#__codelineno-5-52" id="__codelineno-5-52" name="__codelineno-5-52"></a>            <span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-5-53"><a href="#__codelineno-5-53" id="__codelineno-5-53" name="__codelineno-5-53"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"retrieve_data"</span><span class="p">,</span>
</span><span id="__span-5-54"><a href="#__codelineno-5-54" id="__codelineno-5-54" name="__codelineno-5-54"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Retrieve a value from the server's data store"</span><span class="p">,</span>
</span><span id="__span-5-55"><a href="#__codelineno-5-55" id="__codelineno-5-55" name="__codelineno-5-55"></a>                <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-5-56"><a href="#__codelineno-5-56" id="__codelineno-5-56" name="__codelineno-5-56"></a>                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-5-57"><a href="#__codelineno-5-57" id="__codelineno-5-57" name="__codelineno-5-57"></a>                    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-58"><a href="#__codelineno-5-58" id="__codelineno-5-58" name="__codelineno-5-58"></a>                        <span class="s2">"key"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-59"><a href="#__codelineno-5-59" id="__codelineno-5-59" name="__codelineno-5-59"></a>                            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-60"><a href="#__codelineno-5-60" id="__codelineno-5-60" name="__codelineno-5-60"></a>                            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The key to retrieve"</span>
</span><span id="__span-5-61"><a href="#__codelineno-5-61" id="__codelineno-5-61" name="__codelineno-5-61"></a>                        <span class="p">}</span>
</span><span id="__span-5-62"><a href="#__codelineno-5-62" id="__codelineno-5-62" name="__codelineno-5-62"></a>                    <span class="p">},</span>
</span><span id="__span-5-63"><a href="#__codelineno-5-63" id="__codelineno-5-63" name="__codelineno-5-63"></a>                    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"key"</span><span class="p">]</span>
</span><span id="__span-5-64"><a href="#__codelineno-5-64" id="__codelineno-5-64" name="__codelineno-5-64"></a>                <span class="p">}</span>
</span><span id="__span-5-65"><a href="#__codelineno-5-65" id="__codelineno-5-65" name="__codelineno-5-65"></a>            <span class="p">),</span>
</span><span id="__span-5-66"><a href="#__codelineno-5-66" id="__codelineno-5-66" name="__codelineno-5-66"></a>            <span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-5-67"><a href="#__codelineno-5-67" id="__codelineno-5-67" name="__codelineno-5-67"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"echo"</span><span class="p">,</span>
</span><span id="__span-5-68"><a href="#__codelineno-5-68" id="__codelineno-5-68" name="__codelineno-5-68"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Echo back the input text"</span><span class="p">,</span>
</span><span id="__span-5-69"><a href="#__codelineno-5-69" id="__codelineno-5-69" name="__codelineno-5-69"></a>                <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-5-70"><a href="#__codelineno-5-70" id="__codelineno-5-70" name="__codelineno-5-70"></a>                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-5-71"><a href="#__codelineno-5-71" id="__codelineno-5-71" name="__codelineno-5-71"></a>                    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-72"><a href="#__codelineno-5-72" id="__codelineno-5-72" name="__codelineno-5-72"></a>                        <span class="s2">"text"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-73"><a href="#__codelineno-5-73" id="__codelineno-5-73" name="__codelineno-5-73"></a>                            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-5-74"><a href="#__codelineno-5-74" id="__codelineno-5-74" name="__codelineno-5-74"></a>                            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Text to echo back"</span>
</span><span id="__span-5-75"><a href="#__codelineno-5-75" id="__codelineno-5-75" name="__codelineno-5-75"></a>                        <span class="p">}</span>
</span><span id="__span-5-76"><a href="#__codelineno-5-76" id="__codelineno-5-76" name="__codelineno-5-76"></a>                    <span class="p">},</span>
</span><span id="__span-5-77"><a href="#__codelineno-5-77" id="__codelineno-5-77" name="__codelineno-5-77"></a>                    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"text"</span><span class="p">]</span>
</span><span id="__span-5-78"><a href="#__codelineno-5-78" id="__codelineno-5-78" name="__codelineno-5-78"></a>                <span class="p">}</span>
</span><span id="__span-5-79"><a href="#__codelineno-5-79" id="__codelineno-5-79" name="__codelineno-5-79"></a>            <span class="p">)</span>
</span><span id="__span-5-80"><a href="#__codelineno-5-80" id="__codelineno-5-80" name="__codelineno-5-80"></a>        <span class="p">]</span>
</span><span id="__span-5-81"><a href="#__codelineno-5-81" id="__codelineno-5-81" name="__codelineno-5-81"></a>
</span><span id="__span-5-82"><a href="#__codelineno-5-82" id="__codelineno-5-82" name="__codelineno-5-82"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Tools registered: calculate, store_data, retrieve_data, echo"</span><span class="p">)</span>
</span></code></pre></div> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>The <code>@self.server.list_tools()</code> decorator registers a handler for tool listing</li> <li>Each <code>Tool</code> object defines the toolâ€™s name, description, and input schema</li> <li>The <code>inputSchema</code> uses JSON Schema format to validate inputs</li> <li>When a client calls <code>list_tools()</code>, they get this list</li> <li>This makes the tools discoverable and usable by clients</li> </ul> <h3 id="hands-on-exercise">Hands-On Exercise:<a class="headerlink" href="#hands-on-exercise" title="Permanent link">Â¶</a></h3> <ul> <li>Add a new tool called <code>greeting</code> that takes a string input <code>name</code> and returns a greeting message.</li> <li>Define its name, description, and input schema similar to the other tools.</li> <li>Test it later when we implement tool handlers.</li> <li>Hint: Use the existing tools as a reference for structure.</li> <li>After adding, your <code>list_tools</code> method should include the new <code>greeting</code> tool.</li> <li>This exercise helps you understand how to define and register new tools in the MCP server.</li> <li>Try to implement it on your own before looking at the solution below!</li> </ul> <details> <summary>Solution for Greeting Tool</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"greeting"</span><span class="p">,</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">"Return a greeting message for the given name"</span><span class="p">,</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>            <span class="s2">"name"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The name to greet"</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>            <span class="p">}</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>        <span class="p">},</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>        <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"name"</span><span class="p">]</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>    <span class="p">}</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="p">)</span>
</span></code></pre></div> </details> <hr/> <h2 id="skeleton-05-tools-handlers">Skeleton 05: Tool(s) Handlers<a class="headerlink" href="#skeleton-05-tools-handlers" title="Permanent link">Â¶</a></h2> <h3 id="methodregister_tool_handlers">Method<code>register_tool_handlers</code><a class="headerlink" href="#methodregister_tool_handlers" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="n">Implements</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">logic</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="k">tool</span>
<span class="o">-</span><span class="w"> </span><span class="n">Handles</span><span class="w"> </span><span class="k">tool</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">requests</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">clients</span>
<span class="o">-</span><span class="w"> </span><span class="n">Processes</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">parameters</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">results</span>
<span class="o">-</span><span class="w"> </span><span class="n">Enables</span><span class="w"> </span><span class="n">clients</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">ready</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">use</span><span class="w"> </span><span class="n">prompts</span>
<span class="o">-</span><span class="w"> </span><span class="n">Connects</span><span class="w"> </span><span class="n">prompt</span><span class="w"> </span><span class="n">templates</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">content</span>
</code></pre></div> <ul> <li>Provides error handling for tool execution</li> <li>Enables dynamic tool functionality</li> </ul> <p><strong>Why This Runs Third:</strong></p> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="n">After</span><span class="w"> </span><span class="n">tools</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">registered</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">what</span><span class="w"> </span><span class="n">happens</span><span class="w"> </span><span class="n">when</span>
<span class="o">-</span><span class="w"> </span><span class="n">Defines</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">behavior</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">prompt</span>
<span class="o">-</span><span class="w"> </span><span class="n">Handlers</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">prompts</span><span class="w"> </span><span class="n">functional</span>
<span class="n">each</span><span class="w"> </span><span class="k">tool</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">called</span>
</code></pre></div> <ul> <li><strong>Without handlers, tools are just definitions with no action</strong></li> <li>Tools need implementation before they can be executed</li> <li>Connects tool schemas to actual functionality</li> <li>Defines the behavior of each tool</li> <li>Handlers make tools operational</li> <li>Clients rely on these handlers to perform tasks</li> <li>This is where the serverâ€™s capabilities come to life</li> <li>Handlers are essential for a functional MCP server</li> <li>They bridge the gap between tool definition and execution</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">register_tool_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">    </span><span class="sd">"""Implement the actual logic for each tool."""</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>    <span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">call_tool</span><span class="p">()</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">call_tool</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TextContent</span><span class="p">]:</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="sd">        Handle tool execution requests.</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="sd">        This is called when a client wants to execute a tool.</span>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="sd">        """</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"calculate"</span><span class="p">:</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>            <span class="n">operation</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"operation"</span><span class="p">)</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a>            <span class="n">a</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)</span>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a>            <span class="n">b</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"b"</span><span class="p">)</span>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a>            <span class="k">if</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"add"</span><span class="p">:</span>
</span><span id="__span-7-16"><a href="#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</span><span id="__span-7-17"><a href="#__codelineno-7-17" id="__codelineno-7-17" name="__codelineno-7-17"></a>            <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"subtract"</span><span class="p">:</span>
</span><span id="__span-7-18"><a href="#__codelineno-7-18" id="__codelineno-7-18" name="__codelineno-7-18"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
</span><span id="__span-7-19"><a href="#__codelineno-7-19" id="__codelineno-7-19" name="__codelineno-7-19"></a>            <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"multiply"</span><span class="p">:</span>
</span><span id="__span-7-20"><a href="#__codelineno-7-20" id="__codelineno-7-20" name="__codelineno-7-20"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
</span><span id="__span-7-21"><a href="#__codelineno-7-21" id="__codelineno-7-21" name="__codelineno-7-21"></a>            <span class="k">elif</span> <span class="n">operation</span> <span class="o">==</span> <span class="s2">"divide"</span><span class="p">:</span>
</span><span id="__span-7-22"><a href="#__codelineno-7-22" id="__codelineno-7-22" name="__codelineno-7-22"></a>                <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-7-23"><a href="#__codelineno-7-23" id="__codelineno-7-23" name="__codelineno-7-23"></a>                    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-24"><a href="#__codelineno-7-24" id="__codelineno-7-24" name="__codelineno-7-24"></a>                        <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-25"><a href="#__codelineno-7-25" id="__codelineno-7-25" name="__codelineno-7-25"></a>                        <span class="n">text</span><span class="o">=</span><span class="s2">"Error: Cannot divide by zero"</span>
</span><span id="__span-7-26"><a href="#__codelineno-7-26" id="__codelineno-7-26" name="__codelineno-7-26"></a>                    <span class="p">)]</span>
</span><span id="__span-7-27"><a href="#__codelineno-7-27" id="__codelineno-7-27" name="__codelineno-7-27"></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
</span><span id="__span-7-28"><a href="#__codelineno-7-28" id="__codelineno-7-28" name="__codelineno-7-28"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-7-29"><a href="#__codelineno-7-29" id="__codelineno-7-29" name="__codelineno-7-29"></a>                <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-30"><a href="#__codelineno-7-30" id="__codelineno-7-30" name="__codelineno-7-30"></a>                    <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-31"><a href="#__codelineno-7-31" id="__codelineno-7-31" name="__codelineno-7-31"></a>                    <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error: Unknown operation '</span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">'"</span>
</span><span id="__span-7-32"><a href="#__codelineno-7-32" id="__codelineno-7-32" name="__codelineno-7-32"></a>                <span class="p">)]</span>
</span><span id="__span-7-33"><a href="#__codelineno-7-33" id="__codelineno-7-33" name="__codelineno-7-33"></a>
</span><span id="__span-7-34"><a href="#__codelineno-7-34" id="__codelineno-7-34" name="__codelineno-7-34"></a>            <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-35"><a href="#__codelineno-7-35" id="__codelineno-7-35" name="__codelineno-7-35"></a>                <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-36"><a href="#__codelineno-7-36" id="__codelineno-7-36" name="__codelineno-7-36"></a>                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Result: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-7-37"><a href="#__codelineno-7-37" id="__codelineno-7-37" name="__codelineno-7-37"></a>            <span class="p">)]</span>
</span><span id="__span-7-38"><a href="#__codelineno-7-38" id="__codelineno-7-38" name="__codelineno-7-38"></a>
</span><span id="__span-7-39"><a href="#__codelineno-7-39" id="__codelineno-7-39" name="__codelineno-7-39"></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"store_data"</span><span class="p">:</span>
</span><span id="__span-7-40"><a href="#__codelineno-7-40" id="__codelineno-7-40" name="__codelineno-7-40"></a>            <span class="n">key</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"key"</span><span class="p">)</span>
</span><span id="__span-7-41"><a href="#__codelineno-7-41" id="__codelineno-7-41" name="__codelineno-7-41"></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"value"</span><span class="p">)</span>
</span><span id="__span-7-42"><a href="#__codelineno-7-42" id="__codelineno-7-42" name="__codelineno-7-42"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">data_store</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="__span-7-43"><a href="#__codelineno-7-43" id="__codelineno-7-43" name="__codelineno-7-43"></a>            <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-44"><a href="#__codelineno-7-44" id="__codelineno-7-44" name="__codelineno-7-44"></a>                <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-45"><a href="#__codelineno-7-45" id="__codelineno-7-45" name="__codelineno-7-45"></a>                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Stored: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-7-46"><a href="#__codelineno-7-46" id="__codelineno-7-46" name="__codelineno-7-46"></a>            <span class="p">)]</span>
</span><span id="__span-7-47"><a href="#__codelineno-7-47" id="__codelineno-7-47" name="__codelineno-7-47"></a>
</span><span id="__span-7-48"><a href="#__codelineno-7-48" id="__codelineno-7-48" name="__codelineno-7-48"></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"retrieve_data"</span><span class="p">:</span>
</span><span id="__span-7-49"><a href="#__codelineno-7-49" id="__codelineno-7-49" name="__codelineno-7-49"></a>            <span class="n">key</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"key"</span><span class="p">)</span>
</span><span id="__span-7-50"><a href="#__codelineno-7-50" id="__codelineno-7-50" name="__codelineno-7-50"></a>            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="__span-7-51"><a href="#__codelineno-7-51" id="__codelineno-7-51" name="__codelineno-7-51"></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-7-52"><a href="#__codelineno-7-52" id="__codelineno-7-52" name="__codelineno-7-52"></a>                <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-53"><a href="#__codelineno-7-53" id="__codelineno-7-53" name="__codelineno-7-53"></a>                    <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-54"><a href="#__codelineno-7-54" id="__codelineno-7-54" name="__codelineno-7-54"></a>                    <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error: Key '</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">' not found"</span>
</span><span id="__span-7-55"><a href="#__codelineno-7-55" id="__codelineno-7-55" name="__codelineno-7-55"></a>                <span class="p">)]</span>
</span><span id="__span-7-56"><a href="#__codelineno-7-56" id="__codelineno-7-56" name="__codelineno-7-56"></a>            <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-57"><a href="#__codelineno-7-57" id="__codelineno-7-57" name="__codelineno-7-57"></a>                <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-58"><a href="#__codelineno-7-58" id="__codelineno-7-58" name="__codelineno-7-58"></a>                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Retrieved: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-7-59"><a href="#__codelineno-7-59" id="__codelineno-7-59" name="__codelineno-7-59"></a>            <span class="p">)]</span>
</span><span id="__span-7-60"><a href="#__codelineno-7-60" id="__codelineno-7-60" name="__codelineno-7-60"></a>
</span><span id="__span-7-61"><a href="#__codelineno-7-61" id="__codelineno-7-61" name="__codelineno-7-61"></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"echo"</span><span class="p">:</span>
</span><span id="__span-7-62"><a href="#__codelineno-7-62" id="__codelineno-7-62" name="__codelineno-7-62"></a>            <span class="n">text</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"text"</span><span class="p">)</span>
</span><span id="__span-7-63"><a href="#__codelineno-7-63" id="__codelineno-7-63" name="__codelineno-7-63"></a>            <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-64"><a href="#__codelineno-7-64" id="__codelineno-7-64" name="__codelineno-7-64"></a>                <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-65"><a href="#__codelineno-7-65" id="__codelineno-7-65" name="__codelineno-7-65"></a>                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Echo: </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-7-66"><a href="#__codelineno-7-66" id="__codelineno-7-66" name="__codelineno-7-66"></a>            <span class="p">)]</span>
</span><span id="__span-7-67"><a href="#__codelineno-7-67" id="__codelineno-7-67" name="__codelineno-7-67"></a>
</span><span id="__span-7-68"><a href="#__codelineno-7-68" id="__codelineno-7-68" name="__codelineno-7-68"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-7-69"><a href="#__codelineno-7-69" id="__codelineno-7-69" name="__codelineno-7-69"></a>            <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-7-70"><a href="#__codelineno-7-70" id="__codelineno-7-70" name="__codelineno-7-70"></a>                <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-7-71"><a href="#__codelineno-7-71" id="__codelineno-7-71" name="__codelineno-7-71"></a>                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error: Unknown tool '</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">'"</span>
</span><span id="__span-7-72"><a href="#__codelineno-7-72" id="__codelineno-7-72" name="__codelineno-7-72"></a>            <span class="p">)]</span>
</span><span id="__span-7-73"><a href="#__codelineno-7-73" id="__codelineno-7-73" name="__codelineno-7-73"></a>
</span><span id="__span-7-74"><a href="#__codelineno-7-74" id="__codelineno-7-74" name="__codelineno-7-74"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Tool handlers implemented"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>The <code>@self.server.call_tool()</code> decorator registers the execution handler</li> <li>Each toolâ€™s logic is in an <code>if/elif</code> block</li> <li>Results are wrapped in <code>TextContent</code> objects</li> <li>Error handling is included for edge cases (like division by zero)</li> <li>When a client calls a tool, this handler processes the request and returns the output</li> <li>This makes the tools functional and usable by clients</li> </ul> <hr/> <h3 id="hands-on-exercise_1">Hands-On Exercise:<a class="headerlink" href="#hands-on-exercise_1" title="Permanent link">Â¶</a></h3> <ul> <li>Implement the handler logic for the <code>greeting</code> tool you added earlier.</li> <li>The tool should take the <code>name</code> parameter and return a greeting message like â€œHello, {name}!â€.</li> <li>Test it later when we run the server.</li> <li>Hint: Follow the structure of the other tool handlers.</li> <li>After adding, your <code>call_tool</code> method should include the new <code>greeting</code> tool logic.</li> <li>This exercise helps you understand how to implement tool functionality in the MCP server.</li> <li>Try to implement it on your own before looking at the solution below!</li> </ul> <details> <summary>Solution for Greeting Tool Handler</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"greeting"</span><span class="p">:</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a>        <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!"</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a>    <span class="p">)]</span>
</span></code></pre></div> </details> <hr/> <h2 id="skeleton-06-register-resources">Skeleton 06: Register Resources<a class="headerlink" href="#skeleton-06-register-resources" title="Permanent link">Â¶</a></h2> <h3 id="methodregister_resources">Method<code>register_resources</code><a class="headerlink" href="#methodregister_resources" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <div class="codehilite"><pre><span></span><code>- Registers resources that clients can access
- Defines resource URIs and metadata
- Makes static and dynamic content available
- Enables clients to get ready-to-use prompts
- Connects prompt templates to actual content
</code></pre></div> <ul> <li>Enables resource discovery and retrieval</li> <li>Provides additional data for clients</li> <li>Supports richer interactions with the server</li> <li>Expands server capabilities beyond tools</li> <li> <p>Facilitates data sharing and information access</p> </li> <li> <p>Defines the behavior of each prompt</p> </li> <li>Handlers make prompts functional</li> </ul> <p><strong>Why This Runs Fourth:</strong> - After tools are set up, we add resources which provide additional data - Resources are complementary to tools - Provides data that tools might reference</p> <p><strong>What is a Resource?</strong></p> <ul> <li>A resource is readable data or content.</li> <li>Think of it like a file or endpoint you can read from (but not execute).</li> <li>Resources have URIs (like URLs) and metadata (name, description, MIME type).</li> <li>Clients can discover and read these resources.</li> <li>Examples: server info, data store contents, welcome message</li> <li>Resources enhance the serverâ€™s functionality by providing static or dynamic data.</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">register_resources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="sd">"""Register resources that clients can access."""</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>    <span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">list_resources</span><span class="p">()</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_resources</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Resource</span><span class="p">]:</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="sd">        Return the list of available resources.</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="sd">        This is called when clients want to discover what resources are available.</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="sd">        """</span>
</span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a>            <span class="n">Resource</span><span class="p">(</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>                <span class="n">uri</span><span class="o">=</span><span class="s2">"resource://server-info"</span><span class="p">,</span>
</span><span id="__span-9-13"><a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"Server Information"</span><span class="p">,</span>
</span><span id="__span-9-14"><a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Information about this MCP server"</span><span class="p">,</span>
</span><span id="__span-9-15"><a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a>                <span class="n">mimeType</span><span class="o">=</span><span class="s2">"application/json"</span>
</span><span id="__span-9-16"><a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a>            <span class="p">),</span>
</span><span id="__span-9-17"><a href="#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a>            <span class="n">Resource</span><span class="p">(</span>
</span><span id="__span-9-18"><a href="#__codelineno-9-18" id="__codelineno-9-18" name="__codelineno-9-18"></a>                <span class="n">uri</span><span class="o">=</span><span class="s2">"resource://data-store"</span><span class="p">,</span>
</span><span id="__span-9-19"><a href="#__codelineno-9-19" id="__codelineno-9-19" name="__codelineno-9-19"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"Data Store"</span><span class="p">,</span>
</span><span id="__span-9-20"><a href="#__codelineno-9-20" id="__codelineno-9-20" name="__codelineno-9-20"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Current contents of the data store"</span><span class="p">,</span>
</span><span id="__span-9-21"><a href="#__codelineno-9-21" id="__codelineno-9-21" name="__codelineno-9-21"></a>                <span class="n">mimeType</span><span class="o">=</span><span class="s2">"application/json"</span>
</span><span id="__span-9-22"><a href="#__codelineno-9-22" id="__codelineno-9-22" name="__codelineno-9-22"></a>            <span class="p">),</span>
</span><span id="__span-9-23"><a href="#__codelineno-9-23" id="__codelineno-9-23" name="__codelineno-9-23"></a>            <span class="n">Resource</span><span class="p">(</span>
</span><span id="__span-9-24"><a href="#__codelineno-9-24" id="__codelineno-9-24" name="__codelineno-9-24"></a>                <span class="n">uri</span><span class="o">=</span><span class="s2">"resource://welcome"</span><span class="p">,</span>
</span><span id="__span-9-25"><a href="#__codelineno-9-25" id="__codelineno-9-25" name="__codelineno-9-25"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"Welcome Message"</span><span class="p">,</span>
</span><span id="__span-9-26"><a href="#__codelineno-9-26" id="__codelineno-9-26" name="__codelineno-9-26"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Welcome message and server capabilities"</span><span class="p">,</span>
</span><span id="__span-9-27"><a href="#__codelineno-9-27" id="__codelineno-9-27" name="__codelineno-9-27"></a>                <span class="n">mimeType</span><span class="o">=</span><span class="s2">"text/plain"</span>
</span><span id="__span-9-28"><a href="#__codelineno-9-28" id="__codelineno-9-28" name="__codelineno-9-28"></a>            <span class="p">)</span>
</span><span id="__span-9-29"><a href="#__codelineno-9-29" id="__codelineno-9-29" name="__codelineno-9-29"></a>        <span class="p">]</span>
</span><span id="__span-9-30"><a href="#__codelineno-9-30" id="__codelineno-9-30" name="__codelineno-9-30"></a>
</span><span id="__span-9-31"><a href="#__codelineno-9-31" id="__codelineno-9-31" name="__codelineno-9-31"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Resources registered: server-info, data-store, welcome"</span><span class="p">)</span>
</span></code></pre></div> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>The <code>@self.server.list_resources()</code> decorator registers the resource listing handler</li> <li>Each <code>Resource</code> defines a URI (like a URL), name, description, and MIME type</li> <li>URIs use the <code>resource://</code> scheme to identify resources</li> <li>When a client calls <code>list_resources()</code>, they get this list</li> <li>This makes the resources discoverable and accessible by clients</li> <li>Resources provide additional data that clients can read</li> <li>Enhances the serverâ€™s capabilities beyond just tools</li> </ul> <hr/> <h3 id="hands-on-exercise_2">Hands-On Exercise:<a class="headerlink" href="#hands-on-exercise_2" title="Permanent link">Â¶</a></h3> <ul> <li>Add a new resource called <code>server-author</code> that return your name as the author of the server.</li> <li>Define its URI, name, description, and MIME type similar to the other resources.</li> <li>Test it later when we implement resource handlers.</li> <li>Hint: Use the existing resources as a reference for structure.</li> <li>After adding, your <code>list_resources</code> method should include the new <code>server-author</code> resource.</li> <li>This exercise helps you understand how to define and register new resources in the MCP server.</li> <li>Try to implement it on your own before looking at the solution below!</li> </ul> <details> <summary>Solution for Server Stats Resource</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">Resource</span><span class="p">(</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>    <span class="n">uri</span><span class="o">=</span><span class="s2">"resource://server-author"</span><span class="p">,</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"Server Author"</span><span class="p">,</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">"Author of the MCP server"</span><span class="p">,</span>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>    <span class="n">mimeType</span><span class="o">=</span><span class="s2">"text/plain"</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="p">)</span>
</span></code></pre></div> </details> <hr/> <h2 id="skeleton-07-resource-handlers">Skeleton 07: Resource Handlers<a class="headerlink" href="#skeleton-07-resource-handlers" title="Permanent link">Â¶</a></h2> <h3 id="methodregister_resource_handlers">Method<code>register_resource_handlers</code><a class="headerlink" href="#methodregister_resource_handlers" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <div class="codehilite"><pre><span></span><code><span class="o">-</span><span class="w"> </span><span class="nv">Implements</span><span class="w"> </span><span class="nv">resource</span><span class="w"> </span><span class="nv">retrieval</span><span class="w"> </span><span class="nv">logic</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Returns</span><span class="w"> </span><span class="nv">actual</span><span class="w"> </span><span class="nv">content</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">resource</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Handles</span><span class="w"> </span><span class="nv">dynamic</span><span class="w"> </span><span class="nv">resource</span><span class="w"> </span><span class="nv">generation</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Enables</span><span class="w"> </span><span class="nv">clients</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">get</span><span class="w"> </span><span class="nv">ready</span><span class="o">-</span><span class="nv">to</span><span class="o">-</span><span class="nv">use</span><span class="w"> </span><span class="nv">prompts</span>
<span class="o">-</span><span class="w"> </span><span class="nv">Connects</span><span class="w"> </span><span class="nv">prompt</span><span class="w"> </span><span class="nv">templates</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">actual</span><span class="w"> </span><span class="nv">content</span>
</code></pre></div> <ul> <li>Provides resource access control</li> <li>Enables clients to read server data</li> <li>Supports various content types (JSON, text)</li> <li>Facilitates data sharing with clients</li> <li>Connects resource definitions to actual data</li> <li>Enhances server usability and information access</li> <li>Defines the behavior of each prompt</li> <li>Handlers make prompts functional</li> </ul> <p><strong>Why This Runs Fifth:</strong></p> <ul> <li>After resources are registered, we need to implement what content is returned</li> <li>Resources need implementation to return actual data</li> <li>Connects resource URIs to actual content</li> <li>Defines the behavior of each resource</li> <li>Handlers make resources accessible</li> <li>Clients rely on these handlers to read data</li> <li>This is where resource definitions become functional</li> <li>Handlers are essential for a usable MCP server</li> <li>They bridge the gap between resource definition and content delivery</li> <li>Without handlers, resources are just placeholders with no data</li> <li>Handlers bring resources to life</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">register_resource_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">    </span><span class="sd">"""Implement resource retrieval logic."""</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>    <span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">read_resource</span><span class="p">()</span>
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">read_resource</span><span class="p">(</span><span class="n">uri</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="sd">        Handle resource read requests.</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="sd">        This is called when a client wants to read a resource.</span>
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="sd">        """</span>
</span><span id="__span-11-10"><a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a>        <span class="c1"># Extract the URI string from the AnyUrl object</span>
</span><span id="__span-11-11"><a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a>        <span class="n">uri_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
</span><span id="__span-11-12"><a href="#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a>
</span><span id="__span-11-13"><a href="#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a>        <span class="k">if</span> <span class="n">uri_str</span> <span class="o">==</span> <span class="s2">"resource://server-info"</span><span class="p">:</span>
</span><span id="__span-11-14"><a href="#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a>            <span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-11-15"><a href="#__codelineno-11-15" id="__codelineno-11-15" name="__codelineno-11-15"></a>                <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"complete-mcp-server"</span><span class="p">,</span>
</span><span id="__span-11-16"><a href="#__codelineno-11-16" id="__codelineno-11-16" name="__codelineno-11-16"></a>                <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"1.0.0"</span><span class="p">,</span>
</span><span id="__span-11-17"><a href="#__codelineno-11-17" id="__codelineno-11-17" name="__codelineno-11-17"></a>                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"A comprehensive MCP server implementation"</span><span class="p">,</span>
</span><span id="__span-11-18"><a href="#__codelineno-11-18" id="__codelineno-11-18" name="__codelineno-11-18"></a>                <span class="s2">"capabilities"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-11-19"><a href="#__codelineno-11-19" id="__codelineno-11-19" name="__codelineno-11-19"></a>                    <span class="s2">"tools"</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span id="__span-11-20"><a href="#__codelineno-11-20" id="__codelineno-11-20" name="__codelineno-11-20"></a>                    <span class="s2">"resources"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span id="__span-11-21"><a href="#__codelineno-11-21" id="__codelineno-11-21" name="__codelineno-11-21"></a>                    <span class="s2">"prompts"</span><span class="p">:</span> <span class="mi">2</span>
</span><span id="__span-11-22"><a href="#__codelineno-11-22" id="__codelineno-11-22" name="__codelineno-11-22"></a>                <span class="p">}</span>
</span><span id="__span-11-23"><a href="#__codelineno-11-23" id="__codelineno-11-23" name="__codelineno-11-23"></a>            <span class="p">}</span>
</span><span id="__span-11-24"><a href="#__codelineno-11-24" id="__codelineno-11-24" name="__codelineno-11-24"></a>            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-11-25"><a href="#__codelineno-11-25" id="__codelineno-11-25" name="__codelineno-11-25"></a>
</span><span id="__span-11-26"><a href="#__codelineno-11-26" id="__codelineno-11-26" name="__codelineno-11-26"></a>        <span class="k">elif</span> <span class="n">uri_str</span> <span class="o">==</span> <span class="s2">"resource://data-store"</span><span class="p">:</span>
</span><span id="__span-11-27"><a href="#__codelineno-11-27" id="__codelineno-11-27" name="__codelineno-11-27"></a>            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_store</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span id="__span-11-28"><a href="#__codelineno-11-28" id="__codelineno-11-28" name="__codelineno-11-28"></a>
</span><span id="__span-11-29"><a href="#__codelineno-11-29" id="__codelineno-11-29" name="__codelineno-11-29"></a>        <span class="k">elif</span> <span class="n">uri_str</span> <span class="o">==</span> <span class="s2">"resource://welcome"</span><span class="p">:</span>
</span><span id="__span-11-30"><a href="#__codelineno-11-30" id="__codelineno-11-30" name="__codelineno-11-30"></a>            <span class="k">return</span> <span class="s2">"""Welcome to the Complete MCP Server!</span>
</span></code></pre></div> <hr/> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>The <code>@self.server.read_resource()</code> decorator registers the read handler</li> <li>Each resource URI returns appropriate content</li> <li>JSON resources use <code>json.dumps()</code> to serialize data</li> <li>Plain text resources return strings directly</li> <li>When a client reads a resource, this handler processes the request and returns the content</li> <li>This makes the resources functional and usable by clients</li> </ul> <hr/> <h3 id="hands-on-exercise_3">Hands-On Exercise:<a class="headerlink" href="#hands-on-exercise_3" title="Permanent link">Â¶</a></h3> <ul> <li>Implement the handler logic for the <code>server-author</code> resource you added earlier.</li> <li>The resource should return your name as plain text.</li> <li>Test it later when we run the server.</li> <li>Hint: Follow the structure of the other resource handlers.</li> <li>After adding, your <code>read_resource</code> method should include the new <code>server-author</code> resource logic.</li> <li>This exercise helps you understand how to implement resource functionality in the MCP server.</li> <li>Try to implement it on your own before looking at the solution below!</li> </ul> <details> <summary>Solution for Server Author Resource Handler</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">elif</span> <span class="n">uri_str</span> <span class="o">==</span> <span class="s2">"resource://server-author"</span><span class="p">:</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>    <span class="k">return</span> <span class="s2">"Author: Your Name Here"</span>
</span></code></pre></div> </details> <hr/> <h3 id="handle-errors">Handle Errors<a class="headerlink" href="#handle-errors" title="Permanent link">Â¶</a></h3> <ul> <li>Add Error Handling for Unknown Resources</li> <li>Add this at the end of the <code>read_resource</code> method to handle unknown resources:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unknown resource: </span><span class="si">{</span><span class="n">uri_str</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <h2 id="skeleton-08-register-prompts">Skeleton 08: Register Prompts<a class="headerlink" href="#skeleton-08-register-prompts" title="Permanent link">Â¶</a></h2> <h3 id="method-register_prompts">Method <code>register_prompts</code><a class="headerlink" href="#method-register_prompts" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Registers prompt templates for clients</li> <li>Defines structured prompts with parameters</li> <li>Enables prompt discovery</li> <li>Enables clients to get ready-to-use prompts</li> <li>Connects prompt templates to actual content</li> <li>Provides reusable prompt patterns</li> <li>Facilitates advanced AI interactions</li> <li>Supports dynamic prompt generation</li> </ul> <p><strong>Why This Runs Sixth:</strong></p> <ul> <li>Defines the behavior of each prompt</li> <li>Handlers make prompts functional</li> <li>After tools and resources, prompts add higher-level interaction patterns</li> <li>Prompts build on available tools and resources</li> <li>Provides templates for AI assistants</li> </ul> <p><strong>What is a Prompt?</strong></p> <ul> <li>A prompt is a template that guides AI assistants on how to use the serverâ€™s tools and resources effectively.</li> <li>Prompts have names, descriptions, and parameters.</li> <li>Clients can discover and request prompts.</li> <li>Examples: code review prompt, data analysis prompt</li> <li>Prompts enhance the serverâ€™s capabilities by providing structured interaction patterns.</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">register_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="sd">"""Register prompt templates for clients."""</span>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>    <span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">list_prompts</span><span class="p">()</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_prompts</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Prompt</span><span class="p">]:</span>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="sd">        Return the list of available prompts.</span>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="sd">        This is called when clients want to discover what prompts are available.</span>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="sd">        """</span>
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a>        <span class="k">return</span> <span class="p">[</span>
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a>            <span class="n">Prompt</span><span class="p">(</span>
</span><span id="__span-14-12"><a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"analyze-data"</span><span class="p">,</span>
</span><span id="__span-14-13"><a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Analyze data stored in the server"</span><span class="p">,</span>
</span><span id="__span-14-14"><a href="#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a>                <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-14-15"><a href="#__codelineno-14-15" id="__codelineno-14-15" name="__codelineno-14-15"></a>                    <span class="p">{</span>
</span><span id="__span-14-16"><a href="#__codelineno-14-16" id="__codelineno-14-16" name="__codelineno-14-16"></a>                        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"key"</span><span class="p">,</span>
</span><span id="__span-14-17"><a href="#__codelineno-14-17" id="__codelineno-14-17" name="__codelineno-14-17"></a>                        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The key of the data to analyze"</span><span class="p">,</span>
</span><span id="__span-14-18"><a href="#__codelineno-14-18" id="__codelineno-14-18" name="__codelineno-14-18"></a>                        <span class="s2">"required"</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="__span-14-19"><a href="#__codelineno-14-19" id="__codelineno-14-19" name="__codelineno-14-19"></a>                    <span class="p">}</span>
</span><span id="__span-14-20"><a href="#__codelineno-14-20" id="__codelineno-14-20" name="__codelineno-14-20"></a>                <span class="p">]</span>
</span><span id="__span-14-21"><a href="#__codelineno-14-21" id="__codelineno-14-21" name="__codelineno-14-21"></a>            <span class="p">),</span>
</span><span id="__span-14-22"><a href="#__codelineno-14-22" id="__codelineno-14-22" name="__codelineno-14-22"></a>            <span class="n">Prompt</span><span class="p">(</span>
</span><span id="__span-14-23"><a href="#__codelineno-14-23" id="__codelineno-14-23" name="__codelineno-14-23"></a>                <span class="n">name</span><span class="o">=</span><span class="s2">"calculate-scenario"</span><span class="p">,</span>
</span><span id="__span-14-24"><a href="#__codelineno-14-24" id="__codelineno-14-24" name="__codelineno-14-24"></a>                <span class="n">description</span><span class="o">=</span><span class="s2">"Walk through a calculation scenario"</span><span class="p">,</span>
</span><span id="__span-14-25"><a href="#__codelineno-14-25" id="__codelineno-14-25" name="__codelineno-14-25"></a>                <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-14-26"><a href="#__codelineno-14-26" id="__codelineno-14-26" name="__codelineno-14-26"></a>                    <span class="p">{</span>
</span><span id="__span-14-27"><a href="#__codelineno-14-27" id="__codelineno-14-27" name="__codelineno-14-27"></a>                        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"operation"</span><span class="p">,</span>
</span><span id="__span-14-28"><a href="#__codelineno-14-28" id="__codelineno-14-28" name="__codelineno-14-28"></a>                        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The operation to demonstrate (add, subtract, multiply, divide)"</span><span class="p">,</span>
</span><span id="__span-14-29"><a href="#__codelineno-14-29" id="__codelineno-14-29" name="__codelineno-14-29"></a>                        <span class="s2">"required"</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="__span-14-30"><a href="#__codelineno-14-30" id="__codelineno-14-30" name="__codelineno-14-30"></a>                    <span class="p">}</span>
</span><span id="__span-14-31"><a href="#__codelineno-14-31" id="__codelineno-14-31" name="__codelineno-14-31"></a>                <span class="p">]</span>
</span><span id="__span-14-32"><a href="#__codelineno-14-32" id="__codelineno-14-32" name="__codelineno-14-32"></a>            <span class="p">)</span>
</span><span id="__span-14-33"><a href="#__codelineno-14-33" id="__codelineno-14-33" name="__codelineno-14-33"></a>        <span class="p">]</span>
</span><span id="__span-14-34"><a href="#__codelineno-14-34" id="__codelineno-14-34" name="__codelineno-14-34"></a>
</span><span id="__span-14-35"><a href="#__codelineno-14-35" id="__codelineno-14-35" name="__codelineno-14-35"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Prompts registered: analyze-data, calculate-scenario"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>The <code>@self.server.list_prompts()</code> decorator registers the prompt listing handler</li> <li>Each <code>Prompt</code> defines a name, description, and arguments</li> <li>Arguments specify what parameters the prompt template needs</li> <li>When a client calls <code>list_prompts()</code>, they get this list</li> <li>This makes the prompts discoverable and usable by clients</li> <li>Prompts provide structured templates for AI interactions</li> </ul> <hr/> <h3 id="hands-on-exercise_4">Hands-On Exercise:<a class="headerlink" href="#hands-on-exercise_4" title="Permanent link">Â¶</a></h3> <ul> <li>Add a new prompt called <code>greet-user</code> that prompts the AI to greet a user by name.</li> <li>Define its name, description, and arguments similar to the other prompts.</li> <li>Test it later when we implement prompt handlers.</li> <li>Hint: Use the existing prompts as a reference for structure.</li> <li>After adding, your <code>list_prompts</code> method should include the new <code>greet-user</code> prompt.</li> <li>This exercise helps you understand how to define and register new prompts in the MCP server.</li> <li>Try to implement it on your own before looking at the solution below!</li> </ul> <details> <summary>Solution for Greet User Prompt</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="n">Prompt</span><span class="p">(</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"greet-user"</span><span class="p">,</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">"Prompt the AI to greet a user by name"</span><span class="p">,</span>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>    <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>        <span class="p">{</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"name"</span><span class="p">,</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The name of the user to greet"</span><span class="p">,</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>            <span class="s2">"required"</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a>        <span class="p">}</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a>    <span class="p">]</span>
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="p">)</span>
</span></code></pre></div> </details> <hr/> <h2 id="skeleton-09-prompt-handlers">Skeleton 09: Prompt Handlers<a class="headerlink" href="#skeleton-09-prompt-handlers" title="Permanent link">Â¶</a></h2> <h3 id="method-register_prompt_handlers">Method: <code>register_prompt_handlers</code><a class="headerlink" href="#method-register_prompt_handlers" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Implements prompt generation logic</li> <li>Returns formatted prompts with embedded context</li> <li>Handles prompt parameters and customization</li> <li>Provides dynamic prompt content</li> <li>Enables clients to get ready-to-use prompts</li> <li>Connects prompt templates to actual content</li> </ul> <p><strong>Why This Runs Seventh:</strong></p> <ul> <li>After prompts are registered, we implement the logic that generates prompt content</li> <li>Prompts need implementation to generate actual text</li> <li>Connects prompt templates to actual content</li> <li>Defines the behavior of each prompt</li> <li>Handlers make prompts functional</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">register_prompt_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="sd">"""Implement prompt generation logic."""</span>
</span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a>
</span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a>    <span class="nd">@self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">get_prompt</span><span class="p">()</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_prompt</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TextContent</span><span class="p">]:</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">        </span><span class="sd">"""</span>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="sd">        Handle prompt generation requests.</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="sd">        This is called when a client wants to get a prompt.</span>
</span><span id="__span-16-9"><a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="sd">        """</span>
</span><span id="__span-16-10"><a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"analyze-data"</span><span class="p">:</span>
</span><span id="__span-16-11"><a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a>            <span class="n">key</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"key"</span><span class="p">,</span> <span class="s2">"unknown"</span><span class="p">)</span>
</span><span id="__span-16-12"><a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a>            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">"not found"</span><span class="p">)</span>
</span><span id="__span-16-13"><a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a>
</span><span id="__span-16-14"><a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a>            <span class="n">prompt_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"""Analyze the following data from the server:</span>
</span><span id="__span-16-15"><a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a>
</span><span id="__span-16-16"><a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="s2">Key: </span><span class="si">{</span><span class="n">key</span><span class="si">}</span>
</span><span id="__span-16-17"><a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="s2">Value: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span>
</span><span id="__span-16-18"><a href="#__codelineno-16-18" id="__codelineno-16-18" name="__codelineno-16-18"></a>
</span><span id="__span-16-19"><a href="#__codelineno-16-19" id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="s2">Please provide:</span>
</span><span id="__span-16-20"><a href="#__codelineno-16-20" id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="s2">1. A description of what this data represents</span>
</span><span id="__span-16-21"><a href="#__codelineno-16-21" id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="s2">2. Any patterns or insights you notice</span>
</span><span id="__span-16-22"><a href="#__codelineno-16-22" id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="s2">3. Suggestions for how this data could be used</span>
</span><span id="__span-16-23"><a href="#__codelineno-16-23" id="__codelineno-16-23" name="__codelineno-16-23"></a>
</span><span id="__span-16-24"><a href="#__codelineno-16-24" id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="s2">Use the retrieve_data tool if you need to fetch additional context."""</span>
</span><span id="__span-16-25"><a href="#__codelineno-16-25" id="__codelineno-16-25" name="__codelineno-16-25"></a>
</span><span id="__span-16-26"><a href="#__codelineno-16-26" id="__codelineno-16-26" name="__codelineno-16-26"></a>                <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">prompt_text</span><span class="p">)]</span>
</span><span id="__span-16-27"><a href="#__codelineno-16-27" id="__codelineno-16-27" name="__codelineno-16-27"></a>
</span><span id="__span-16-28"><a href="#__codelineno-16-28" id="__codelineno-16-28" name="__codelineno-16-28"></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"calculate-scenario"</span><span class="p">:</span>
</span><span id="__span-16-29"><a href="#__codelineno-16-29" id="__codelineno-16-29" name="__codelineno-16-29"></a>                <span class="n">operation</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"operation"</span><span class="p">,</span> <span class="s2">"add"</span><span class="p">)</span>
</span><span id="__span-16-30"><a href="#__codelineno-16-30" id="__codelineno-16-30" name="__codelineno-16-30"></a>
</span><span id="__span-16-31"><a href="#__codelineno-16-31" id="__codelineno-16-31" name="__codelineno-16-31"></a>                <span class="n">prompt_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"""Let's work through a </span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2"> calculation scenario.</span>
</span><span id="__span-16-32"><a href="#__codelineno-16-32" id="__codelineno-16-32" name="__codelineno-16-32"></a>
</span><span id="__span-16-33"><a href="#__codelineno-16-33" id="__codelineno-16-33" name="__codelineno-16-33"></a><span class="s2">Use the calculate tool with the operation '</span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">'.</span>
</span><span id="__span-16-34"><a href="#__codelineno-16-34" id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="s2">For example:</span>
</span><span id="__span-16-35"><a href="#__codelineno-16-35" id="__codelineno-16-35" name="__codelineno-16-35"></a><span class="s2">- Choose two numbers (a and b)</span>
</span><span id="__span-16-36"><a href="#__codelineno-16-36" id="__codelineno-16-36" name="__codelineno-16-36"></a><span class="s2">- Execute: calculate(operation="</span><span class="si">{</span><span class="n">operation</span><span class="si">}</span><span class="s2">", a=10, b=5)</span>
</span><span id="__span-16-37"><a href="#__codelineno-16-37" id="__codelineno-16-37" name="__codelineno-16-37"></a><span class="s2">- Explain the result</span>
</span><span id="__span-16-38"><a href="#__codelineno-16-38" id="__codelineno-16-38" name="__codelineno-16-38"></a>
</span><span id="__span-16-39"><a href="#__codelineno-16-39" id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="s2">This demonstrates how to use computational tools in the MCP server."""</span>
</span><span id="__span-16-40"><a href="#__codelineno-16-40" id="__codelineno-16-40" name="__codelineno-16-40"></a>
</span><span id="__span-16-41"><a href="#__codelineno-16-41" id="__codelineno-16-41" name="__codelineno-16-41"></a>                <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">prompt_text</span><span class="p">)]</span>
</span><span id="__span-16-42"><a href="#__codelineno-16-42" id="__codelineno-16-42" name="__codelineno-16-42"></a>
</span><span id="__span-16-43"><a href="#__codelineno-16-43" id="__codelineno-16-43" name="__codelineno-16-43"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-16-44"><a href="#__codelineno-16-44" id="__codelineno-16-44" name="__codelineno-16-44"></a>                <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span>
</span><span id="__span-16-45"><a href="#__codelineno-16-45" id="__codelineno-16-45" name="__codelineno-16-45"></a>                    <span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span>
</span><span id="__span-16-46"><a href="#__codelineno-16-46" id="__codelineno-16-46" name="__codelineno-16-46"></a>                    <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">"Error: Unknown prompt '</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">'"</span>
</span><span id="__span-16-47"><a href="#__codelineno-16-47" id="__codelineno-16-47" name="__codelineno-16-47"></a>                <span class="p">)]</span>
</span><span id="__span-16-48"><a href="#__codelineno-16-48" id="__codelineno-16-48" name="__codelineno-16-48"></a>
</span><span id="__span-16-49"><a href="#__codelineno-16-49" id="__codelineno-16-49" name="__codelineno-16-49"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Prompt handlers implemented"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>The <code>@self.server.get_prompt()</code> decorator registers the prompt generation handler</li> <li>Each prompt returns formatted text based on the parameters</li> <li>Prompts can reference tools and resources</li> <li>Dynamic content is generated based on current server state</li> </ul> <hr/> <h3 id="hands-on">Hands On:<a class="headerlink" href="#hands-on" title="Permanent link">Â¶</a></h3> <ul> <li>Implement the handler logic for the <code>greet-user</code> prompt you added earlier.</li> <li>The prompt should return a greeting message using the provided <code>name</code> parameter.</li> <li>Test it later when we run the server.</li> <li>Hint: Follow the structure of the other prompt handlers.</li> <li>After adding, your <code>get_prompt</code> method should include the new <code>greet-user</code> prompt logic.</li> <li>This exercise helps you understand how to implement prompt functionality in the MCP server.</li> <li>Try to implement it on your own before looking at the solution below!</li> </ul> <details> <summary>Solution for Greet User Prompt Handler</summary> <div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"greet-user"</span><span class="p">:</span>
</span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>    <span class="n">name</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"Guest"</span><span class="p">)</span>
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>    <span class="n">prompt_text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">! Welcome to the Complete MCP Server. How can I assist you today?"</span>
</span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">prompt_text</span><span class="p">)]</span>
</span></code></pre></div> </details> <hr/> <h2 id="skeleton-10-lifecycle-handlers">Skeleton 10: Lifecycle Handlers<a class="headerlink" href="#skeleton-10-lifecycle-handlers" title="Permanent link">Â¶</a></h2> <h3 id="method-setup_lifecycle_handlers">Method: <code>setup_lifecycle_handlers</code><a class="headerlink" href="#method-setup_lifecycle_handlers" title="Permanent link">Â¶</a></h3> <p><strong>Capabilities:</strong></p> <ul> <li>Handles server initialization events</li> <li>Manages server shutdown procedures</li> <li>Logs server lifecycle events</li> <li>Ensures clean startup and teardown</li> <li>Enables clients to get ready-to-use prompts</li> <li>Connects prompt templates to actual content</li> <li>Maintains server stability and reliability</li> </ul> <p><strong>Why This Runs Eighth:</strong></p> <ul> <li>After all features are configured, we set up lifecycle management</li> <li>Lifecycle handlers need complete server setup</li> <li>Prepares server for actual runtime operations</li> <li>Defines the behavior of each prompt</li> <li>Handlers make prompts functional</li> <li>Ensures proper resource management during startup/shutdown</li> <li>Critical for long-running server processes</li> <li>Helps prevent resource leaks and data corruption</li> </ul> <p><strong>Why Servers Need Shutdown Procedures:</strong></p> <ul> <li>Release system resources (memory, file handles, connections)</li> <li>Save any pending data or state to disk</li> <li>Close network connections gracefully</li> <li>Notify connected clients of server shutdown</li> <li>Clean up temporary files and caches</li> <li>Log final statistics and status</li> <li>Prevent data corruption from abrupt termination</li> <li>Allow pending operations to complete</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">setup_lifecycle_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="sd">"""Setup lifecycle management (conceptual for MCP)."""</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Lifecycle management configured"</span><span class="p">)</span>
</span></code></pre></div> <hr/> <div class="admonition note"> <p class="admonition-title">Note</p> <ul> <li>Note: MCP servers typically donâ€™t have explicit lifecycle hooks</li> <li>This is a conceptual method showing where such logic would go</li> </ul> </div> <div class="admonition tip"> <p class="admonition-title">Tip</p> <ul> <li>You can implement custom startup/shutdown logic here if needed</li> <li>Use this as a placeholder for lifecycle management</li> <li>The actual â€œlifecycleâ€ of the server is managed implicitly by:</li> <li><strong>Startup:</strong> When <code>asyncio.run(main())</code> is called and <code>server.run()</code> begins the event loop.</li> <li><strong>Shutdown:</strong> When the process receives a signal (like <code>KeyboardInterrupt / Ctrl+C</code>), which is caught in the if <code>__name__ == "__main__":</code> block to exit gracefully.</li> </ul> </div> <hr/> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>MCP servers use the standard Python lifecycle</li> <li>Cleanup happens when the server process exits</li> <li>You can use <code>try/except/finally</code> blocks in the main function for cleanup</li> <li>This method is a placeholder for lifecycle logic</li> <li>In real-world servers, you might add logging or resource management here</li> <li>This prepares the server for stable operation</li> <li>Enhances reliability during startup and shutdown</li> <li>Critical for production-grade servers</li> <li>Though MCP lacks explicit lifecycle hooks, this method indicates where such logic would be placed</li> <li>It serves as a reminder to consider lifecycle management in server design</li> <li>Helps maintain server health over long runtimes</li> <li>Prepares for future enhancements that may introduce lifecycle events</li> <li>Ensures the server is robust and reliable</li> <li>Maintains server integrity during its lifecycle</li> </ul> <hr/> <h2 id="skeleton-11-run-the-server">Skeleton 11: Run the Server<a class="headerlink" href="#skeleton-11-run-the-server" title="Permanent link">Â¶</a></h2> <h3 id="method-run">Method: <code>run</code><a class="headerlink" href="#method-run" title="Permanent link">Â¶</a></h3> <ul> <li>This is the final method to add to your class.</li> <li>It starts the MCP server and begins listening for client requests.</li> </ul> <p><strong>Capabilities:</strong></p> <ul> <li>Starts the MCP server</li> <li>Connects to stdio transport</li> <li>Begins listening for client requests</li> <li>Runs the main event loop</li> <li>Enables clients to get ready-to-use prompts</li> <li>Connects prompt templates to actual content</li> <li>Facilitates real-time client-server communication</li> </ul> <p><strong>Why This Runs Last:</strong></p> <ul> <li>All tools, resources, and prompts must be registered first</li> <li>This starts the actual server operation</li> <li>After this, the server is live and accepting requests</li> <li>Defines the behavior of each prompt</li> <li>Handlers make prompts functional</li> <li>This is the final step to make the server operational</li> <li>Without this, the server would not run</li> <li>This method initiates the event loop that processes requests</li> <li>Critical for real-time interactions with clients</li> </ul> <hr/> <h4 id="how-does-mcp-server-start">How does MCP Server Start:<a class="headerlink" href="#how-does-mcp-server-start" title="Permanent link">Â¶</a></h4> <ol> <li><strong>Create stdio transport:</strong> <code>stdio_server()</code></li> <li>Opens stdin (standard input) for receiving messages</li> <li> <p>Opens stdout (standard output) for sending responses</p> </li> <li> <p><strong>Run server with streams:</strong> <code>server.run(read_stream, write_stream)</code></p> </li> <li>Listens on stdin for JSON-RPC messages from client</li> <li> <p>Sends JSON-RPC responses back on stdout</p> </li> <li> <p><strong>Event loop processes requests asynchronously</strong></p> </li> <li>Handles multiple concurrent requests</li> <li>Executes tools, returns resources, generates prompts</li> </ol> <hr/> <h4 id="what-is-stdio-standard-inputoutput">What is STDIO (Standard Input/Output)?<a class="headerlink" href="#what-is-stdio-standard-inputoutput" title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th style="text-align: left;">Component</th> <th style="text-align: left;">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><strong>stdio</strong></td> <td style="text-align: left;">Standard Input/Output streams</td> </tr> <tr> <td style="text-align: left;"><strong>stdin</strong></td> <td style="text-align: left;">Channel for receiving data (keyboard, pipe)</td> </tr> <tr> <td style="text-align: left;"><strong>stdout</strong></td> <td style="text-align: left;">Channel for sending data (screen, pipe)</td> </tr> <tr> <td style="text-align: left;"><strong>Usage</strong></td> <td style="text-align: left;">MCP uses stdio for client-server communication</td> </tr> <tr> <td style="text-align: left;"><strong>Flow</strong></td> <td style="text-align: left;">Client stdin â†’ Server stdout â†’ Client</td> </tr> </tbody> </table> <h4 id="alternatives-to-stdio">Alternatives to STDIO:<a class="headerlink" href="#alternatives-to-stdio" title="Permanent link">Â¶</a></h4> <table> <thead> <tr> <th style="text-align: left;">Component</th> <th style="text-align: left;">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left;"><strong>HTTP/HTTPS</strong></td> <td style="text-align: left;">Web-based API (REST or GraphQL)</td> </tr> <tr> <td style="text-align: left;"><strong>WebSockets</strong></td> <td style="text-align: left;">Bidirectional real-time communication</td> </tr> <tr> <td style="text-align: left;"><strong>gRPC</strong></td> <td style="text-align: left;">High-performance RPC framework</td> </tr> <tr> <td style="text-align: left;"><strong>Unix Domain Sockets</strong></td> <td style="text-align: left;">Local inter-process communication</td> </tr> <tr> <td style="text-align: left;"><strong>TCP/IP Sockets</strong></td> <td style="text-align: left;">Network communication</td> </tr> </tbody> </table> <p><strong>Why STDIO for MCP?</strong></p> <ul> <li>âœ“ Simple: No network configuration needed</li> <li>âœ“ Secure: Stays within local process boundary</li> <li>âœ“ Universal: Works on all operating systems</li> <li>âœ“ Easy to integrate: Pipe to any process</li> <li>âœ“ Lightweight: Minimal overhead for communication</li> <li>âœ“ Ideal for local AI assistant integrations</li> <li>âœ“ Fits well with command-line tools and scripts</li> <li>âœ“ Perfect for development and testing</li> <li>âœ“ Common in LSP (Language Server Protocol) implementations</li> <li>âœ“ Easy to debug: View raw messages in terminal</li> <li>âœ“ No firewall or network issues</li> <li>âœ“ Works well with containerized environments</li> </ul> <p><strong>Async Event Loop Explained:</strong></p> <ul> <li>Event Loop: Central coordinator for async operations</li> <li>Async/Await: Write concurrent code that looks sequential</li> <li>Non-blocking: Server handles multiple requests simultaneously</li> <li>Efficient: Uses single thread for many connections</li> <li>Scalable: Easily handles growing workloads</li> </ul> <hr/> <p><strong>How It Works:</strong></p> <ol> <li>Event loop starts and waits for events (<code>messages</code>)</li> <li>When message arrives, creates a Task to handle it</li> <li>While waiting for I/O ( <code>tool execution</code>), processes other tasks</li> <li>When task completes, <strong>sends response back to client</strong></li> <li>Continues looping until server shuts down</li> <li>This allows high concurrency with minimal threads</li> </ol> <p><strong>Benefits:</strong></p> <ul> <li>âœ“ Handle 1000s of connections with single thread</li> <li>âœ“ No waiting: Process other requests during I/O</li> <li>âœ“ Memory efficient: No thread per connection</li> <li>âœ“ Scalable: Add more tasks without more threads</li> <li>âœ“ Responsive: Quick handling of many clients</li> <li>âœ“ Ideal for I/O-bound workloads (like MCP servers)</li> <li>âœ“ Simplifies concurrency model</li> <li>âœ“ Reduces complexity of multi-threaded code</li> <li>âœ“ Easier to maintain and debug</li> <li>âœ“ Leverages Pythonâ€™s async capabilities effectively</li> </ul> <hr/> <ul> <li>Add this method to your class:</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="sd">"""Start the MCP server and begin serving requests."""</span>
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Starting MCP server..."</span><span class="p">)</span>
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Server is now running and ready to accept connections"</span><span class="p">)</span>
</span><span id="__span-19-5"><a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a>
</span><span id="__span-19-6"><a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>    <span class="k">async</span> <span class="k">with</span> <span class="n">stdio_server</span><span class="p">()</span> <span class="k">as</span> <span class="p">(</span><span class="n">read_stream</span><span class="p">,</span> <span class="n">write_stream</span><span class="p">):</span>
</span><span id="__span-19-7"><a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a>        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
</span><span id="__span-19-8"><a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a>            <span class="n">read_stream</span><span class="p">,</span>
</span><span id="__span-19-9"><a href="#__codelineno-19-9" id="__codelineno-19-9" name="__codelineno-19-9"></a>            <span class="n">write_stream</span><span class="p">,</span>
</span><span id="__span-19-10"><a href="#__codelineno-19-10" id="__codelineno-19-10" name="__codelineno-19-10"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">create_initialization_options</span><span class="p">()</span>
</span><span id="__span-19-11"><a href="#__codelineno-19-11" id="__codelineno-19-11" name="__codelineno-19-11"></a>        <span class="p">)</span>
</span></code></pre></div> <hr/> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li><code>stdio_server()</code> creates the stdin/stdout transport</li> <li><code>self.server.run()</code> starts the server event loop</li> <li>The server now listens for JSON-RPC messages on stdin</li> <li>Responses are sent back on stdout</li> <li>The server can now handle tool calls, resource reads, and prompt requests</li> <li>This is the final step to make the server operational</li> <li>The server runs indefinitely until interrupted</li> <li>Clients can now connect and interact with the server</li> <li>This method is asynchronous, allowing concurrent request handling</li> <li>The server is now live and ready for use</li> </ul> <hr/> <h2 id="skeleton-12-rag">Skeleton 12: RAG<a class="headerlink" href="#skeleton-12-rag" title="Permanent link">Â¶</a></h2> <p><strong>What is RAG?</strong></p> <ul> <li>RAG = Retrieval Augmented Generation</li> <li>A technique that enhances AI responses by retrieving relevant information from a knowledge base before generating answers</li> <li>Think of it like giving the AI access to a reference library</li> <li>Combines information retrieval with text generation</li> <li>Enables accurate, context-aware responses based on specific data</li> <li>Examples: Customer support bots, domain-specific Q&amp;A systems, documentation assistants</li> <li>Critical for providing factually accurate responses from your own data sources</li> </ul> <p><strong>Why Add RAG to Your MCP Server?</strong></p> <ul> <li>Makes your server more intelligent and context-aware</li> <li>Allows retrieval of relevant information from local data sources</li> <li>Provides accurate responses based on your specific domain knowledge</li> <li>Enables filtering and querying of structured data</li> <li>Enhances the serverâ€™s ability to answer domain-specific questions</li> <li>No heavy vector database dependencies required for simple implementations</li> </ul> <hr/> <h4 id="1-install-dependencies">1. Install Dependencies<a class="headerlink" href="#1-install-dependencies" title="Permanent link">Â¶</a></h4> <ul> <li>No heavy dependencies (like vector databases) are required for this simple implementation.</li> <li>We will use standard Python libraries.</li> </ul> <h4 id="2-update-the-mcp-server">2. Update the MCP Server<a class="headerlink" href="#2-update-the-mcp-server" title="Permanent link">Â¶</a></h4> <ul> <li>Open your MCP server file and add the following imports and initialization code to set up a simple in-memory users.</li> <li>We will also add a helper function to load data from a CSV file.</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">csv</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="c1"># Initialize an in-memory users</span>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">load_users</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">    </span><span class="sd">"""Load users from a CSV file."""</span>
</span><span id="__span-20-8"><a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a>    <span class="k">global</span> <span class="n">users</span>
</span><span id="__span-20-9"><a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a>    <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-20-10"><a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a>
</span><span id="__span-20-11"><a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-20-12"><a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">'utf-8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="__span-20-13"><a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a>            <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</span><span id="__span-20-14"><a href="#__codelineno-20-14" id="__codelineno-20-14" name="__codelineno-20-14"></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reader</span><span class="p">):</span>
</span><span id="__span-20-15"><a href="#__codelineno-20-15" id="__codelineno-20-15" name="__codelineno-20-15"></a>                <span class="c1"># Load all fields from the CSV</span>
</span><span id="__span-20-16"><a href="#__codelineno-20-16" id="__codelineno-20-16" name="__codelineno-20-16"></a>                <span class="n">first_name</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'first_name'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
</span><span id="__span-20-17"><a href="#__codelineno-20-17" id="__codelineno-20-17" name="__codelineno-20-17"></a>                <span class="n">last_name</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'last_name'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
</span><span id="__span-20-18"><a href="#__codelineno-20-18" id="__codelineno-20-18" name="__codelineno-20-18"></a>                <span class="n">age</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'age'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
</span><span id="__span-20-19"><a href="#__codelineno-20-19" id="__codelineno-20-19" name="__codelineno-20-19"></a>                <span class="n">city</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'city'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
</span><span id="__span-20-20"><a href="#__codelineno-20-20" id="__codelineno-20-20" name="__codelineno-20-20"></a>
</span><span id="__span-20-21"><a href="#__codelineno-20-21" id="__codelineno-20-21" name="__codelineno-20-21"></a>                <span class="c1"># Create full name and content</span>
</span><span id="__span-20-22"><a href="#__codelineno-20-22" id="__codelineno-20-22" name="__codelineno-20-22"></a>                <span class="n">full_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">first_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">last_name</span><span class="si">}</span><span class="s2">"</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-20-23"><a href="#__codelineno-20-23" id="__codelineno-20-23" name="__codelineno-20-23"></a>                <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">"</span> <span class="k">if</span> <span class="n">city</span> <span class="k">else</span> <span class="n">full_name</span>
</span><span id="__span-20-24"><a href="#__codelineno-20-24" id="__codelineno-20-24" name="__codelineno-20-24"></a>
</span><span id="__span-20-25"><a href="#__codelineno-20-25" id="__codelineno-20-25" name="__codelineno-20-25"></a>                <span class="c1"># Create user dict with all available fields</span>
</span><span id="__span-20-26"><a href="#__codelineno-20-26" id="__codelineno-20-26" name="__codelineno-20-26"></a>                <span class="n">user</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-20-27"><a href="#__codelineno-20-27" id="__codelineno-20-27" name="__codelineno-20-27"></a>                    <span class="s2">"id"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="__span-20-28"><a href="#__codelineno-20-28" id="__codelineno-20-28" name="__codelineno-20-28"></a>                    <span class="s2">"first_name"</span><span class="p">:</span> <span class="n">first_name</span><span class="p">,</span>
</span><span id="__span-20-29"><a href="#__codelineno-20-29" id="__codelineno-20-29" name="__codelineno-20-29"></a>                    <span class="s2">"last_name"</span><span class="p">:</span> <span class="n">last_name</span><span class="p">,</span>
</span><span id="__span-20-30"><a href="#__codelineno-20-30" id="__codelineno-20-30" name="__codelineno-20-30"></a>                    <span class="s2">"full_name"</span><span class="p">:</span> <span class="n">full_name</span><span class="p">,</span>
</span><span id="__span-20-31"><a href="#__codelineno-20-31" id="__codelineno-20-31" name="__codelineno-20-31"></a>                    <span class="s2">"content"</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span>
</span><span id="__span-20-32"><a href="#__codelineno-20-32" id="__codelineno-20-32" name="__codelineno-20-32"></a>                    <span class="s2">"age"</span><span class="p">:</span> <span class="n">age</span><span class="p">,</span>
</span><span id="__span-20-33"><a href="#__codelineno-20-33" id="__codelineno-20-33" name="__codelineno-20-33"></a>                    <span class="s2">"city"</span><span class="p">:</span> <span class="n">city</span>
</span><span id="__span-20-34"><a href="#__codelineno-20-34" id="__codelineno-20-34" name="__codelineno-20-34"></a>                <span class="p">}</span>
</span><span id="__span-20-35"><a href="#__codelineno-20-35" id="__codelineno-20-35" name="__codelineno-20-35"></a>                <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span id="__span-20-36"><a href="#__codelineno-20-36" id="__codelineno-20-36" name="__codelineno-20-36"></a>
</span><span id="__span-20-37"><a href="#__codelineno-20-37" id="__codelineno-20-37" name="__codelineno-20-37"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Loaded </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">)</span><span class="si">}</span><span class="s2"> users from CSV."</span><span class="p">)</span>
</span><span id="__span-20-38"><a href="#__codelineno-20-38" id="__codelineno-20-38" name="__codelineno-20-38"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="__span-20-39"><a href="#__codelineno-20-39" id="__codelineno-20-39" name="__codelineno-20-39"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Error loading users: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-20-40"><a href="#__codelineno-20-40" id="__codelineno-20-40" name="__codelineno-20-40"></a>
</span><span id="__span-20-41"><a href="#__codelineno-20-41" id="__codelineno-20-41" name="__codelineno-20-41"></a><span class="c1"># Load the users</span>
</span><span id="__span-20-42"><a href="#__codelineno-20-42" id="__codelineno-20-42" name="__codelineno-20-42"></a><span class="c1"># Make sure you have a 'users.csv' file in the same directory</span>
</span><span id="__span-20-43"><a href="#__codelineno-20-43" id="__codelineno-20-43" name="__codelineno-20-43"></a><span class="c1"># Format: first_name,last_name,city,age</span>
</span><span id="__span-20-44"><a href="#__codelineno-20-44" id="__codelineno-20-44" name="__codelineno-20-44"></a><span class="n">load_users</span><span class="p">(</span><span class="s2">"users.csv"</span><span class="p">)</span>
</span></code></pre></div> <h4 id="3-register-the-rag-tools">3. Register the RAG Tool(s)<a class="headerlink" href="#3-register-the-rag-tools" title="Permanent link">Â¶</a></h4> <ul> <li>Add new tools to your MCP server that allow the agent to query this collection using simple keyword matching.</li> <li>Here are two example tools: one to filter users by city and another to filter users by age.</li> <li>Add these tool definitions to the list in your <code>register_tools</code> method (inside the <code>list_tools</code> return array):</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"filter_users_by_city"</span><span class="p">,</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">"Filter and return users who live in a specific city"</span><span class="p">,</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a>    <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a>        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-7"><a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a>            <span class="s2">"city"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-8"><a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a>                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
</span><span id="__span-21-9"><a href="#__codelineno-21-9" id="__codelineno-21-9" name="__codelineno-21-9"></a>                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The city to filter users by"</span>
</span><span id="__span-21-10"><a href="#__codelineno-21-10" id="__codelineno-21-10" name="__codelineno-21-10"></a>            <span class="p">}</span>
</span><span id="__span-21-11"><a href="#__codelineno-21-11" id="__codelineno-21-11" name="__codelineno-21-11"></a>        <span class="p">},</span>
</span><span id="__span-21-12"><a href="#__codelineno-21-12" id="__codelineno-21-12" name="__codelineno-21-12"></a>        <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"city"</span><span class="p">]</span>
</span><span id="__span-21-13"><a href="#__codelineno-21-13" id="__codelineno-21-13" name="__codelineno-21-13"></a>    <span class="p">}</span>
</span><span id="__span-21-14"><a href="#__codelineno-21-14" id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="p">),</span>
</span><span id="__span-21-15"><a href="#__codelineno-21-15" id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-21-16"><a href="#__codelineno-21-16" id="__codelineno-21-16" name="__codelineno-21-16"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"filter_users_by_age"</span><span class="p">,</span>
</span><span id="__span-21-17"><a href="#__codelineno-21-17" id="__codelineno-21-17" name="__codelineno-21-17"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">"Filter and return users who are older than the specified minimum age"</span><span class="p">,</span>
</span><span id="__span-21-18"><a href="#__codelineno-21-18" id="__codelineno-21-18" name="__codelineno-21-18"></a>    <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-21-19"><a href="#__codelineno-21-19" id="__codelineno-21-19" name="__codelineno-21-19"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-21-20"><a href="#__codelineno-21-20" id="__codelineno-21-20" name="__codelineno-21-20"></a>        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-21"><a href="#__codelineno-21-21" id="__codelineno-21-21" name="__codelineno-21-21"></a>            <span class="s2">"min_age"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-22"><a href="#__codelineno-21-22" id="__codelineno-21-22" name="__codelineno-21-22"></a>                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
</span><span id="__span-21-23"><a href="#__codelineno-21-23" id="__codelineno-21-23" name="__codelineno-21-23"></a>                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The minimum age to filter users by"</span>
</span><span id="__span-21-24"><a href="#__codelineno-21-24" id="__codelineno-21-24" name="__codelineno-21-24"></a>            <span class="p">}</span>
</span><span id="__span-21-25"><a href="#__codelineno-21-25" id="__codelineno-21-25" name="__codelineno-21-25"></a>        <span class="p">},</span>
</span><span id="__span-21-26"><a href="#__codelineno-21-26" id="__codelineno-21-26" name="__codelineno-21-26"></a>        <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"min_age"</span><span class="p">]</span>
</span><span id="__span-21-27"><a href="#__codelineno-21-27" id="__codelineno-21-27" name="__codelineno-21-27"></a>    <span class="p">}</span>
</span><span id="__span-21-28"><a href="#__codelineno-21-28" id="__codelineno-21-28" name="__codelineno-21-28"></a><span class="p">)</span>
</span></code></pre></div> <ul> <li>Then add the corresponding handlers in your <code>register_tool_handlers</code> method (inside the <code>call_tool</code> function):</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"filter_users_by_city"</span><span class="p">:</span>
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a>    <span class="n">city</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"city"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-22-3"><a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a>    <span class="n">filtered_users</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-22-4"><a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a>    <span class="n">target_city</span> <span class="o">=</span> <span class="n">city</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-22-5"><a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a>
</span><span id="__span-22-6"><a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a>    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
</span><span id="__span-22-7"><a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a>        <span class="c1"># Get city from user dict</span>
</span><span id="__span-22-8"><a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a>        <span class="n">u_city</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"city"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="__span-22-9"><a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a>
</span><span id="__span-22-10"><a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a>        <span class="k">if</span> <span class="n">u_city</span> <span class="o">==</span> <span class="n">target_city</span><span class="p">:</span>
</span><span id="__span-22-11"><a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a>            <span class="n">full_name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'full_name'</span><span class="p">,</span> <span class="s1">'Unknown'</span><span class="p">)</span>
</span><span id="__span-22-12"><a href="#__codelineno-22-12" id="__codelineno-22-12" name="__codelineno-22-12"></a>            <span class="n">age</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'age'</span><span class="p">,</span> <span class="s1">'N/A'</span><span class="p">)</span>
</span><span id="__span-22-13"><a href="#__codelineno-22-13" id="__codelineno-22-13" name="__codelineno-22-13"></a>            <span class="n">filtered_users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"User </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2">, Age: </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">, City: </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'city'</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-22-14"><a href="#__codelineno-22-14" id="__codelineno-22-14" name="__codelineno-22-14"></a>
</span><span id="__span-22-15"><a href="#__codelineno-22-15" id="__codelineno-22-15" name="__codelineno-22-15"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">filtered_users</span><span class="p">:</span>
</span><span id="__span-22-16"><a href="#__codelineno-22-16" id="__codelineno-22-16" name="__codelineno-22-16"></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"No users found in </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">."</span>
</span><span id="__span-22-17"><a href="#__codelineno-22-17" id="__codelineno-22-17" name="__codelineno-22-17"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-22-18"><a href="#__codelineno-22-18" id="__codelineno-22-18" name="__codelineno-22-18"></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filtered_users</span><span class="p">)</span>
</span><span id="__span-22-19"><a href="#__codelineno-22-19" id="__codelineno-22-19" name="__codelineno-22-19"></a>
</span><span id="__span-22-20"><a href="#__codelineno-22-20" id="__codelineno-22-20" name="__codelineno-22-20"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span><span id="__span-22-21"><a href="#__codelineno-22-21" id="__codelineno-22-21" name="__codelineno-22-21"></a>
</span><span id="__span-22-22"><a href="#__codelineno-22-22" id="__codelineno-22-22" name="__codelineno-22-22"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"filter_users_by_age"</span><span class="p">:</span>
</span><span id="__span-22-23"><a href="#__codelineno-22-23" id="__codelineno-22-23" name="__codelineno-22-23"></a>    <span class="n">min_age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"min_age"</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="__span-22-24"><a href="#__codelineno-22-24" id="__codelineno-22-24" name="__codelineno-22-24"></a>    <span class="n">filtered_users</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-22-25"><a href="#__codelineno-22-25" id="__codelineno-22-25" name="__codelineno-22-25"></a>
</span><span id="__span-22-26"><a href="#__codelineno-22-26" id="__codelineno-22-26" name="__codelineno-22-26"></a>    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
</span><span id="__span-22-27"><a href="#__codelineno-22-27" id="__codelineno-22-27" name="__codelineno-22-27"></a>        <span class="c1"># Get age from user dict</span>
</span><span id="__span-22-28"><a href="#__codelineno-22-28" id="__codelineno-22-28" name="__codelineno-22-28"></a>        <span class="n">u_age</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"age"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</span><span id="__span-22-29"><a href="#__codelineno-22-29" id="__codelineno-22-29" name="__codelineno-22-29"></a>
</span><span id="__span-22-30"><a href="#__codelineno-22-30" id="__codelineno-22-30" name="__codelineno-22-30"></a>        <span class="c1"># Skip if no age</span>
</span><span id="__span-22-31"><a href="#__codelineno-22-31" id="__codelineno-22-31" name="__codelineno-22-31"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">u_age</span><span class="p">:</span>
</span><span id="__span-22-32"><a href="#__codelineno-22-32" id="__codelineno-22-32" name="__codelineno-22-32"></a>            <span class="k">continue</span>
</span><span id="__span-22-33"><a href="#__codelineno-22-33" id="__codelineno-22-33" name="__codelineno-22-33"></a>
</span><span id="__span-22-34"><a href="#__codelineno-22-34" id="__codelineno-22-34" name="__codelineno-22-34"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-22-35"><a href="#__codelineno-22-35" id="__codelineno-22-35" name="__codelineno-22-35"></a>            <span class="n">u_age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">u_age</span><span class="p">)</span>
</span><span id="__span-22-36"><a href="#__codelineno-22-36" id="__codelineno-22-36" name="__codelineno-22-36"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
</span><span id="__span-22-37"><a href="#__codelineno-22-37" id="__codelineno-22-37" name="__codelineno-22-37"></a>            <span class="k">continue</span>
</span><span id="__span-22-38"><a href="#__codelineno-22-38" id="__codelineno-22-38" name="__codelineno-22-38"></a>
</span><span id="__span-22-39"><a href="#__codelineno-22-39" id="__codelineno-22-39" name="__codelineno-22-39"></a>        <span class="k">if</span> <span class="n">u_age</span> <span class="o">&gt;</span> <span class="n">min_age</span><span class="p">:</span>
</span><span id="__span-22-40"><a href="#__codelineno-22-40" id="__codelineno-22-40" name="__codelineno-22-40"></a>            <span class="n">full_name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'full_name'</span><span class="p">,</span> <span class="s1">'Unknown'</span><span class="p">)</span>
</span><span id="__span-22-41"><a href="#__codelineno-22-41" id="__codelineno-22-41" name="__codelineno-22-41"></a>            <span class="n">city</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'city'</span><span class="p">,</span> <span class="s1">'Unknown'</span><span class="p">)</span>
</span><span id="__span-22-42"><a href="#__codelineno-22-42" id="__codelineno-22-42" name="__codelineno-22-42"></a>            <span class="n">filtered_users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"User </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2">, Age: </span><span class="si">{</span><span class="n">u_age</span><span class="si">}</span><span class="s2">, City: </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-22-43"><a href="#__codelineno-22-43" id="__codelineno-22-43" name="__codelineno-22-43"></a>
</span><span id="__span-22-44"><a href="#__codelineno-22-44" id="__codelineno-22-44" name="__codelineno-22-44"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">filtered_users</span><span class="p">:</span>
</span><span id="__span-22-45"><a href="#__codelineno-22-45" id="__codelineno-22-45" name="__codelineno-22-45"></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"No users found older than </span><span class="si">{</span><span class="n">min_age</span><span class="si">}</span><span class="s2">."</span>
</span><span id="__span-22-46"><a href="#__codelineno-22-46" id="__codelineno-22-46" name="__codelineno-22-46"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-22-47"><a href="#__codelineno-22-47" id="__codelineno-22-47" name="__codelineno-22-47"></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filtered_users</span><span class="p">)</span>
</span><span id="__span-22-48"><a href="#__codelineno-22-48" id="__codelineno-22-48" name="__codelineno-22-48"></a>
</span><span id="__span-22-49"><a href="#__codelineno-22-49" id="__codelineno-22-49" name="__codelineno-22-49"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span></code></pre></div> <h4 id="4-test-the-rag-capabilities">4. Test the RAG Capabilities<a class="headerlink" href="#4-test-the-rag-capabilities" title="Permanent link">Â¶</a></h4> <ol> <li>Restart your MCP server.</li> <li>Use the MCP Inspector or Client to call <code>query_users</code> with a question like â€œWhat is a Pod?â€.</li> <li>Verify that the tool returns the specific definition we added to the database.</li> </ol> <hr/> <h2 id="skeleton-13-roots">Skeleton 13: Roots<a class="headerlink" href="#skeleton-13-roots" title="Permanent link">Â¶</a></h2> <hr/> <h2 id="skeleton-14-main-entry-point">Skeleton 14: Main / Entry Point<a class="headerlink" href="#skeleton-14-main-entry-point" title="Permanent link">Â¶</a></h2> <p><strong>What is the Main Entry Point?</strong></p> <ul> <li>The main entry point is the starting point of your Python script</li> <li>Itâ€™s the function that orchestrates the entire server setup and execution</li> <li>Think of it like the conductor of an orchestra - it coordinates all the pieces</li> <li>The <code>main()</code> function calls all setup methods in the correct order</li> <li>The <code>if __name__ == "__main__"</code> block is what runs when you execute the script directly</li> <li>Examples: Starts server, initializes components, handles graceful shutdown</li> <li>Essential for any Python application that needs to run as a standalone program</li> </ul> <p><strong>Why This is Important:</strong></p> <ul> <li>Ensures all components are initialized in the correct order</li> <li>Provides a clear execution flow thatâ€™s easy to understand</li> <li>Handles errors and graceful shutdown (like Ctrl+C)</li> <li>Makes your code modular and testable</li> <li>Standard Python pattern for executable scripts</li> <li>Without this, your server would just be a collection of classes with no way to run</li> </ul> <p><strong>Orchestration Order:</strong></p> <ol> <li>Create server instance (constructor)</li> <li>Register tools</li> <li>Register tool handlers</li> <li>Register resources</li> <li>Register resource handlers</li> <li>Register prompts</li> <li>Register prompt handlers</li> <li>Setup lifecycle handlers</li> <li>Run the server</li> </ol> <hr/> <ul> <li>Now we need to create the main function that orchestrates everything and the entry point that runs when the script is executed.</li> <li>This is where we call all the setup methods in order and start the server.</li> <li>This is the final piece to complete your MCP server implementation.</li> <li>Letâ€™s add the main function and entry point.</li> </ul> <hr/> <ul> <li>Add these functions at the end of your file (outside the class):</li> </ul> <div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="sd">    Main entry point for the MCP server.</span>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a>
</span><span id="__span-23-5"><a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="sd">    This function orchestrates the complete server setup and execution:</span>
</span><span id="__span-23-6"><a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="sd">    1. Creates server instance (constructor)</span>
</span><span id="__span-23-7"><a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="sd">    2. Registers tools</span>
</span><span id="__span-23-8"><a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="sd">    3. Registers tool handlers</span>
</span><span id="__span-23-9"><a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="sd">    4. Registers resources</span>
</span><span id="__span-23-10"><a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="sd">    5. Registers resource handlers</span>
</span><span id="__span-23-11"><a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="sd">    6. Registers prompts</span>
</span><span id="__span-23-12"><a href="#__codelineno-23-12" id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="sd">    7. Registers prompt handlers</span>
</span><span id="__span-23-13"><a href="#__codelineno-23-13" id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="sd">    8. Sets up lifecycle handlers</span>
</span><span id="__span-23-14"><a href="#__codelineno-23-14" id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="sd">    9. Runs the server</span>
</span><span id="__span-23-15"><a href="#__codelineno-23-15" id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="sd">    """</span>
</span><span id="__span-23-16"><a href="#__codelineno-23-16" id="__codelineno-23-16" name="__codelineno-23-16"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"="</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</span><span id="__span-23-17"><a href="#__codelineno-23-17" id="__codelineno-23-17" name="__codelineno-23-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"ðŸŒŸ COMPLETE MCP SERVER - STARTING"</span><span class="p">)</span>
</span><span id="__span-23-18"><a href="#__codelineno-23-18" id="__codelineno-23-18" name="__codelineno-23-18"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"="</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</span><span id="__span-23-19"><a href="#__codelineno-23-19" id="__codelineno-23-19" name="__codelineno-23-19"></a>
</span><span id="__span-23-20"><a href="#__codelineno-23-20" id="__codelineno-23-20" name="__codelineno-23-20"></a>    <span class="c1"># Step 1: Create server instance</span>
</span><span id="__span-23-21"><a href="#__codelineno-23-21" id="__codelineno-23-21" name="__codelineno-23-21"></a>    <span class="n">server</span> <span class="o">=</span> <span class="n">CompleteMCPServer</span><span class="p">()</span>
</span><span id="__span-23-22"><a href="#__codelineno-23-22" id="__codelineno-23-22" name="__codelineno-23-22"></a>
</span><span id="__span-23-23"><a href="#__codelineno-23-23" id="__codelineno-23-23" name="__codelineno-23-23"></a>    <span class="c1"># Step 2: Register tools</span>
</span><span id="__span-23-24"><a href="#__codelineno-23-24" id="__codelineno-23-24" name="__codelineno-23-24"></a>    <span class="n">server</span><span class="o">.</span><span class="n">register_tools</span><span class="p">()</span>
</span><span id="__span-23-25"><a href="#__codelineno-23-25" id="__codelineno-23-25" name="__codelineno-23-25"></a>
</span><span id="__span-23-26"><a href="#__codelineno-23-26" id="__codelineno-23-26" name="__codelineno-23-26"></a>    <span class="c1"># Step 3: Register tool handlers</span>
</span><span id="__span-23-27"><a href="#__codelineno-23-27" id="__codelineno-23-27" name="__codelineno-23-27"></a>    <span class="n">server</span><span class="o">.</span><span class="n">register_tool_handlers</span><span class="p">()</span>
</span><span id="__span-23-28"><a href="#__codelineno-23-28" id="__codelineno-23-28" name="__codelineno-23-28"></a>
</span><span id="__span-23-29"><a href="#__codelineno-23-29" id="__codelineno-23-29" name="__codelineno-23-29"></a>    <span class="c1"># Step 4: Register resources</span>
</span><span id="__span-23-30"><a href="#__codelineno-23-30" id="__codelineno-23-30" name="__codelineno-23-30"></a>    <span class="n">server</span><span class="o">.</span><span class="n">register_resources</span><span class="p">()</span>
</span><span id="__span-23-31"><a href="#__codelineno-23-31" id="__codelineno-23-31" name="__codelineno-23-31"></a>
</span><span id="__span-23-32"><a href="#__codelineno-23-32" id="__codelineno-23-32" name="__codelineno-23-32"></a>    <span class="c1"># Step 5: Register resource handlers</span>
</span><span id="__span-23-33"><a href="#__codelineno-23-33" id="__codelineno-23-33" name="__codelineno-23-33"></a>    <span class="n">server</span><span class="o">.</span><span class="n">register_resource_handlers</span><span class="p">()</span>
</span><span id="__span-23-34"><a href="#__codelineno-23-34" id="__codelineno-23-34" name="__codelineno-23-34"></a>
</span><span id="__span-23-35"><a href="#__codelineno-23-35" id="__codelineno-23-35" name="__codelineno-23-35"></a>    <span class="c1"># Step 6: Register prompts</span>
</span><span id="__span-23-36"><a href="#__codelineno-23-36" id="__codelineno-23-36" name="__codelineno-23-36"></a>    <span class="n">server</span><span class="o">.</span><span class="n">register_prompts</span><span class="p">()</span>
</span><span id="__span-23-37"><a href="#__codelineno-23-37" id="__codelineno-23-37" name="__codelineno-23-37"></a>
</span><span id="__span-23-38"><a href="#__codelineno-23-38" id="__codelineno-23-38" name="__codelineno-23-38"></a>    <span class="c1"># Step 7: Register prompt handlers</span>
</span><span id="__span-23-39"><a href="#__codelineno-23-39" id="__codelineno-23-39" name="__codelineno-23-39"></a>    <span class="n">server</span><span class="o">.</span><span class="n">register_prompt_handlers</span><span class="p">()</span>
</span><span id="__span-23-40"><a href="#__codelineno-23-40" id="__codelineno-23-40" name="__codelineno-23-40"></a>
</span><span id="__span-23-41"><a href="#__codelineno-23-41" id="__codelineno-23-41" name="__codelineno-23-41"></a>    <span class="c1"># Step 8: Setup lifecycle handlers</span>
</span><span id="__span-23-42"><a href="#__codelineno-23-42" id="__codelineno-23-42" name="__codelineno-23-42"></a>    <span class="n">server</span><span class="o">.</span><span class="n">setup_lifecycle_handlers</span><span class="p">()</span>
</span><span id="__span-23-43"><a href="#__codelineno-23-43" id="__codelineno-23-43" name="__codelineno-23-43"></a>
</span><span id="__span-23-44"><a href="#__codelineno-23-44" id="__codelineno-23-44" name="__codelineno-23-44"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"="</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</span><span id="__span-23-45"><a href="#__codelineno-23-45" id="__codelineno-23-45" name="__codelineno-23-45"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"All components registered successfully!"</span><span class="p">)</span>
</span><span id="__span-23-46"><a href="#__codelineno-23-46" id="__codelineno-23-46" name="__codelineno-23-46"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"="</span><span class="o">*</span><span class="mi">80</span><span class="p">)</span>
</span><span id="__span-23-47"><a href="#__codelineno-23-47" id="__codelineno-23-47" name="__codelineno-23-47"></a>
</span><span id="__span-23-48"><a href="#__codelineno-23-48" id="__codelineno-23-48" name="__codelineno-23-48"></a>    <span class="c1"># Step 9: Run the server</span>
</span><span id="__span-23-49"><a href="#__codelineno-23-49" id="__codelineno-23-49" name="__codelineno-23-49"></a>    <span class="k">await</span> <span class="n">server</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span><span id="__span-23-50"><a href="#__codelineno-23-50" id="__codelineno-23-50" name="__codelineno-23-50"></a>
</span><span id="__span-23-51"><a href="#__codelineno-23-51" id="__codelineno-23-51" name="__codelineno-23-51"></a>
</span><span id="__span-23-52"><a href="#__codelineno-23-52" id="__codelineno-23-52" name="__codelineno-23-52"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
</span><span id="__span-23-53"><a href="#__codelineno-23-53" id="__codelineno-23-53" name="__codelineno-23-53"></a><span class="w">    </span><span class="sd">"""</span>
</span><span id="__span-23-54"><a href="#__codelineno-23-54" id="__codelineno-23-54" name="__codelineno-23-54"></a><span class="sd">    Entry point when script is run directly.</span>
</span><span id="__span-23-55"><a href="#__codelineno-23-55" id="__codelineno-23-55" name="__codelineno-23-55"></a>
</span><span id="__span-23-56"><a href="#__codelineno-23-56" id="__codelineno-23-56" name="__codelineno-23-56"></a><span class="sd">    This runs when you execute: python mcp_server.py</span>
</span><span id="__span-23-57"><a href="#__codelineno-23-57" id="__codelineno-23-57" name="__codelineno-23-57"></a><span class="sd">    """</span>
</span><span id="__span-23-58"><a href="#__codelineno-23-58" id="__codelineno-23-58" name="__codelineno-23-58"></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="__span-23-59"><a href="#__codelineno-23-59" id="__codelineno-23-59" name="__codelineno-23-59"></a>        <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span><span id="__span-23-60"><a href="#__codelineno-23-60" id="__codelineno-23-60" name="__codelineno-23-60"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span><span id="__span-23-61"><a href="#__codelineno-23-61" id="__codelineno-23-61" name="__codelineno-23-61"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">ðŸ‘‹ Server shutdown complete"</span><span class="p">)</span>
</span><span id="__span-23-62"><a href="#__codelineno-23-62" id="__codelineno-23-62" name="__codelineno-23-62"></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></code></pre></div> <hr/> <p><strong>Whatâ€™s Happening:</strong></p> <ul> <li>The <code>main()</code> function calls all setup methods in order</li> <li>The <code>if __name__ == "__main__"</code> block runs when the script is executed</li> <li><code>asyncio.run(main())</code> starts the async event loop</li> <li><code>KeyboardInterrupt</code> handler allows graceful shutdown with Ctrl+C</li> <li>This is the final orchestration of the MCP server</li> </ul> <hr/> <h4 id="code-review">Code Review<a class="headerlink" href="#code-review" title="Permanent link">Â¶</a></h4> <p>At this point, your <code>mcp_server.py</code> file should have:</p> <ol> <li>All imports at the top</li> <li><code>CompleteMCPServer</code> class with all 9 methods</li> <li><code>main()</code> function</li> <li>Entry point with <code>if __name__ == "__main__"</code></li> </ol> <hr/> <h2 id="testing-with-mcp-inspector">Testing with MCP Inspector<a class="headerlink" href="#testing-with-mcp-inspector" title="Permanent link">Â¶</a></h2> <ul> <li>Now that youâ€™ve built your complete MCP server, itâ€™s time to test it!</li> <li>Weâ€™ll use MCP Inspector, a web-based tool for debugging MCP servers.</li> <li>Follow the steps below to install MCP Inspector, run your server, and test all the tools, resources, and prompts you implemented.</li> </ul> <h3 id="what-is-mcp-inspector">What is MCP Inspector?<a class="headerlink" href="#what-is-mcp-inspector" title="Permanent link">Â¶</a></h3> <p>MCP Inspector is a web-based debugging tool for MCP servers. Think of it like a browser developer console for your MCP server - it lets you:</p> <ul> <li>Connect to your server</li> <li>See all available tools, resources, and prompts</li> <li>Execute tools with custom parameters</li> <li>Read resources</li> <li>Generate prompts</li> <li>View JSON-RPC messages</li> <li>Debug server behavior</li> </ul> <h3 id="installing-mcp-inspector">Installing MCP Inspector<a class="headerlink" href="#installing-mcp-inspector" title="Permanent link">Â¶</a></h3> <p>Open a terminal and run:</p> <div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="c1"># Install MCP Inspector globally</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a>npm<span class="w"> </span>install<span class="w"> </span>-g<span class="w"> </span>@modelcontextprotocol/inspector
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="c1"># Run the MCP Inspector</span>
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a>npx<span class="w"> </span>@modelcontextprotocol/inspector<span class="w"> </span>python3<span class="w"> </span><span class="s2">"mcp_server.py"</span>
</span></code></pre></div> <hr/> <h3 id="testing-your-tools">Testing Your Tools<a class="headerlink" href="#testing-your-tools" title="Permanent link">Â¶</a></h3> <p>Follow these steps in the MCP Inspector:</p> <h2 id="test-01-connect-to-the-server">Test 01: Connect to the Server<a class="headerlink" href="#test-01-connect-to-the-server" title="Permanent link">Â¶</a></h2> <ol> <li>Click the <strong>â€œConnectâ€</strong> button at the bottom left of the interface</li> <li>Wait for the connection status to show â€œConnectedâ€ (green indicator)</li> <li>If not connected, set the following:</li> <li>transport: <code>stdio</code></li> <li>Command: <code>python3</code></li> <li>Arguments: <code>mcp_server.py</code></li> <li>Click <strong>â€œConnectâ€</strong> again</li> <li>You should see the server name and version in the top right corner</li> <li>Success!</li> </ol> <hr/> <h2 id="test-02-explore-tools">Test 02: Explore Tools<a class="headerlink" href="#test-02-explore-tools" title="Permanent link">Â¶</a></h2> <ol> <li>Click the <strong>â€œToolsâ€</strong> tab in the upper menu</li> <li>Click <strong>â€œList toolsâ€</strong> to see all available tools</li> <li>You should see: <code>calculate</code>, <code>store_data</code>, <code>retrieve_data</code>, <code>echo</code> + RAG tools if added</li> <li>If you added the <code>greeting</code> tool, you should see that too!</li> </ol> <hr/> <h2 id="test-03-test-the-calculate-tool">Test 03: Test the Calculate Tool<a class="headerlink" href="#test-03-test-the-calculate-tool" title="Permanent link">Â¶</a></h2> <ol> <li>Click on <strong>â€œcalculateâ€</strong> in the tools list</li> <li>The tool interface opens on the right side</li> <li>Fill in the parameters:</li> <li><strong>operation</strong>: Select â€œaddâ€ from the dropdown<ul> <li><strong>a</strong>: Enter <code>10</code></li> <li><strong>b</strong>: Enter <code>5</code></li> </ul> </li> <li>Click <strong>â€œRun Toolâ€</strong></li> <li>Scroll down to see the result: <code>"Result: 10 add 5 = 15"</code></li> <li>Success!</li> </ol> <hr/> <h2 id="test-04-test-the-store-data-tool">Test 04: Test the Store Data Tool<a class="headerlink" href="#test-04-test-the-store-data-tool" title="Permanent link">Â¶</a></h2> <ol> <li>Click on <strong>â€œstore_dataâ€</strong> in the tools list</li> <li>Fill in the parameters:</li> <li><strong>key</strong>: Enter <code>username</code></li> <li><strong>value</strong>: Enter <code>Alice</code></li> <li>Click <strong>â€œRun Toolâ€</strong></li> <li>Result: <code>"Stored: username = Alice"</code></li> <li>Try storing another key-value pair to see it works!</li> <li>Success!</li> </ol> <hr/> <h2 id="test-05-test-the-retrieve-data-tool">Test 05: Test the Retrieve Data Tool<a class="headerlink" href="#test-05-test-the-retrieve-data-tool" title="Permanent link">Â¶</a></h2> <ol> <li>Click on <strong>â€œretrieve_dataâ€</strong> in the tools list</li> <li>Fill in the parameter:</li> <li><strong>key</strong>: Enter <code>username</code></li> <li>Click <strong>â€œRun Toolâ€</strong></li> <li>Result: <code>"Retrieved: username = Alice"</code></li> <li>Try retrieving a non-existent key to see error handling!</li> </ol> <hr/> <h2 id="test-06-test-the-echo-tool">Test 06: Test the Echo Tool<a class="headerlink" href="#test-06-test-the-echo-tool" title="Permanent link">Â¶</a></h2> <ol> <li>Click on <strong>â€œechoâ€</strong> in the tools list</li> <li>Fill in the parameter:</li> <li><strong>text</strong>: Enter <code>Hello, MCP World!</code></li> <li>Click <strong>â€œRun Toolâ€</strong></li> <li>Result: <code>"Echo: Hello, MCP World!"</code></li> </ol> <hr/> <h2 id="test-07-test-resources">Test 07: Test Resources<a class="headerlink" href="#test-07-test-resources" title="Permanent link">Â¶</a></h2> <ol> <li>Click the <strong>â€œResourcesâ€</strong> tab in the upper menu</li> <li>Click <strong>â€œList resourcesâ€</strong> to see all available resources</li> <li>You should see: <code>server-info</code>, <code>data-store</code>, <code>welcome</code></li> <li>If you added the <code>server-author</code> resource, you should see that too!</li> </ol> <h4 id="test-resource-server-info">Test Resource: server-info<a class="headerlink" href="#test-resource-server-info" title="Permanent link">Â¶</a></h4> <ol> <li>Click on <strong>â€œresource://server-infoâ€</strong></li> <li>View the JSON response showing server metadata</li> <li>Notice it shows 4 tools, 3 resources, 2 prompts</li> </ol> <h4 id="test-resource-data-store">Test Resource: data-store<a class="headerlink" href="#test-resource-data-store" title="Permanent link">Â¶</a></h4> <ol> <li>Click on <strong>â€œresource://data-storeâ€</strong></li> <li>View the current contents of the data store</li> <li>You should see the <code>username: Alice</code> you stored earlier!</li> </ol> <h4 id="test-resource-welcome">Test Resource: welcome<a class="headerlink" href="#test-resource-welcome" title="Permanent link">Â¶</a></h4> <ol> <li>Click on <strong>â€œresource://welcomeâ€</strong></li> <li>View the welcome message explaining server capabilities</li> <li>If you added the <code>server-author</code> resource, click on it to see your name displayed</li> <li>Success!</li> </ol> <hr/> <h2 id="test-08-testing-your-prompts">Test 08: Testing Your Prompts<a class="headerlink" href="#test-08-testing-your-prompts" title="Permanent link">Â¶</a></h2> <ol> <li>Click the <strong>â€œPromptsâ€</strong> tab in the upper menu</li> <li>Click <strong>â€œList promptsâ€</strong> to see all available prompts</li> <li>You should see: <code>analyze-data</code>, <code>calculate-scenario</code></li> </ol> <h4 id="test-prompt-calculate-scenario">Test Prompt: calculate-scenario<a class="headerlink" href="#test-prompt-calculate-scenario" title="Permanent link">Â¶</a></h4> <ol> <li>Click on <strong>â€œcalculate-scenarioâ€</strong></li> <li>Fill in the argument:</li> <li><strong>operation</strong>: Enter <code>multiply</code></li> <li>Click <strong>â€œGet Promptâ€</strong></li> <li>View the generated prompt that explains how to use the calculate tool</li> </ol> <h4 id="test-prompt-analyze-data">Test Prompt: analyze-data<a class="headerlink" href="#test-prompt-analyze-data" title="Permanent link">Â¶</a></h4> <ol> <li>Click on <strong>â€œanalyze-dataâ€</strong></li> <li>Fill in the argument:</li> <li><strong>key</strong>: Enter <code>username</code></li> <li>Click <strong>â€œGet Promptâ€</strong></li> <li>View the generated prompt that analyzes the stored data</li> </ol> <hr/> <h3 id="understanding-the-inspector-interface">Understanding the Inspector Interface<a class="headerlink" href="#understanding-the-inspector-interface" title="Permanent link">Â¶</a></h3> <p><strong>Left Panel: Navigation</strong></p> <ul> <li>Tools, Resources, Prompts tabs</li> <li>List and select items to test</li> </ul> <p><strong>Right Panel: Details</strong></p> <ul> <li>Shows selected item details</li> <li>Input forms for parameters</li> <li>Execute button</li> <li>Results display</li> </ul> <p><strong>Bottom Panel: JSON-RPC Messages</strong></p> <ul> <li>Shows raw protocol messages</li> <li>Useful for debugging</li> <li>See requests and responses</li> </ul> <p><strong>Connection Status</strong></p> <ul> <li>Top right corner</li> <li>Green = Connected</li> <li>Red = Disconnected</li> <li>Shows server name and version</li> </ul> <hr/> <h2 id="advanced-experiments">Advanced Experiments<a class="headerlink" href="#advanced-experiments" title="Permanent link">Â¶</a></h2> <ul> <li>Now that you have a working server, try these challenges:</li> </ul> <h3 id="challenge-1-modify-the-calculate-tool">Challenge 1: Modify the Calculate Tool<a class="headerlink" href="#challenge-1-modify-the-calculate-tool" title="Permanent link">Â¶</a></h3> <p>Add support for:</p> <ul> <li><code>power</code> operation (a^b)</li> <li><code>modulus</code> operation (a % b)</li> </ul> <h3 id="challenge-2-add-roots">Challenge 2: Add Roots<a class="headerlink" href="#challenge-2-add-roots" title="Permanent link">Â¶</a></h3> <p>Add support for:</p> <ul> <li>Listing files in a directory (referencing client roots)</li> <li>Reading file contents (referencing client roots)</li> </ul> <hr/> <h2 id="bonus-task-hands-on-exercise">Bonus Task: Hands-On Exercise<a class="headerlink" href="#bonus-task-hands-on-exercise" title="Permanent link">Â¶</a></h2> <h3 id="add-pagination-support-for-listing-users">Add Pagination Support for Listing Users<a class="headerlink" href="#add-pagination-support-for-listing-users" title="Permanent link">Â¶</a></h3> <p><strong>Objective:</strong> Implement a new tool called <code>list_all_users</code> that returns all users with pagination support.</p> <p><strong>Requirements:</strong></p> <ol> <li><strong>Tool Name:</strong> <code>list_all_users</code></li> <li><strong>Parameters:</strong></li> <li><code>page</code> (optional, default: 1) - The page number to retrieve</li> <li><code>per_page</code> (optional, default: 10) - Number of users per page</li> <li><strong>Functionality:</strong></li> <li>Return users for the specified page</li> <li>Include metadata: total users, total pages, current page</li> <li>Handle edge cases (invalid page numbers, empty results)</li> </ol> <p><strong>Your Task:</strong></p> <ol> <li>Add the tool definition to <code>register_tools()</code> method</li> <li>Implement the tool handler in <code>register_tool_handlers()</code> method</li> <li>Test your implementation using MCP Inspector</li> </ol> <p><strong>Hints:</strong></p> <ul> <li>Use Pythonâ€™s list slicing for pagination: <code>users[start:end]</code></li> <li>Calculate start index: <code>(page - 1) * per_page</code></li> <li>Calculate total pages: <code>math.ceil(len(users) / per_page)</code></li> <li>Return both the user list and metadata</li> </ul> <hr/> <h3 id="walkthrough-solution">Walkthrough Solution<a class="headerlink" href="#walkthrough-solution" title="Permanent link">Â¶</a></h3> <h4 id="step-1-add-tool-definition">Step 1: Add Tool Definition<a class="headerlink" href="#step-1-add-tool-definition" title="Permanent link">Â¶</a></h4> <details> <summary>Click here for the solution</summary> Add this to your `register_tools()` method in the tools list: <div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">Tool</span><span class="p">(</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a>    <span class="n">name</span><span class="o">=</span><span class="s2">"list_all_users"</span><span class="p">,</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a>    <span class="n">description</span><span class="o">=</span><span class="s2">"List all users with pagination support"</span><span class="p">,</span>
</span><span id="__span-25-4"><a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a>    <span class="n">inputSchema</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-25-5"><a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a>        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
</span><span id="__span-25-6"><a href="#__codelineno-25-6" id="__codelineno-25-6" name="__codelineno-25-6"></a>        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-25-7"><a href="#__codelineno-25-7" id="__codelineno-25-7" name="__codelineno-25-7"></a>            <span class="s2">"page"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-25-8"><a href="#__codelineno-25-8" id="__codelineno-25-8" name="__codelineno-25-8"></a>                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
</span><span id="__span-25-9"><a href="#__codelineno-25-9" id="__codelineno-25-9" name="__codelineno-25-9"></a>                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Page number (default: 1)"</span><span class="p">,</span>
</span><span id="__span-25-10"><a href="#__codelineno-25-10" id="__codelineno-25-10" name="__codelineno-25-10"></a>                <span class="s2">"default"</span><span class="p">:</span> <span class="mi">1</span>
</span><span id="__span-25-11"><a href="#__codelineno-25-11" id="__codelineno-25-11" name="__codelineno-25-11"></a>            <span class="p">},</span>
</span><span id="__span-25-12"><a href="#__codelineno-25-12" id="__codelineno-25-12" name="__codelineno-25-12"></a>            <span class="s2">"per_page"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-25-13"><a href="#__codelineno-25-13" id="__codelineno-25-13" name="__codelineno-25-13"></a>                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
</span><span id="__span-25-14"><a href="#__codelineno-25-14" id="__codelineno-25-14" name="__codelineno-25-14"></a>                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Number of users per page (default: 10)"</span><span class="p">,</span>
</span><span id="__span-25-15"><a href="#__codelineno-25-15" id="__codelineno-25-15" name="__codelineno-25-15"></a>                <span class="s2">"default"</span><span class="p">:</span> <span class="mi">10</span>
</span><span id="__span-25-16"><a href="#__codelineno-25-16" id="__codelineno-25-16" name="__codelineno-25-16"></a>            <span class="p">}</span>
</span><span id="__span-25-17"><a href="#__codelineno-25-17" id="__codelineno-25-17" name="__codelineno-25-17"></a>        <span class="p">}</span>
</span><span id="__span-25-18"><a href="#__codelineno-25-18" id="__codelineno-25-18" name="__codelineno-25-18"></a>    <span class="p">}</span>
</span><span id="__span-25-19"><a href="#__codelineno-25-19" id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="p">)</span>
</span></code></pre></div> </details> <hr/> <h4 id="step-2-add-tool-handler">Step 2: Add Tool Handler<a class="headerlink" href="#step-2-add-tool-handler" title="Permanent link">Â¶</a></h4> <details> <summary>Click here for the solution</summary> Add this to your `register_tool_handlers()` method in the `call_tool` function: <div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">"list_all_users"</span><span class="p">:</span>
</span><span id="__span-26-2"><a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a>    <span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
</span><span id="__span-26-3"><a href="#__codelineno-26-3" id="__codelineno-26-3" name="__codelineno-26-3"></a>
</span><span id="__span-26-4"><a href="#__codelineno-26-4" id="__codelineno-26-4" name="__codelineno-26-4"></a>    <span class="c1"># Get pagination parameters</span>
</span><span id="__span-26-5"><a href="#__codelineno-26-5" id="__codelineno-26-5" name="__codelineno-26-5"></a>    <span class="n">page</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"page"</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="__span-26-6"><a href="#__codelineno-26-6" id="__codelineno-26-6" name="__codelineno-26-6"></a>    <span class="n">per_page</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"per_page"</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</span><span id="__span-26-7"><a href="#__codelineno-26-7" id="__codelineno-26-7" name="__codelineno-26-7"></a>
</span><span id="__span-26-8"><a href="#__codelineno-26-8" id="__codelineno-26-8" name="__codelineno-26-8"></a>    <span class="c1"># Validate parameters</span>
</span><span id="__span-26-9"><a href="#__codelineno-26-9" id="__codelineno-26-9" name="__codelineno-26-9"></a>    <span class="k">if</span> <span class="n">page</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-26-10"><a href="#__codelineno-26-10" id="__codelineno-26-10" name="__codelineno-26-10"></a>        <span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="__span-26-11"><a href="#__codelineno-26-11" id="__codelineno-26-11" name="__codelineno-26-11"></a>    <span class="k">if</span> <span class="n">per_page</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="__span-26-12"><a href="#__codelineno-26-12" id="__codelineno-26-12" name="__codelineno-26-12"></a>        <span class="n">per_page</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="__span-26-13"><a href="#__codelineno-26-13" id="__codelineno-26-13" name="__codelineno-26-13"></a>    <span class="k">if</span> <span class="n">per_page</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>  <span class="c1"># Max limit</span>
</span><span id="__span-26-14"><a href="#__codelineno-26-14" id="__codelineno-26-14" name="__codelineno-26-14"></a>        <span class="n">per_page</span> <span class="o">=</span> <span class="mi">100</span>
</span><span id="__span-26-15"><a href="#__codelineno-26-15" id="__codelineno-26-15" name="__codelineno-26-15"></a>
</span><span id="__span-26-16"><a href="#__codelineno-26-16" id="__codelineno-26-16" name="__codelineno-26-16"></a>    <span class="c1"># Calculate pagination</span>
</span><span id="__span-26-17"><a href="#__codelineno-26-17" id="__codelineno-26-17" name="__codelineno-26-17"></a>    <span class="n">total_users</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</span><span id="__span-26-18"><a href="#__codelineno-26-18" id="__codelineno-26-18" name="__codelineno-26-18"></a>    <span class="n">total_pages</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">total_users</span> <span class="o">/</span> <span class="n">per_page</span><span class="p">)</span> <span class="k">if</span> <span class="n">total_users</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>
</span><span id="__span-26-19"><a href="#__codelineno-26-19" id="__codelineno-26-19" name="__codelineno-26-19"></a>
</span><span id="__span-26-20"><a href="#__codelineno-26-20" id="__codelineno-26-20" name="__codelineno-26-20"></a>    <span class="c1"># Ensure page doesn't exceed total pages</span>
</span><span id="__span-26-21"><a href="#__codelineno-26-21" id="__codelineno-26-21" name="__codelineno-26-21"></a>    <span class="k">if</span> <span class="n">page</span> <span class="o">&gt;</span> <span class="n">total_pages</span><span class="p">:</span>
</span><span id="__span-26-22"><a href="#__codelineno-26-22" id="__codelineno-26-22" name="__codelineno-26-22"></a>        <span class="n">page</span> <span class="o">=</span> <span class="n">total_pages</span>
</span><span id="__span-26-23"><a href="#__codelineno-26-23" id="__codelineno-26-23" name="__codelineno-26-23"></a>
</span><span id="__span-26-24"><a href="#__codelineno-26-24" id="__codelineno-26-24" name="__codelineno-26-24"></a>    <span class="c1"># Calculate slice indices</span>
</span><span id="__span-26-25"><a href="#__codelineno-26-25" id="__codelineno-26-25" name="__codelineno-26-25"></a>    <span class="n">start_idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">page</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">per_page</span>
</span><span id="__span-26-26"><a href="#__codelineno-26-26" id="__codelineno-26-26" name="__codelineno-26-26"></a>    <span class="n">end_idx</span> <span class="o">=</span> <span class="n">start_idx</span> <span class="o">+</span> <span class="n">per_page</span>
</span><span id="__span-26-27"><a href="#__codelineno-26-27" id="__codelineno-26-27" name="__codelineno-26-27"></a>
</span><span id="__span-26-28"><a href="#__codelineno-26-28" id="__codelineno-26-28" name="__codelineno-26-28"></a>    <span class="c1"># Get paginated users</span>
</span><span id="__span-26-29"><a href="#__codelineno-26-29" id="__codelineno-26-29" name="__codelineno-26-29"></a>    <span class="n">paginated_users</span> <span class="o">=</span> <span class="n">users</span><span class="p">[</span><span class="n">start_idx</span><span class="p">:</span><span class="n">end_idx</span><span class="p">]</span>
</span><span id="__span-26-30"><a href="#__codelineno-26-30" id="__codelineno-26-30" name="__codelineno-26-30"></a>
</span><span id="__span-26-31"><a href="#__codelineno-26-31" id="__codelineno-26-31" name="__codelineno-26-31"></a>    <span class="c1"># Format output</span>
</span><span id="__span-26-32"><a href="#__codelineno-26-32" id="__codelineno-26-32" name="__codelineno-26-32"></a>    <span class="n">user_list</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-26-33"><a href="#__codelineno-26-33" id="__codelineno-26-33" name="__codelineno-26-33"></a>    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">paginated_users</span><span class="p">:</span>
</span><span id="__span-26-34"><a href="#__codelineno-26-34" id="__codelineno-26-34" name="__codelineno-26-34"></a>        <span class="n">full_name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'full_name'</span><span class="p">,</span> <span class="s1">'Unknown'</span><span class="p">)</span>
</span><span id="__span-26-35"><a href="#__codelineno-26-35" id="__codelineno-26-35" name="__codelineno-26-35"></a>        <span class="n">age</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'age'</span><span class="p">,</span> <span class="s1">'N/A'</span><span class="p">)</span>
</span><span id="__span-26-36"><a href="#__codelineno-26-36" id="__codelineno-26-36" name="__codelineno-26-36"></a>        <span class="n">city</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'city'</span><span class="p">,</span> <span class="s1">'Unknown'</span><span class="p">)</span>
</span><span id="__span-26-37"><a href="#__codelineno-26-37" id="__codelineno-26-37" name="__codelineno-26-37"></a>        <span class="n">user_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">"User </span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2">, Age: </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">, City: </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-26-38"><a href="#__codelineno-26-38" id="__codelineno-26-38" name="__codelineno-26-38"></a>
</span><span id="__span-26-39"><a href="#__codelineno-26-39" id="__codelineno-26-39" name="__codelineno-26-39"></a>    <span class="c1"># Build result with metadata</span>
</span><span id="__span-26-40"><a href="#__codelineno-26-40" id="__codelineno-26-40" name="__codelineno-26-40"></a>    <span class="n">metadata</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"Page </span><span class="si">{</span><span class="n">page</span><span class="si">}</span><span class="s2"> of </span><span class="si">{</span><span class="n">total_pages</span><span class="si">}</span><span class="s2"> | Total Users: </span><span class="si">{</span><span class="n">total_users</span><span class="si">}</span><span class="s2"> | Showing: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">paginated_users</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-26-41"><a href="#__codelineno-26-41" id="__codelineno-26-41" name="__codelineno-26-41"></a>    <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">metadata</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">"</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">user_list</span><span class="p">)</span>
</span><span id="__span-26-42"><a href="#__codelineno-26-42" id="__codelineno-26-42" name="__codelineno-26-42"></a>
</span><span id="__span-26-43"><a href="#__codelineno-26-43" id="__codelineno-26-43" name="__codelineno-26-43"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">TextContent</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">result</span><span class="p">)]</span>
</span></code></pre></div> </details> <hr/> <h3 id="step-3-test-in-mcp-inspector">Step 3: Test in MCP Inspector<a class="headerlink" href="#step-3-test-in-mcp-inspector" title="Permanent link">Â¶</a></h3> <ol> <li>Restart your MCP server</li> <li>Open MCP Inspector</li> <li>Go to the <strong>Tools</strong> tab</li> <li>Click on <strong>â€œlist_all_usersâ€</strong></li> <li>Test with different parameters:</li> <li>Default (page: 1, per_page: 10)</li> <li>Page 2 with 5 users per page</li> <li>Page 5 with 20 users per page</li> </ol> <p><strong>Expected Output Format:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a>Page 1 of 10 | Total Users: 100 | Showing: 10
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a>User 1: James Smith, Age: 24, City: New York
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a>User 2: Maria Garcia, Age: 31, City: Los Angeles
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a>...
</span></code></pre></div>  <hr/> <h2 id="congratulations">Congratulations! ðŸŽ‰<a class="headerlink" href="#congratulations" title="Permanent link">Â¶</a></h2> <p>Youâ€™ve successfully built a complete MCP server with:</p> <ul> <li>Multiple tools (calculate, data storage, echo, user filters, pagination)</li> <li>Resources (server info, data store, welcome message)</li> <li>Prompts (data analysis, calculation scenarios)</li> <li>RAG capabilities (user filtering and search)</li> <li>Pagination support (bonus feature)</li> </ul> <p>Keep exploring and building more advanced MCP servers!</p> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Render date of last update --> <!-- Render date of creation --> <!-- ---------------------------------------------------------------------- --> <!-- Render authors --> <!-- ---------------------------------------------------------------------- --> <!-- Render committers from GitHub --> <!-- Render committers from GitLab --> <!-- Render committers --> <!-- ---------------------------------------------------------------------- --> <!-- Determine date of last update --> <!-- Determine date of creation --> <!-- Source file information --> <aside class="md-source-file"> <!-- Date of last update --> <span class="md-source-file__fact"> <span class="md-icon" title="Last update"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 26, 2026 12:35:12 UTC">January 26, 2026</span> </span> <!-- Authors (git-authors plugin) --> <!-- Authors (git-committers plugin) --> <!-- Fallback: Manual GitHub avatar for repository owner --> <span class="md-source-file__fact"> <nav> <a class="md-author" href="https://github.com/nirgeier" title="@nirgeier"> <img alt="Nir Geier" src="https://avatars.githubusercontent.com/u/555154?size=256"/> </a> </nav> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class="md-footer"> <div class="logo1"></div> <div class="logo2"></div> <!-- Link to previous and/or next page --> <nav aria-label="Footer" class="md-footer__inner md-grid"> <!-- Link to previous page --> <a aria-label="Previous: Lab 5: MCP Prompts" class="md-footer__link md-footer__link--prev" href="../../Lab05-MCP-Prompts/lab/"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Previous </span> <div class="md-ellipsis"> Lab 5: MCP Prompts </div> </div> </a> <!-- <ul class="social-badges">
          <li><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target="_blank" rel="noopener"><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a></li>
          <li><a href="https://www.linkedin.com/in/nirgeier/" target="_blank" rel="noopener"><i class="fab fa-linkedin" aria-hidden="true"></i><span class="sr-only">LinkedIn profile</span></a></li>
          <li><a href="mailto:nirgeier@gmail.com"><img src="https://img.shields.io/badge/-nirgeier@gmail.com-fcc624?style=flat&logo=Gmail&logoColor=red" alt="Gmail Badge"></a></li>
          <li><a href="mailto:nirg@codewizard.co.il"><img src="https://img.shields.io/badge/-nirg@codewizard.co.il-fcc624?style=flat&logo=microsoftoutlook&logoColor=blue" alt="Outlook Badge"></a></li>
        </ul> --> <!-- Link to next page --> <a aria-label="Next: Lab 7: MCP Ollama" class="md-footer__link md-footer__link--next" href="../../Lab07-MCP-Ollama/lab/"> <div class="md-footer__title"> <span class="md-footer__direction"> Next </span> <div class="md-ellipsis"> Lab 7: MCP Ollama </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> Â©2021-2025 Nir Geier<br/><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" rel="noopener" target="_blank"><img alt="Visitor Badge" src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier"/></a> </div> </div> <!-- Social links --> <div class="md-social"> <a class="md-social__link social-class__github" href="https://github.com/nirgeier/AI-K8S-MCP" rel="noopener" target="_blank" title="View on GitHub"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__fork" href="https://github.com/nirgeier/AI-K8S-MCP/network/members" rel="noopener" target="_blank" title="Fork this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"></path></svg> </a> <a class="md-social__link social-class__star" href="https://github.com/nirgeier/AI-K8S-MCP/stargazers" rel="noopener" target="_blank" title="Star this repo"> <svg viewbox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"></path></svg> </a> <a class="md-social__link social-class__linkedin" href="https://www.linkedin.com/in/nirgeier/" rel="noopener" target="_blank" title="Connect on LinkedIn"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__discord" href="https://discord.gg/U6xW23Ss" rel="noopener" target="_blank" title="Follow me on Discord"> <svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__stackoverflow" href="https://stackoverflow.com/users/1755598/codewizard" rel="noopener" target="_blank" title="Follow me on Stack Overflow"> <svg viewbox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__whatsapp" href="https://wa.me/972548122310" rel="noopener" target="_blank" title="Follow me on WhatsApp"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6" fill="currentColor"></path></svg> </a> <a class="md-social__link social-class__email" href="mailto:nirg@codewizard.co.il" rel="noopener" target="_blank" title="Email me"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z" fill="currentColor"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <div class="md-progress" data-md-component="progress" role="progressbar"></div> <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "content.footer.last-updated", "content.footer.contributors", {"navigation.expand": false}, "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", {"navigation.top": true}, "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate", "toc.sticky", "mermaid"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src="../../assets/javascripts/bundle.50899def.min.js"></script> <script src="../../js/print-site.js"></script> <script src="https://buttons.github.io/buttons.js?v=1766553928"></script> </body> </html>